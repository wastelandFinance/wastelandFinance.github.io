import{a9 as J,r as i,aZ as it,az as o,$ as c,a0 as t,a7 as y,D as a,K as s,O as H,aF as N,aG as Lt,aC as et,aA as at,ap as L,h as T,Z as g,b1 as f,H as st,a6 as p,_ as C,b3 as ut,bn as ct,au as es,aB as Ft,w as as}from"./@vue-4a3654e3.js";import{K as os,E as Ct,L as Ut,g as nt,H as ls,J as ns}from"./getAssetsFile-9c9ffaf3.js";import{_ as K,u as kt,B as D,L as _t,F as mt,M as us,J as cs,T as is,U as ds,V as rs,W as vs,a as _s}from"./index-f2ab0033.js";import{B as xt}from"./Border-16110d38.js";import{b as Pt,h as Y,t as ht}from"./index-fb104491.js";import{u as Z}from"./vue-i18n-e0b4ebde.js";/* empty css                                                          */import{a as G,c as Nt}from"./format-f8821988.js";import{a as Dt,f as hs,b as ms}from"./Fragment-3ef7362b.js";import{g as St,a as fs,b as gs}from"./GoldCoin-5f9fc6b0.js";import{g as wt,e as ps,a as bs}from"./Erc20-89d0767e.js";import{T as ys,u as $s}from"./UpgradeNft-89455159.js";import{u as Fs}from"./vue-router-9c8b6c7f.js";import{E as Vt,L as Cs}from"./Loading-d3c78180.js";import{M as ks}from"./MaskLoading-8d68cfd4.js";import{a as xs,e as Ds,l as Ss,f as ws}from"./index-a39be7cb.js";import"./pinia-117a262d.js";import"./vue-demi-7aca303d.js";import"./@metamask-5fe78728.js";import"./@ethersproject-af74bb15.js";import"./js-sha3-1704859c.js";import"./hash.js-adcfb37a.js";import"./minimalistic-assert-770ac730.js";import"./inherits-878ccdf9.js";import"./bech32-20d6ea16.js";import"./@walletconnect-a7c9cb01.js";import"./is-typedarray-816496c7.js";import"./query-string-863c9c8a.js";import"./strict-uri-encode-39743d5a.js";import"./decode-uri-component-96b74898.js";import"./split-on-first-dea6fdb0.js";import"./typedarray-to-buffer-512de52f.js";import"./detect-browser-84fc1d8c.js";import"./qrcode-f7c04bee.js";import"./isarray-0a73c961.js";import"./buffer-8016aac3.js";import"./base64-js-c17a52db.js";import"./ieee754-480627a8.js";import"./dijkstrajs-322a599c.js";import"./copy-to-clipboard-53658741.js";import"./toggle-selection-dd807a76.js";import"./preact-c2ca5e76.js";import"./process-85dbfe57.js";import"./@intlify-79ae61b4.js";import"./vue-896067e7.js";import"./axios-5aeb6a83.js";import"./dayjs-b5f1d6b3.js";import"./public-dcfc16e7.js";/* empty css                                                         *//* empty css                                                            */import"./lottie-web-5da13280.js";/* empty css                                                                */import"./qs-a1059fb7.js";import"./side-channel-0320a11a.js";import"./get-intrinsic-376f1f3c.js";import"./has-symbols-eb4acc8a.js";import"./function-bind-3c0fdd0c.js";import"./has-6f12dd3c.js";import"./call-bind-9097bd02.js";import"./object-inspect-39034d5e.js";const Xt=e=>(et("data-v-0c4130dc"),e=e(),at(),e),Es={class:"hero-card-container"},Bs={class:"hero-info"},As={class:"base-flex base-height"},Is={class:"hero-name"},Ts={class:"hero-type"},Hs={class:"base-flex base-height"},Rs={class:"base-flex"},Ns={class:"star"},Ms={class:"grade"},Ls=Xt(()=>t("div",{class:"dot"},null,-1)),Us={class:"base-flex base-height"},Ps={class:"base-font"},Vs={class:"base-flex"},Xs={class:"ques-icon"},zs={class:"attr-hide"},Os={class:"active-title attr-item"},Ws=Xt(()=>t("div",{class:"triangle"},null,-1)),qs={class:"base-flex base-height"},Gs={class:"base-font"},Js=J({__name:"HeroCard",props:{data:{default:()=>({})}},setup(e){const d=e,{t:n}=Z(),u=i(0);return it(()=>{if(u.value=0,d.data.attributes)for(let b in d.data.attributes)u.value+=d.data.attributes[b]}),(b,$)=>(o(),c("div",Es,[t("div",null,[y(xt,{border:!1,img:e.data.image,"rarity-img":a(Pt)[e.data.rarity]},null,8,["img","rarity-img"])]),t("div",Bs,[t("div",As,[t("span",Is,s(e.data.name),1),t("span",Ts,s(e.data.classes),1)]),t("div",Hs,[t("div",Rs,[(o(!0),c(H,null,N(e.data.starRate,v=>(o(),c("div",Ns))),256))]),t("span",Ms,[Ls,t("div",null,"LV"+s(e.data.level),1)])]),t("div",Us,[t("div",Ps,s(a(n)("\u603B\u5C5E\u6027")),1),t("div",Vs,[t("div",null,s(u.value),1),t("div",Xs,[t("div",zs,[t("div",Os,[t("span",null,s(a(n)("\u603B\u5C5E\u6027")),1),t("span",null,s(u.value),1)]),(o(!0),c(H,null,N(a(Y),v=>(o(),c("div",{class:"attr-item",key:v},[t("span",null,s(a(n)(v)),1),t("span",null,s(e.data.attributes&&e.data.attributes[v]),1)]))),128)),Ws])])])]),t("div",qs,[t("span",Gs,s(e.data.classes&&a(n)(a(Y)[e.data.classes])),1),t("span",null,s(e.data.attributes&&e.data.attributes[a(Y)[e.data.classes]]),1)])]),Lt(b.$slots,"default",{},void 0,!0)]))}});var tt=K(Js,[["__scopeId","data-v-0c4130dc"]]);const zt=e=>(et("data-v-9625cfa8"),e=e(),at(),e),Ks={class:"hero-card-container"},Zs={class:"mark"},js={class:"position"},Qs={class:"star"},Ys={class:"hero-info"},te={class:"base-flex base-height"},se={class:"hero-name"},ee={class:"base-flex base-height"},ae={class:"hero-type"},oe={class:"base-flex"},le=zt(()=>t("div",{class:"block"},null,-1)),ne={class:"grade"},ue={class:"base-flex base-height"},ce={class:"base-font"},ie={class:"base-flex"},de={class:"ques-icon"},re={class:"attr-hide"},ve={class:"active-title attr-item"},_e=zt(()=>t("div",{class:"triangle"},null,-1)),he={class:"base-flex base-height"},me={class:"base-font"},fe=J({__name:"HeroCardForPhone",props:{data:{default:()=>({})}},setup(e){const d=e,{t:n}=Z(),u=i(0);return it(()=>{if(u.value=0,d.data.attributes)for(let b in d.data.attributes)u.value+=d.data.attributes[b]}),(b,$)=>(o(),c("div",Ks,[t("div",Zs,[y(xt,{border:!1,img:e.data.image,"rarity-img":a(Pt)[e.data.rarity]},null,8,["img","rarity-img"]),t("div",js,[(o(!0),c(H,null,N(e.data.starRate,v=>(o(),c("div",Qs))),256))])]),t("div",Ys,[t("div",te,[t("span",se,s(e.data.name),1)]),t("div",ee,[t("span",ae,s(e.data.classes),1),t("div",oe,[le,t("span",ne," LV"+s(e.data.level),1)])]),t("div",ue,[t("div",ce,s(a(n)("\u603B\u5C5E\u6027")),1),t("div",ie,[t("div",null,s(u.value),1),t("div",de,[t("div",re,[t("div",ve,[t("span",null,s(a(n)("\u603B\u5C5E\u6027")),1),t("span",null,s(u.value),1)]),(o(!0),c(H,null,N(a(Y),v=>(o(),c("div",{class:"attr-item",key:v},[t("span",null,s(a(n)(v)),1),t("span",null,s(e.data.attributes&&e.data.attributes[v]),1)]))),128)),_e])])])]),t("div",he,[t("span",me,s(e.data.classes&&a(n)(a(Y)[e.data.classes])),1),t("span",null,s(e.data.attributes&&e.data.attributes[a(Y)[e.data.classes]]),1)])]),Lt(b.$slots,"default",{},void 0,!0)]))}});var Mt=K(fe,[["__scopeId","data-v-9625cfa8"]]);const Et=e=>(et("data-v-7d0722a6"),e=e(),at(),e),ge={class:"content"},pe={class:"content-top"},be={class:"content-left"},ye={class:"card-item"},$e={class:"content-right"},Fe={class:"base-flex base-margin"},Ce={class:"base-text"},ke={class:"base-flex"},xe={class:"base-active",style:{"margin-right":"10px"}},De=Et(()=>t("div",{class:"fragment-icon"},[t("img",{src:os})],-1)),Se={class:"base-flex base-margin"},we={class:"base-text"},Ee={class:"base-flex"},Be={class:"base-margin"},Ae={class:"base-flex"},Ie={class:"base-text"},Te={class:"price"},He=Et(()=>t("div",{class:"border"},null,-1)),Re={class:"custom-text base-flex"},Ne={style:{display:"flex"}},Me={class:"custom-text"},Le={style:{display:"flex"}},Ue=Et(()=>t("img",{src:Ct},null,-1)),Pe=[Ue],Ve={class:"handler"},Xe={class:"base-flex"},ze={class:"margin-left"},Oe={class:"base-flex"},We={class:"margin-left"},qe=J({__name:"paymentDialog",props:{config:{default:()=>({})},data:{default:()=>({})}},emits:["close","updateStar"],setup(e,{emit:d}){const n=e,{t:u}=Z(),b=()=>{d("close")},$=kt(),v=i(0);L(async()=>{const h=await Dt($.address);v.value=h.toString()});const S=i(0);L(async()=>{const h=await St($.address);S.value=G(h)});const w=i(0);L(async()=>{const h=await wt($.address);w.value=G(h)});const m=i(1),F=h=>{(!_.value||!A.value)&&(m.value=h)},X=i(0);X.value=T(()=>{let h=0;for(let P in n.data.attributes)h+=n.data.attributes[P];return h}).value;const _=i(!1),z=async()=>{try{_.value=!0,(await fs()).from&&k(),_.value=!1}catch(h){_.value=!1,console.log("\u6388\u6743\u5931\u8D25",h)}},R=i(!1),k=async()=>{const h=await gs($.address);Number(h.toString())>0?R.value=!0:R.value=!1};L(()=>{k()});const A=i(!1),B=async()=>{try{A.value=!0;let h=await ps();h.from&&(await h.wait(1),await r(),A.value=!1)}catch(h){A.value=!1,console.log("mdx\u6388\u6743\u5931\u8D25",h)}},O=i(!1),r=async()=>{let h=await bs($.address);Number(h.toString())>0&&(O.value=!0)};L(()=>{k(),r()});const U=i(!1);it(()=>{n.config.id&&(m.value==1?(k(),Number(v.value)>Number(n.config.fragment_amount)&&Number(S.value)>Number(n.config.diamond_amount)?U.value=!0:U.value=!1):(r(),Number(v.value)>Number(n.config.fragment_amount)&&Number(w.value)>Number(n.config.coin_amount)?U.value=!0:U.value=!1))});const dt=()=>{d("updateStar",{tokenType:m.value==1?ht.token_diamond:ht.token_coin})},ft=T(()=>!R.value&&!_.value&&m.value==1),I=T(()=>!R.value&&_.value&&m.value==1),rt=T(()=>!O.value&&!A.value&&m.value==2),W=T(()=>!O.value&&A.value&&m.value==2),ot=T(()=>U.value&&R.value&&m.value==1),lt=T(()=>U.value&&O.value&&m.value==2),gt=T(()=>R.value&&!U.value&&m.value==1),pt=T(()=>O.value&&!U.value&&m.value==2);return(h,P)=>(o(),g(mt,{show:"",title:a(u)("\u652F\u4ED8\u539F\u6599"),onClose:b},{default:f(()=>[t("div",ge,[t("div",pe,[t("div",be,[t("div",ye,[y(tt,{data:e.data,style:{"margin-bottom":"unset"},width:"213"},null,8,["data"])])]),t("div",$e,[t("div",Fe,[t("span",Ce,s(a(u)("\u5347\u661F\u788E\u7247")),1),t("span",ke,[t("span",xe,s(e.config.fragment_amount),1),De])]),t("div",Se,[t("span",we,s(a(u)("\u9009\u62E9\u652F\u4ED8\u5E01\u79CD")),1),t("span",Ee,[t("div",{class:st(["currency",m.value==1?"select-active":""]),onClick:P[0]||(P[0]=j=>F(1))}," DTH ",2),t("div",{class:st(["currency",m.value==2?"select-active":""]),onClick:P[1]||(P[1]=j=>F(2))}," MDX ",2)])]),t("div",Be,[t("div",Ae,[t("span",Ie,s(a(u)("\u652F\u4ED8\u91D1\u989D")),1),t("span",Te,s(m.value==1?e.config.diamond_amount+" DTH":e.config.coin_amount+" MDX"),1)]),He,t("div",Re,[t("span",null,s(a(u)("\u4F59\u989D")),1),t("span",null,s(m.value==1?S.value:w.value),1)])]),t("div",Ne,[t("div",Me,s(a(u)("\u5DF2\u9009\u5347\u661F\u7C7B\u578B\uFF0C\u5C06\u5176\u5347\u661F\u81F3")),1),t("div",Le,[(o(!0),c(H,null,N(e.data.starRate&&e.data.starRate+1,j=>(o(),c("div",{class:"star-icon",key:j},Pe))),128))])])])]),t("div",Ve,[y(D,{style:{"margin-right":"40px"},currentType:"disabled",onClick:b},{default:f(()=>[p(s(a(u)("\u53D6\u6D88")),1)]),_:1}),a(ft)?(o(),g(D,{key:0,onClick:z},{default:f(()=>[p(s(a(u)("DTH \u6388\u6743")),1)]),_:1})):C("",!0),a(I)?(o(),g(D,{key:1,style:{cursor:"not-allowed"}},{default:f(()=>[t("div",Xe,[y(_t),t("div",ze,s(a(u)("DTH \u6388\u6743\u4E2D"))+"...",1)])]),_:1})):C("",!0),a(rt)?(o(),g(D,{key:2,onClick:B},{default:f(()=>[p(s(a(u)("MDX \u6388\u6743")),1)]),_:1})):C("",!0),a(W)?(o(),g(D,{key:3,style:{cursor:"not-allowed"}},{default:f(()=>[t("div",Oe,[y(_t),t("div",We,s(a(u)("MDX \u6388\u6743\u4E2D"))+"...",1)])]),_:1})):C("",!0),a(ot)?(o(),g(D,{key:4,currentType:"default",onClick:dt},{default:f(()=>[p(s(a(u)("\u5347\u661F")),1)]),_:1})):C("",!0),a(lt)?(o(),g(D,{key:5,currentType:"default",onClick:dt},{default:f(()=>[p(s(a(u)("\u5347\u661F")),1)]),_:1})):C("",!0),a(gt)?(o(),g(D,{key:6,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(a(u)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})):C("",!0),a(pt)?(o(),g(D,{key:7,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(a(u)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})):C("",!0)])])]),_:1},8,["title"]))}});var Ge=K(qe,[["__scopeId","data-v-7d0722a6"]]);const Je={class:"content"},Ke={class:"card"},Ze={class:"handler"},je=J({__name:"SuccessDialog",props:{show:{type:Boolean,default:!1},data:{default:()=>({})}},emits:["close"],setup(e,{emit:d}){const n=e,{t:u}=Z(),b=()=>{d("close")},$=Fs(),v=()=>{$.push(`/user/wallet?token_id=${n.data.token_id}`)};return(S,w)=>(o(),g(mt,{show:e.show,onClose:b,title:a(u)("\u606D\u559C\u4F60\u5347\u661F\u6210\u529F")},{default:f(()=>[t("div",Je,[t("div",Ke,[y(tt,{data:e.data},null,8,["data"])]),t("div",Ze,[y(D,{onClick:b},{default:f(()=>[p(s(a(u)("\u6211\u77E5\u9053\u4E86")),1)]),_:1}),t("div",{class:"tips",onClick:v},s(a(u)("\u67E5\u770B\u82F1\u96C4\u8BE6\u60C5")),1)])])]),_:1},8,["show","title"]))}});var Qe=K(je,[["__scopeId","data-v-c9b0547a"]]);const Ot=e=>(et("data-v-5f6e80a3"),e=e(),at(),e),Ye={class:"content"},ta={class:"top"},sa={class:"star-list"},ea=["onClick"],aa=Ot(()=>t("img",{src:Ct},null,-1)),oa=[aa],la=["onClick"],na=Ot(()=>t("img",{src:Ut},null,-1)),ua=[na],ca={key:0,class:"hero-scroll"},ia={class:"hero-list"},da={class:"select-icon-mark"},ra={key:2,class:"btn-blcok"},va=J({__name:"SelectHeroDialogForPhone",props:{list:{default:()=>[]}},emits:["close","starClick","selectAll","confirm"],setup(e,{emit:d}){const{t:n}=Z(),u=()=>{d("close")},b=()=>{d("selectAll")},$=i({}),v=F=>{$.value=F},S=i(0),w=F=>{S.value=F,d("starClick",F)},m=()=>{d("confirm",$.value)};return(F,X)=>(o(),g(mt,{show:"",title:a(n)("\u9009\u62E9\u82F1\u96C4"),onClose:u},{default:f(()=>[t("div",Ye,[t("div",ta,[t("div",{class:"desc",onClick:b},s(a(n)("\u5168\u90E8")),1),t("div",sa,[(o(!0),c(H,null,N(S.value,_=>(o(),c("div",{class:"star-icon",key:_,onClick:z=>w(_)},oa,8,ea))),128)),(o(!0),c(H,null,N(5-S.value,_=>(o(),c("div",{class:"star-icon un-active",key:_,onClick:z=>w(_+S.value)},ua,8,la))),128))])]),e.list.length?(o(),c("div",ca,[t("div",ia,[(o(!0),c(H,null,N(e.list,_=>(o(),g(tt,{class:st([_.token_id==$.value.token_id?"active-class":"","card-item"]),data:_,onClick:z=>v(_)},{default:f(()=>[ut(t("div",da,null,512),[[ct,_.token_id==$.value.token_id]])]),_:2},1032,["class","data","onClick"]))),256))])])):C("",!0),e.list.length?C("",!0):(o(),g(Vt,{key:1},{default:f(()=>[p(s(a(n)("\u4F60\u8FD8\u6CA1\u6709\u4EFB\u4F55\u82F1\u96C4\uFF01")),1)]),_:1})),e.list.length?(o(),c("div",ra,[y(D,{onClick:m},{default:f(()=>[p(s(a(n)("\u786E\u5B9A")),1)]),_:1})])):C("",!0)])]),_:1},8,["title"]))}});var _a=K(va,[["__scopeId","data-v-5f6e80a3"]]);const Wt=e=>(et("data-v-2b2a8c70"),e=e(),at(),e),ha={class:"content-phone"},ma={class:"hero-info"},fa={class:"hero-name"},ga={class:"hero-type"},pa={class:"hero-grade"},ba=Wt(()=>t("div",{class:"base-flex"},null,-1)),ya={class:"hero-block"},$a={class:"hero-card"},Fa={class:"hero-attr"},Ca={class:"attr-title"},ka={class:"title"},xa={class:"count"},Da={class:"attr-list-block"},Sa={class:"attr-left"},wa={class:"attr-icon"},Ea=["src"],Ba={class:"attr-name"},Aa={class:"attr-right-value"},Ia={class:"payment-info"},Ta={class:"up-star base-flex"},Ha={class:"base-title"},Ra={class:"base-flex"},Na={class:"star-count"},Ma=Wt(()=>t("div",{class:"fargment-icon"},null,-1)),La={class:"select-type base-flex"},Ua={class:"base-title"},Pa={class:"base-flex"},Va={class:"payment-count base-flex"},Xa={class:"base-title"},za={class:"payment-value"},Oa={class:"price-block base-flex"},Wa={class:"price-desc"},qa={class:"price-value"},Ga={class:"handler"},Ja={class:"base-flex up-star-tips"},Ka={class:"upStart-text"},Za={key:0,class:"base-flex"},ja=J({__name:"PaymentDialogForPhone",props:{config:{default:()=>({})},data:{default:()=>({})}},emits:["close","updateStar"],setup(e,{emit:d}){const n=e,{t:u}=Z(),b=[{icon:nt("pc/user/Strength.png"),text:"\u9B54\u6CD5",attr:"magic"},{icon:nt("pc/user/Vitality.png"),text:"\u653B\u51FB",attr:"attack"},{icon:nt("pc/user/Agility.png"),text:"\u654F\u6377",attr:"agile"},{icon:nt("pc/user/Stamina.png"),text:"\u751F\u547D",attr:"life"},{icon:nt("pc/user/Defense.png"),text:"\u9632\u5FA1",attr:"defense"}],$=kt(),v=i(0);L(async()=>{const k=await Dt($.address);v.value=k.toString()});const S=i(0);L(async()=>{const k=await St($.address);S.value=G(k)});const w=i(0);L(async()=>{const k=await wt($.address);w.value=G(k)});const m=i(1),F=k=>{m.value=k},X=i(0);it(()=>{let k=0;if(n.data.attributes)for(let A in n.data.attributes)k+=n.data.attributes[A];X.value=k});const _=i(!1);it(()=>{n.config.id&&(m.value==1?v.value>n.config.fragment_amount&&S.value>n.config.diamond_amount?_.value=!0:_.value=!1:v>n.config.fragment_amount&&w.value>n.config.coin_amount?_.value=!0:_.value=!1)});const z=()=>{d("updateStar",{tokenType:m.value==1?ht.token_diamond:ht.token_coin})},R=()=>{d("close")};return(k,A)=>(o(),g(mt,{show:"",title:a(u)("\u652F\u4ED8\u539F\u6599"),onClose:R},{default:f(()=>[t("div",ha,[t("div",ma,[t("div",fa,s(e.data.name),1),t("div",ga,s(e.data.classes),1),t("div",pa,"LV"+s(e.data.level),1),ba]),t("div",ya,[t("div",$a,[y(xt,{img:e.data.image,border:!1},null,8,["img"])]),t("div",Fa,[t("div",Ca,[t("div",ka,s(a(u)("\u603B\u5C5E\u6027")),1),t("div",xa,s(X.value),1)]),t("div",Da,[(o(),c(H,null,N(b,B=>t("div",{class:"attr-item",key:B.attr},[t("div",Sa,[t("div",wa,[t("img",{src:B.icon},null,8,Ea)]),t("div",Ba,s(B.text),1)]),t("div",Aa,s(e.data.attributes&&e.data.attributes[B.attr]),1)])),64))])])]),t("div",Ia,[t("div",Ta,[t("div",Ha,s(a(u)("\u5347\u661F\u788E\u7247")),1),t("div",Ra,[t("div",Na,s(e.config.fragment_amount),1),Ma])]),t("div",La,[t("div",Ua,s(a(u)("\u9009\u62E9\u652F\u4ED8\u5E01\u79CD")),1),t("div",Pa,[t("div",{class:st(["base-box-style",m.value==1?"select-active":""]),onClick:A[0]||(A[0]=B=>F(1))}," DTH ",2),t("div",{class:st(["base-box-style","money-ml",m.value==2?"select-active":""]),onClick:A[1]||(A[1]=B=>F(2))}," MDX ",2)])]),t("div",Va,[t("div",Xa,s(a(u)("\u652F\u4ED8\u91D1\u989D")),1),t("div",za,s(m.value==1?e.config.diamond_amount+"DTH":e.config.coin_amount+"MDX"),1)]),t("div",Oa,[t("div",Wa,s(a(u)("\u4F59\u989D")),1),t("div",qa,s(m.value==1?S.value:w.value),1)])]),t("div",Ga,[_.value?(o(),g(D,{key:0,currentType:"default",onClick:z},{default:f(()=>[p(s(a(u)("\u5347\u661F")),1)]),_:1})):(o(),g(D,{key:1,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(a(u)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})),t("div",Ja,[t("div",Ka,s(a(u)("\u5DF2\u9009\u5347\u661F\u7C7B\u578B\uFF0C\u5C06\u5176\u5347\u661F\u81F3")),1),e.data.starRate?(o(),c("div",Za,[(o(!0),c(H,null,N(e.data.starRate+1,B=>(o(),c("div",{class:"star-icon",key:B}))),128))])):C("",!0)])])])]),_:1},8,["title"]))}});var Qa=K(ja,[["__scopeId","data-v-2b2a8c70"]]);const V=e=>(et("data-v-23f03b2e"),e=e(),at(),e),Ya={class:"base-layout"},to={class:"rising-star-box"},so={class:"rising-star-top"},eo={key:0,class:"pic-container"},ao=["src"],oo={key:1,class:"select-icon",src:ls},lo={class:"center-block"},no=V(()=>t("div",{class:"arrow"},[t("img",{src:ns})],-1)),uo={class:"bad pc-show"},co={class:"need"},io=p(" \u5347\u661F\u5230"),ro={class:"text-base-style"},vo=p("\u661F\uFF0C\u9700\u8981\u539F\u6599 "),_o={class:"text-style-1"},ho=V(()=>t("div",{class:"dth"},null,-1)),mo={class:"text-base-style"},fo={class:"text-style-2"},go={key:0,class:"text-style-3"},po={key:1,class:"text-style-3"},bo=p(" \u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u5C5E\u6027"),yo={class:"text-base-style"},$o=p("\u7684\u6210\u957F\u500D\u7387 "),Fo={key:0,class:"pc-show"},Co={key:2,class:"base-border"},ko={class:"select-icon"},xo=["src"],Do={key:3,class:"base-card-box"},So={class:"rising-star-bootom"},wo={class:"bad phone-show"},Eo={class:"need base-margin"},Bo=p(" \u5347\u661F\u5230"),Ao={class:"text-base-style"},Io=p("\u661F\uFF0C\u9700\u8981\u539F\u6599 "),To={class:"base-margin"},Ho=V(()=>t("div",{class:"dth"},null,-1)),Ro={class:"text-base-style"},No={class:"base-margin"},Mo={class:"text-base-style"},Lo=p(" \u6216 "),Uo={class:"text-base-style"},Po={key:0,class:"base-margin base-text-color"},Vo={key:1,class:"base-margin base-text-color"},Xo=p(" \u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u5C5E\u6027"),zo=V(()=>t("span",{class:"text-base-style"},"x1.2",-1)),Oo=p("\u7684\u6210\u957F\u500D\u7387 "),Wo=[Xo,zo,Oo],qo={key:0,class:"phone-show"},Go={class:"btn-width"},Jo={style:{display:"flex","align-items":"center"}},Ko={class:"text-base-style"},Zo={style:{display:"flex","align-items":"center"}},jo={class:"text-base-style"},Qo={class:"type-select-container",style:{position:"relative"}},Yo={style:{display:"flex","align-items":"center"}},tl={class:"star-list"},sl=["onClick"],el=V(()=>t("img",{src:Ct},null,-1)),al=[el],ol=["onClick"],ll=V(()=>t("img",{src:Ut},null,-1)),nl=[ll],ul={key:1},cl={key:0,class:"hero-list"},il={class:"select"},dl=V(()=>t("div",{class:"card"},null,-1)),rl=V(()=>t("div",{class:"card"},null,-1)),vl=V(()=>t("div",{class:"card"},null,-1)),_l=V(()=>t("div",{class:"card"},null,-1)),hl=J({__name:"Index",setup(e){const{t:d}=Z(),n=kt(),u={1:1,2:1.3,3:1.69,4:2.2,5:2.85},b=i(!1),$=()=>{b.value=document.documentElement.clientWidth<750};es(()=>{$(),window.addEventListener("resize",$,!1)});const v=i([]),S=i([]),w=i(!1),m=async()=>{try{if(n.address.length){w.value=!0;const l=await xs({account:n.address});l.length&&(v.value=l,S.value=l),w.value=!1}}catch(l){w.value=!1,console.log("\u53D1\u751F\u4E86\u672A\u77E5\u9519\u8BEF",l)}},F=i(!1),X=async()=>{const l=await hs(n.address);F.value=l},_=i(!1),z=async()=>{try{_.value=!0,(await ms()).from&&X(),_.value=!1}catch(l){_.value=!1,console.log("\u6388\u6743\u76F2\u76D2\u5931\u8D25",l)}};L(async()=>{m(),X()});const R=i(!1),k=()=>{b.value&&!q.value&&(R.value=!0)},A=()=>{R.value=!1},B=i({}),O=async l=>{try{if(l.starRate<5){const x={heroId:l.heroid,level:l.level,star:l.starRate+1,extraAttr:l.extra_attr};let E=await ws(x);if(E.agile){const M={...l};M.starRate=l.starRate+1,M.attributes=E,B.value=M}}else B.value={...l}}catch(x){console.log("\u8BF7\u6C42\u9519\u8BEF",x)}},r=i({}),U=async l=>{r.value=l;const x={rarity:l.rarity,star_rate:l.starRate};O(l),rt(x)},dt=async l=>{r.value=l;const x={rarity:l.rarity,star_rate:l.starRate};rt(x),O(l),R.value=!1},ft=()=>{window.open(`${cs}${vt.value}`)},I=i({}),rt=async l=>{let x=await Ds(l);x.id&&(I.value=x)},W=i(!1),ot=()=>{W.value=!W.value},lt=i(!1),gt=async()=>{r.value={},lt.value=!1,setTimeout(()=>{m()},1e3)},pt=()=>{window.open("https://www.bilibili.com/")},h=i(0),P=l=>{h.value=l,v.value=[],S.value.map(x=>{x.starRate==l&&v.value.push(x)})},j=()=>{h.value=0,v.value=S.value},Bt=i(0),qt=async()=>{if(n.address){const l=await Dt(n.address);Bt.value=G(l)}},At=i(0),Gt=async()=>{if(n.address){const l=await St(n.address);At.value=G(l)}};L(async()=>{Gt(),qt()});const It=i(0);L(async()=>{const l=await wt(n.address);It.value=G(l)}),Ft("starFragmentCount",Bt.value),Ft("dthBalance",At.value),Ft("mdxBalance",It.value);const Q=i(!1),bt=i(""),vt=i(""),yt=i("success"),q=i(!1),Tt=async({tokenType:l})=>{var x,E;try{W.value=!1,q.value=!0;const M={tokenId:r.value.token_id,userAddress:n.address,orderType:1,coinAmount:l==1?(x=Nt(I.value.coin_amount))==null?void 0:x.toString():"0",goldCoinAmount:l==2?(E=Nt(I.value.diamond_amount))==null?void 0:E.toString():"0",boxFragment:I.value.blindbox_amount,starFragment:I.value.fragment_amount,targetLevel:0,targetStarRate:r.value.starRate,tokenType:l,userSign:""},Yt=await is(),ts=ds(Number(Yt)),ss=rs(),Ht=await vs(ts,ss,M);if(Ht){M.userSign=Ht;const Rt=await Ss(M);if(Rt.data.signature){let $t=await $s(Rt.data);$t.from&&(await $t.wait(2)).from&&(lt.value=!0,q.value=!1,bt.value="\u5347\u661F\u6210\u529F",vt.value=$t.hash,yt.value="success",Q.value=!0)}}}catch(M){bt.value="\u5347\u661F\u5931\u8D25",vt.value=" \u4F60\u9009\u62E9\u7684\u82F1\u96C4\u5347\u661F\u5931\u8D25",yt.value="error",Q.value=!0,q.value=!1,console.log("\u53D1\u751F\u4E86\u672A\u77E5\u9519\u8BEF",M)}};as(Q,l=>{l&&setTimeout(()=>{Q.value=!1},2e3)});const Jt=T(()=>!F.value&&!_.value),Kt=T(()=>!F.value&&_.value),Zt=T(()=>!r.value.heroid&&F.value&&F.value),jt=T(()=>q.value&&F.value&&F.value),Qt=T(()=>r.value.heroid&&r.value.starRate<5&&F.value&&!q.value);return(l,x)=>(o(),c(H,null,[y(ys,null,{default:f(()=>[t("span",null,s(a(d)("\u82F1\u96C4\u5347\u661F\u63D0\u793A")),1),t("span",{style:{color:"#E1C392",cursor:"pointer"},onClick:pt},s(a(d)("\u8BF7\u70B9\u51FB")),1)]),_:1}),t("div",Ya,[t("div",null,[t("div",to,[t("div",so,[r.value.image?(o(),c("div",{key:1,class:"base-card-box",onClick:k},[y(tt,{class:"pc-active",data:r.value},null,8,["data"]),y(Mt,{class:"phone-active",style:{width:"100%"},data:r.value},null,8,["data"])])):(o(),c("div",{key:0,class:"base-border left-box",onClick:k},[r.value.image?(o(),c("div",eo,[t("img",{src:r.value.image},null,8,ao)])):(o(),c("img",oo))])),t("div",lo,[no,t("div",uo,[t("div",co,[io,t("span",ro,s(r.value.starRate+1||"??"),1),vo]),t("div",_o,[ho,t("span",mo,s(I.value.fragment_amount||"??")+" "+s(a(d)("\u5347\u661F\u788E\u7247")),1)]),t("div",fo,s(I.value.diamond_amount||"??")+" DTH \u6216 "+s(I.value.coin_amount||"??")+" MDX ",1),r.value.image?(o(),c("div",po,[bo,t("span",yo,"x"+s(r.value.starRate&&u[r.value.starRate+1]),1),$o])):(o(),c("div",go,s(a(d)("\u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u66F4\u9AD8\u7684\u5C5E\u6027\u6210\u957F\u500D\u7387")),1))]),r.value.starRate==5?(o(),c("div",Fo,s(a(d)("\u6B64\u82F1\u96C4\u5DF2\u662F\u6EE1\u661F\u82F1\u96C4")),1)):C("",!0)]),r.value.image?(o(),c("div",Do,[y(tt,{class:"pc-active",data:B.value},null,8,["data"]),y(Mt,{class:"phone-active",style:{width:"100%"},data:B.value},null,8,["data"])])):(o(),c("div",Co,[t("div",ko,[t("img",{src:`${a(_s)}/img/upStar.png`},null,8,xo)])]))]),t("div",So,[t("div",wo,[t("div",Eo,[Bo,t("span",Ao,s(r.value.starRate+1||"??"),1),Io]),t("div",To,[Ho,t("span",Ro,s(I.value.fragment_amount||"??")+" "+s(a(d)("\u5347\u661F\u788E\u7247")),1)]),t("div",No,[t("span",Mo,s(I.value.diamond_amount||"??")+" DTH ",1),Lo,t("span",Uo,s(I.value.coin_amount||"??")+" MDX ",1)]),r.value.image?(o(),c("div",Vo,Wo)):(o(),c("div",Po,s(a(d)("\u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u66F4\u9AD8\u7684\u5C5E\u6027\u6210\u957F\u500D\u7387")),1))]),r.value.starRate==5?(o(),c("div",qo,s(a(d)("\u6B64\u82F1\u96C4\u5DF2\u662F\u6EE1\u661F\u82F1\u96C4")),1)):C("",!0),t("div",Go,[a(Jt)?(o(),g(D,{key:0,onClick:z},{default:f(()=>[p(s(a(d)("\u6388\u6743")),1)]),_:1})):C("",!0),a(Qt)?(o(),g(D,{key:1,onClick:ot},{default:f(()=>[p(s(a(d)("\u5347\u661F")),1)]),_:1})):C("",!0),a(Zt)?(o(),g(D,{key:2,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(a(d)("\u5347\u661F")),1)]),_:1})):C("",!0),a(Kt)?(o(),g(D,{key:3},{default:f(()=>[t("div",Jo,[y(_t),t("div",Ko,s(a(d)("\u6388\u6743\u4E2D"))+"...",1)])]),_:1})):C("",!0),a(jt)?(o(),g(D,{key:4,style:{cursor:"not-allowed"}},{default:f(()=>[t("div",Zo,[y(_t),t("div",jo,s(a(d)("\u5347\u661F\u4E2D"))+"...",1)])]),_:1})):C("",!0)])])]),t("div",Qo,[t("div",Yo,[t("div",{style:{cursor:"pointer"},onClick:j},s(a(d)("\u5168\u90E8")),1),t("div",tl,[(o(!0),c(H,null,N(h.value,E=>(o(),c("div",{class:"star-icon",key:E,onClick:M=>P(E)},al,8,sl))),128)),(o(!0),c(H,null,N(5-h.value,E=>(o(),c("div",{class:"star-icon un-active",key:E,onClick:M=>P(E+h.value)},nl,8,ol))),128))])]),w.value?(o(),g(Cs,{key:0})):(o(),c("div",ul,[v.value.length?(o(),c("div",cl,[(o(!0),c(H,null,N(v.value,E=>(o(),g(tt,{class:st([E.token_id==r.value.token_id?"active-class":"","card"]),data:E,onClick:M=>U(E)},{default:f(()=>[ut(t("div",il,null,512),[[ct,E.token_id==r.value.token_id]])]),_:2},1032,["class","data","onClick"]))),256)),dl,rl,vl,_l])):(o(),g(Vt,{key:1},{default:f(()=>[p(s(a(d)("\u4F60\u8FD8\u6CA1\u6709\u4EFB\u4F55\u82F1\u96C4\uFF01")),1)]),_:1}))])),q.value&&F.value?(o(),g(ks,{key:2})):C("",!0)]),ut(t("div",null,[y(_a,{list:v.value,onStarClick:P,onSelectAll:j,onClose:A,onConfirm:dt},null,8,["list"])],512),[[ct,b.value&&R.value]]),ut(t("div",null,[y(Ge,{data:r.value,config:I.value,onClose:ot,onUpdateStar:Tt},null,8,["data","config"])],512),[[ct,!b.value&&W.value]]),ut(t("div",null,[y(Qa,{data:r.value,config:I.value,onClose:ot,onUpdateStar:Tt},null,8,["data","config"])],512),[[ct,b.value&&W.value]]),y(Qe,{data:B.value,show:lt.value,onClose:gt},null,8,["data","show"])]),y(us,{show:Q.value,title:bt.value,desc:vt.value,type:yt.value,onClose:x[0]||(x[0]=E=>Q.value=!1),onDescClick:ft},null,8,["show","title","desc","type"])])],64))}});var Cn=K(hl,[["__scopeId","data-v-23f03b2e"]]);export{Cn as default};
