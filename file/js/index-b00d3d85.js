import{N as Qt,H as Ot}from"./Header-c0ba6c73.js";import{a as vt,T as It}from"./Tabs-fec5c148.js";import{F as Vt}from"./Footer-cdaa9689.js";import{g as dt,O as Zt,P as Jt,E as Gt,Q as Kt}from"./getAssetsFile-9c9ffaf3.js";import{u as st,T as Xt,b as Yt,B as M,X as te,_ as X,L as at,F as ht,M as Dt,J as ee,a as _t,Y as $t}from"./index-f2ab0033.js";import{s as gt}from"./pinia-117a262d.js";import{u as Y}from"./vue-i18n-e0b4ebde.js";import{a9 as tt,r as o,ap as yt,aZ as ut,$ as S,a0 as t,K as s,D as a,_ as H,Z as C,b1 as g,O as V,aF as K,az as n,a6 as Q,aC as lt,aA as nt,w as ft,a7 as E,J as ae,H as oe,b3 as Ht,bn as Wt,a4 as se,au as Tt,f as ue,aq as le,aB as ne}from"./@vue-4a3654e3.js";import{B as Mt}from"./Border-16110d38.js";import{E as Pt,L as ie}from"./Loading-d3c78180.js";import{c as ot,g as Lt}from"./public-dcfc16e7.js";import{b as Nt,F as ce}from"./index-fb104491.js";import{i as re,a as de,j as ve}from"./index-a39be7cb.js";import{a as pt,d as _e}from"./format-f8821988.js";import{E as bt}from"./EasyButton-dd5a40f7.js";import{g as pe,c as fe,d as he}from"./GoldCoin-5f9fc6b0.js";import"./vue-router-9c8b6c7f.js";/* empty css                                                         */import"./@metamask-5fe78728.js";import"./@ethersproject-af74bb15.js";import"./js-sha3-1704859c.js";import"./hash.js-adcfb37a.js";import"./minimalistic-assert-770ac730.js";import"./inherits-878ccdf9.js";import"./bech32-20d6ea16.js";import"./@walletconnect-a7c9cb01.js";import"./is-typedarray-816496c7.js";import"./query-string-863c9c8a.js";import"./strict-uri-encode-39743d5a.js";import"./decode-uri-component-96b74898.js";import"./split-on-first-dea6fdb0.js";import"./typedarray-to-buffer-512de52f.js";import"./detect-browser-84fc1d8c.js";import"./qrcode-f7c04bee.js";import"./isarray-0a73c961.js";import"./buffer-8016aac3.js";import"./base64-js-c17a52db.js";import"./ieee754-480627a8.js";import"./dijkstrajs-322a599c.js";import"./copy-to-clipboard-53658741.js";import"./toggle-selection-dd807a76.js";import"./preact-c2ca5e76.js";import"./process-85dbfe57.js";import"./vue-demi-7aca303d.js";import"./@intlify-79ae61b4.js";import"./vue-896067e7.js";/* empty css                                                            */import"./lottie-web-5da13280.js";import"./axios-5aeb6a83.js";import"./qs-a1059fb7.js";import"./side-channel-0320a11a.js";import"./get-intrinsic-376f1f3c.js";import"./has-symbols-eb4acc8a.js";import"./function-bind-3c0fdd0c.js";import"./has-6f12dd3c.js";import"./call-bind-9097bd02.js";import"./object-inspect-39034d5e.js";import"./dayjs-b5f1d6b3.js";import"./isMobile-0cce36cb.js";/* empty css                                                               */const qt=e=>(lt("data-v-a003d236"),e=e(),nt(),e),ge={class:"field-card-container"},ye={class:"pic-box"},me=["src"],ke={class:"working"},we=qt(()=>t("img",{src:Zt},null,-1)),Fe={key:0,class:"working-text"},Ee={class:"scence"},Ce={class:"attr-list"},De={class:"attr-item align-left"},Ae={class:"title"},Be={class:"answer"},$e={class:"attr-item"},be={class:"title"},xe={class:"answer"},Se={class:"attr-item align-right"},Ie={class:"title"},He={class:"answer"},We={class:"flex"},Te={class:"icon"},Me=qt(()=>t("img",{src:Jt},null,-1)),Pe=[Me],Le=tt({__name:"FieldCard",props:{path:{default:dt("pc/work/sky.png")},config:{default:()=>({})},state:{type:Boolean,default:!1},workIng:{type:Boolean,default:!1}},emits:["working"],setup(e,{emit:i}){const{t:c}=Y(),u=()=>{i("working")},d=st(),{loginState:h}=gt(d),y=()=>{d.setConnectWalletShow(!0)},v=o(!1),f=o(!1);yt(async()=>{d.loginState&&A()});const A=async()=>{await Xt()==Yt?v.value=!0:v.value=!1};ut(()=>{f.value=h.value,h.value&&A()});const D=async()=>{await te()?v.value=!0:v.value=!1};return(b,x)=>(n(),S("div",ge,[t("div",ye,[t("img",{src:e.path},null,8,me),t("div",ke,[we,e.workIng?(n(),S("div",Fe,s(a(c)("\u5DE5\u4F5C\u4E2D")),1)):H("",!0)]),t("div",Ee,s(a(c)(e.config.name)),1)]),f.value&&v.value&&e.state?(n(),C(M,{key:0,style:{"justify-content":"center"},onClick:u},{default:g(()=>[Q(s(a(c)("\u5DE5\u4F5C")),1)]),_:1})):H("",!0),f.value?H("",!0):(n(),C(M,{key:1,style:{"justify-content":"center"},onClick:y},{default:g(()=>[Q(s(a(c)("\u8FDE\u63A5\u94B1\u5305")),1)]),_:1})),f.value&&!v.value&&!e.state?(n(),C(M,{key:2,"current-type":"err",style:{"justify-content":"center",color:"#fff"},onClick:D},{default:g(()=>[Q(s(a(c)("\u5207\u6362\u4E3ABSC\u7F51\u7EDC")),1)]),_:1})):H("",!0),f.value&&v.value&&!e.state?(n(),C(M,{key:3,active:"","current-type":"disabled",style:{"justify-content":"center",color:"#676C73"}},{default:g(()=>[Q(s(a(c)("\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684\u82F1\u96C4")),1)]),_:1})):H("",!0),t("div",Ce,[t("div",De,[t("div",Ae,s(a(c)(e.config.text)),1),t("div",Be,s(a(c)(e.config.threshold)),1)]),t("div",$e,[t("div",be,s(a(c)("\u5EFA\u8BAE")),1),t("div",xe,s(e.config.proposal),1)]),t("div",Se,[t("div",Ie,s(a(c)("\u5956\u52B1")),1),t("div",He,[t("div",We,[(n(!0),S(V,null,K(e.config.reward,q=>(n(),S("div",Te,Pe))),256))])])])])]))}});var Et=X(Le,[["__scopeId","data-v-a003d236"]]);const Rt=async()=>await Lt(ot.nft.address,ot.nft.abi),Ne=async()=>await(await Rt()).setApprovalForAll(ot.stakingNft.address,!0),qe=async e=>await(await Rt()).isApprovedForAll(e,ot.stakingNft.address),Z=async()=>await Lt(ot.stakingNft.address,ot.stakingNft.abi),Re=async e=>(await Z()).poolInfo(e),Ue=async e=>await(await Z()).tokenInfo(e),ze=async e=>(await Z()).getUserDepositTokenID(e),je=async e=>await(await Z()).clearfatigueValues(e),Qe=async(e,i,c)=>await(await Z()).deposit(e,i,c),Oe=async e=>await(await Z()).withdraw(e),Ve=async e=>await(await Z()).withdrawEarn(e),Ze=async e=>await(await Z()).getClearCoin(e),Je=async()=>await(await Z()).getCurrentMintRate(),Ge=async e=>await(await Z()).getWorkStatus(e),Ke=async e=>await(await Z()).pending(e),Xe=async e=>await(await Z()).getFatigue(e);const Ye=e=>(lt("data-v-1b2185de"),e=e(),nt(),e),ta={class:"content"},ea={class:"hero-select"},aa={class:"view-win"},oa={class:"scroll-list"},sa=["onClick"],ua={key:0,class:"hero-win"},la={class:"hero-list"},na=["onClick"],ia={class:"pic-container"},ca={class:"item-info"},ra={class:"base-flex"},da={class:"base-flex"},va={class:"base-flex"},_a={class:"star-icon"},pa=Ye(()=>t("img",{src:Gt},null,-1)),fa=[pa],ha={class:"select-active"},ga={class:"handler"},ya={class:"custom-btn"},ma={class:"btn-text"},ka={class:"custom-btn"},wa={class:"btn-text"},Fa=tt({__name:"SelectHeroDialog",props:{list:{default:()=>[]},selectHeroDialogShow:{type:Boolean,default:!1},poolId:{default:0},info:{default:()=>({})}},emits:["close","confirmClose","heroTypeSelect","onWork","getWork"],setup(e,{emit:i}){const c=e,{t:u}=Y(),d=st(),{address:h}=gt(d);let y=[{id:0,type:"all",text:"\u5168\u90E8"},{id:1,type:"Warrior",text:"\u6218\u58EB"},{id:2,type:"Assassin",text:"\u523A\u5BA2"},{id:3,type:"Archer",text:"\u5C04\u624B"},{id:4,type:"Mage",text:"\u6CD5\u5E08"},{id:5,type:"Support",text:"\u8F85\u52A9"}];const v=()=>{D.value=[],i("close")},f=o(0),A=m=>{f.value=m.id,i("heroTypeSelect",m.type)},D=o([]),b=m=>{let W=D.value.indexOf(m.token_id);W==-1?D.value.push(m.token_id):D.value.splice(W,1)},x=o(!1),q=async()=>{try{x.value=!0;const m={staking_data:[],pool_id:c.poolId};D.value.map(_=>{let U=0,G={userAddress:"",tokenId:0,attackPower:0,mana:0,agility:0,totalAttributes:0};c.list.map(z=>{if(_==z.token_id){for(let r in z.attributes)U+=z.attributes[r];G={userAddress:d.address,tokenId:z.token_id,attackPower:z.attributes.attack,mana:z.attributes.magic,agility:z.attributes.agile,totalAttributes:U}}}),m.staking_data.push(G)});const W=await re(m);if(W.data){let _=await Qe(m.staking_data,c.poolId,W.data);_.from?(await _.wait(2),x.value=!1,i("onWork",!0)):(x.value=!1,i("onWork",!1))}}catch{x.value=!1,i("onWork",!1)}},R=o(!1),p=o(""),O=o(""),T=o("success"),I=o(!1),L=async()=>{try{I.value=!0;let m=await Ne();m.from&&(await m.wait(1),p.value="\u6388\u6743\u6210\u529F",O.value=m.hash,T.value="success",I.value=!1,P())}catch(m){p.value="\u6388\u6743\u5931\u8D25",O.value="\u7528\u6237\u53D6\u6D88\u4E86\u6388\u6743",T.value="error",I.value=!1,console.log("\u6388\u6743\u5931\u8D25",m)}R.value=!0},et=()=>{window.open(`${ee}${O.value}`)};ft(R,m=>{setTimeout(()=>{m&&(R.value=!1)},2e3)});const J=o(!1),P=async()=>{if(h.value.length){const m=await qe(h.value);J.value=m}};yt(()=>{P()});const N=o({});return ut(()=>{const m={},W=c.list;c.info.poolId==0||c.info.poolId==4?W.map(_=>{if(!m[_.token_id]){let U=0;for(let G in _.attributes)U+=_.attributes[G];m[_.token_id]={text:"\u603B\u5C5E\u6027",value:U}}}):W.map(_=>{m[_.token_id]||(m[_.token_id]={text:c.info.attr,value:_.attributes[c.info.attr]})}),N.value=m}),(m,W)=>(n(),S(V,null,[E(ht,{show:"",title:a(u)("\u9009\u62E9\u82F1\u96C4"),onClose:v},{default:g(()=>[t("div",ta,[t("div",ea,[t("div",aa,[t("div",oa,[(n(!0),S(V,null,K(a(y),_=>(n(),S("span",{class:"item-type",key:_.id,style:ae({color:f.value==_.id?"#E1C392":""}),onClick:U=>A(_)},s(a(u)(_.text)),13,sa))),128))])]),H("",!0)]),e.list.length?(n(),S("div",ua,[t("div",la,[(n(!0),S(V,null,K(e.list,_=>(n(),S("div",{class:oe(["hero-item",D.value.indexOf(_.token_id)!=-1?"select-hero":""]),key:_.token_id,onClick:U=>b(_)},[t("div",ia,[E(Mt,{img:_.image,"rarity-img":a(Nt)[_.rarity]},null,8,["img","rarity-img"])]),t("div",ca,[t("div",ra,[t("span",null,s(_.name),1),t("span",null,s(N.value[_.token_id].text),1)]),t("div",da,[t("div",va,[(n(!0),S(V,null,K(_.starRate,U=>(n(),S("div",_a,fa))),256))]),t("span",null,s(N.value[_.token_id].value),1)])]),Ht(t("div",ha,null,512),[[Wt,D.value.indexOf(_.token_id)!=-1]])],10,na))),128))])])):(n(),C(Pt,{key:1},{default:g(()=>[Q(s(a(u)("\u60A8\u8FD8\u6CA1\u6709\u53EF\u5DE5\u4F5C\u7684\u82F1\u96C4"))+"\uFF01",1)]),_:1}))]),t("div",ga,[!J.value&&!I.value?(n(),C(M,{key:0,onClick:L},{default:g(()=>[t("div",null,s(a(u)("\u6388\u6743")),1)]),_:1})):H("",!0),I.value?(n(),C(M,{key:1,active:""},{default:g(()=>[t("div",ya,[E(at),t("div",ma,s(a(u)("\u6388\u6743\u4E2D"))+"...",1)])]),_:1})):H("",!0),!x.value&&J.value&&D.value.length?(n(),C(M,{key:2,onClick:q},{default:g(()=>[t("div",null,s(a(u)("\u5F00\u59CB\u5DE5\u4F5C")),1)]),_:1})):H("",!0),J.value&&!D.value.length&&!x.value?(n(),C(M,{key:3,active:"","current-type":"disabled",class:"disabled-btn"},{default:g(()=>[t("div",null,s(a(u)("\u5F00\u59CB\u5DE5\u4F5C")),1)]),_:1})):H("",!0),x.value?(n(),C(M,{key:4,active:""},{default:g(()=>[t("div",ka,[E(at),t("div",wa,s(a(u)("\u786E\u8BA4\u4E2D"))+"...",1)])]),_:1})):H("",!0)])]),_:1},8,["title"]),E(Dt,{title:p.value,desc:O.value,show:R.value,onClose:W[0]||(W[0]=_=>R.value=!1),onDescClick:et},null,8,["title","desc","show"])],64))}});var Ea=X(Fa,[["__scopeId","data-v-1b2185de"]]);const Ct=[{name:"\u6697\u5F71\u79D8\u5883",text:"\u95E8\u69DB",pic:`${_t}/img/sky.png`,poolId:0,threshold:"\u65E0\u95E8\u69DB",proposal:"\u6240\u6709\u82F1\u96C4",reward:1,type:1}],xt=[{name:"\u68A6\u5E7B\u79D8\u5883",text:"\u653B\u51FB",classes:"Archer",attr:"attack",pic:`${_t}/img/menghuan.png`,poolId:1,threshold:"60\u4EE5\u4E0A",value:60,proposal:"\u5C04\u624B",reward:2,type:1},{name:"\u68A6\u5E7B\u79D8\u5883",text:"\u9B54\u6CD5",attr:"magic",classes:"Mage",pic:`${_t}/img/menghuan.png`,poolId:2,threshold:"100\u4EE5\u4E0A",value:100,proposal:"\u6CD5\u5E08",reward:2,type:2},{name:"\u68A6\u5E7B\u79D8\u5883",text:"\u654F\u6377",attr:"agile",classes:"Assassin",pic:`${_t}/img/menghuan.png`,poolId:3,threshold:"80\u4EE5\u4E0A",value:80,proposal:"c\u523A\u5BA2",reward:2,type:3}],St=[{name:"\u52C7\u8005\u79D8\u5883",text:"\u603B\u5C5E\u6027",pic:`${_t}/img/yongzhe.png`,poolId:4,threshold:"258\u4EE5\u4E0A",proposal:"\u6240\u6709\u82F1\u96C4",reward:3,type:1}];const mt=e=>(lt("data-v-a49ca6be"),e=e(),nt(),e),Ca={class:"moyu"},Da={class:"moyu-desc"},Aa={class:"produce"},Ba=mt(()=>t("div",{class:"cloud"},null,-1)),$a={style:{color:"#fff"}},ba={class:"field-card-list base-list"},xa=mt(()=>t("span",null,null,-1)),Sa={class:"field-card-list base-list"},Ia=mt(()=>t("span",null,null,-1)),Ha={class:"field-card-list base-list"},Wa=mt(()=>t("span",null,null,-1)),Ta=tt({__name:"Moyu",setup(e){const{t:i}=Y(),c=st(),u=o(50),d=o(37),h=o("center"),y=()=>{const l=document.documentElement.clientWidth<750;u.value=l?37:50,d.value=l?232:260,h.value=l?"letf":"center"};y(),window.addEventListener("resize",y,!1);const v=async l=>{T(l)},f=l=>{T(l)},A=l=>{T(l)},D=o(!1),b=o([]),x=o([]),q=o(0),R=o({}),p={1:60,2:100,3:80},O={1:1,2:2,3:3},T=l=>{q.value=l.poolId,R.value=l,l.poolId==0?b.value=W.value:l.poolId==O[l.poolId]?(b.value=[],W.value.map(k=>{k.classes==l.classes&&k.attributes[l.attr]>p[l.poolId]&&b.value.push(k)})):(b.value=[],W.value.map(k=>{let w=0;for(let j in k.attributes)w+=k.attributes[j];w>258&&b.value.push(k)})),b.value.length&&(x.value=[...b.value]),D.value=!0},I=o(""),L=o(""),et=o(!1),J=o(!1),P=o("success"),N=l=>{et.value=l,D.value=!1,l?(P.value="success",I.value="\u8D28\u62BC\u6210\u529F",L.value="\u4F60\u7684\u82F1\u96C4\u5DF2\u7ECF\u5F00\u59CB\u4E3A\u60A8\u8D5A\u53D6\u6536\u76CA",setTimeout(()=>{Ft(),_(),Bt()})):(P.value="error",I.value="\u8D28\u62BC\u5931\u8D25",L.value="\u4F60\u7684\u82F1\u96C4\u8D28\u62BC\u5931\u8D25"),J.value=!0};ft(J,l=>{setTimeout(()=>{l&&(J.value=!1)},2e3)});const m=l=>{x.value.length&&(b.value=[],l=="all"?b.value=[...x.value]:x.value.map(k=>{k.classes==l&&b.value.push(k)}))},W=o([]),_=async()=>{try{if(c.loginState){const l=await de({account:c.address});l.length&&(W.value=l)}}catch(l){console.log("\u672A\u77E5\u9519\u8BEF",l)}},U=o([]),G=()=>{const l=[];Ct.map(k=>{let w=!1;k.type==1&&W.value.length&&(w=!0,l.push(w))}),U.value=l},z=o([]),r=()=>{const l=[];xt.map(k=>{let w=!1;k.poolId==O[k.poolId]&&W.value.map(j=>{j.classes==k.classes&&j.attributes[k.attr]>p[k.poolId]&&(w=!0)}),l.push(w)}),z.value=l},F=o([]),B=()=>{const l=[];St.map(k=>{if(k.type==1){let w=!1;W.value.map(j=>{let rt=0;for(let jt in j.attributes)rt+=j.attributes[jt];rt>p[3]&&(w=!0,l.push(w))})}}),F.value=l},$=o(Ct),it=async()=>{try{if(c.loginState){const l={addition:"",perBlock:0,threshold:"",level:""},k=await Re(Ct[0].poolId);k.addition&&(l.addition=k.addition.toString(),l.perBlock=pt(k.perBlock.toString()),l.threshold=k.threshold.toString(),l.level=k.level.toString(),l.threshold=="0"&&($.value[0].threshold="\u65E0\u95E8\u69DB",$.value[0].proposal="\u6240\u6709\u82F1\u96C4"))}}catch(l){console.log("\u610F\u6599\u4E4B\u5916",l)}},wt=o(0),Ut=async()=>{if(c.loginState){const l=await Je();wt.value=l.toString()/100}},ct=o({}),Bt=async()=>{try{if(c.loginState){const l={};(await Ge(c.address)).map(w=>{l[w.pid.toString()]=w.state}),ct.value=l}}catch(l){console.log("\u62A5\u9519\u4E86",l)}},Ft=async()=>{await _(),G(),r(),B(),Ut(),Bt(),it()},{loginState:zt}=gt(c);return ut(()=>{zt.value?Ft():(ct.value={},wt.value=0,F.value=[],z.value=[],U.value=[],W.value=[],x.value=[],b.value=[])}),yt(()=>{Ft()}),(l,k)=>(n(),S(V,null,[t("div",Ca,[t("div",Da,[t("div",Aa,[Ba,t("span",null,s(a(i)("\u4EA7\u51FA\u7387"))+"\uFF1A",1),t("span",$a,s(wt.value)+" %",1)]),H("",!0)]),E(It,{class:"tab-change",defaultTabIndex:"1",align:"between",border:!1,width:d.value},se({default:g(()=>[E(vt,{tab:a(i)("\u521D\u7EA7"),key:"1"},{default:g(()=>[t("div",ba,[(n(!0),S(V,null,K($.value,(w,j)=>(n(),C(Et,{path:w.pic,state:U.value[j],workIng:ct.value[w.poolId],config:w,onWorking:rt=>v(w)},null,8,["path","state","workIng","config","onWorking"]))),256)),xa])]),_:1},8,["tab"]),E(vt,{tab:a(i)("\u8FDB\u9636"),key:"2"},{default:g(()=>[t("div",Sa,[(n(!0),S(V,null,K(a(xt),(w,j)=>(n(),C(Et,{path:w.pic,config:w,workIng:ct.value[w.poolId],state:z.value[j],onWorking:rt=>f(w)},null,8,["path","config","workIng","state","onWorking"]))),256)),Ia])]),_:1},8,["tab"]),E(vt,{tab:a(i)("\u5C01\u795E"),key:"3"},{default:g(()=>[t("div",Ha,[(n(!0),S(V,null,K(a(St),(w,j)=>(n(),C(Et,{path:w.pic,config:w,workIng:ct.value[w.poolId],state:F.value[j],onWorking:rt=>A(w)},null,8,["path","config","workIng","state","onWorking"]))),256)),Wa])]),_:1},8,["tab"])]),_:2},[void 0]),1032,["width"])]),D.value?(n(),C(Ea,{key:0,list:b.value,poolId:q.value,info:R.value,onClose:k[0]||(k[0]=w=>D.value=!1),onHeroTypeSelect:m,onOnWork:N},null,8,["list","poolId","info"])):H("",!0),E(Dt,{show:J.value,title:I.value,desc:L.value,type:P.value},null,8,["show","title","desc","type"])],64))}});var Ma=X(Ta,[["__scopeId","data-v-a49ca6be"]]);const kt=e=>(lt("data-v-4f5170e6"),e=e(),nt(),e),Pa={class:"hero-card-container"},La={class:"pic-container"},Na={class:"hero-info-container"},qa={class:"block-top"},Ra={class:"hero-name"},Ua={class:"base-place-style"},za={class:"block-center"},ja={class:"info-item one"},Qa={class:"info-item-left"},Oa={style:{"padding-right":"4px"}},Va={class:"info-item-right"},Za={class:"value"},Ja={class:"info-item two"},Ga={class:"info-item-left"},Ka={style:{"padding-right":"4px"}},Xa=kt(()=>t("div",null,null,-1)),Ya={class:"info-item-right"},to={class:"value"},eo={class:"center-icon two-hover"},ao={class:"base-icon"},oo=["src"],so={class:"item-two-hover bubble"},uo={class:"info-item thr"},lo={class:"info-item-left"},no={style:{"padding-right":"4px"}},io={class:"center-icon thr-hover"},co={class:"base-icon"},ro=["src"],vo={class:"item-thr-hover bubble"},_o={class:"info-item-right"},po={class:"value"},fo={class:"center-icon"},ho={class:"info-item four"},go={class:"info-item-left"},yo={style:{"padding-right":"4px"}},mo=kt(()=>t("div",null,null,-1)),ko={class:"info-item-right",style:{display:"block"}},wo={class:"mdx-flex"},Fo=kt(()=>t("div",{class:"mdx"},[t("img",{src:Kt})],-1)),Eo={class:"value fw-en",style:{color:"#E1C392"}},Co=kt(()=>t("div",{class:"equal"}," $12.5 ",-1)),Do={class:"block-bottom"},Ao=tt({__name:"HeroCard",props:{data:{default:()=>({})},map:{default:()=>({})},poolMapping:{default:()=>({})},block:null,zy:{default:0}},emits:["quitWork","pickUp","extractReward"],setup(e,{emit:i}){const c=e,{t:u}=Y(),d=[{id:1,text:u("\u5E73\u5747\u6BCF\u533A\u5757\u6536\u76CA(DHT)"),mapping:"revenuePerBlock",icon:dt("pc/work/question-circle.png")},{id:2,text:u("\u5DE5\u4F5C\u65F6\u957F(\u533A\u5757)"),mapping:"workingTime",icon:dt("pc/work/question-circle.png")},{id:3,text:u("\u75B2\u52B3\u5EA6"),mapping:"fatigue",icon:dt("pc/work/refresh.png")},{id:4,text:u("\u6536\u76CA"),mapping:"profit",icon:dt("pc/work/logo.png")}];let h=T=>{if(T){let I=_e(T*3);return`${I.days} d ${I.hours} h ${I.minutes} m `}};const y=()=>{i("quitWork")},v=T=>{i("pickUp")},f=()=>{i("extractReward")},A=o(120),D=o(44),b=()=>{const T=document.documentElement.clientWidth<750;A.value=T?120:90,D.value=T?44:32};Tt(()=>{b(),window.addEventListener("resize",b,!1)});const x={0:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A0.05   * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",1:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.05+(\u7279\u5F81\u5C5E\u6027-\u5C5E\u6027\u95E8\u69DB)*0.025 ] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",2:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.05+(\u7279\u5F81\u5C5E\u6027-\u5C5E\u6027\u95E8\u69DB)*0.025 ] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",3:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.05+(\u7279\u5F81\u5C5E\u6027-\u5C5E\u6027\u95E8\u69DB)*0.025 ] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",4:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.02+\uFF08\u82F1\u96C4\u603B\u5C5E\u6027-258\uFF09x 0.002] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387"},q=o("\u68A6\u5E7B\u79D8\u5883"),R=o(""),p={0:"\u6697\u5F71\u79D8\u5883",1:"\u68A6\u5E7B\u79D8\u5883",2:"\u68A6\u5E7B\u79D8\u5883",3:"\u68A6\u5E7B\u79D8\u5883",4:"\u52C7\u8005\u79D8\u5883"},O=()=>{const T=c.data,L=c.poolMapping[T.token_id];q.value=p[L],R.value=x[L]};return ut(()=>{c.poolMapping&&O()}),(T,I)=>(n(),S("div",Pa,[Ht(t("div",La,[E(Mt,{border:!1,img:e.data.image,"rarity-img":a(Nt)[e.data.rarity]},null,8,["img","rarity-img"])],512),[[Wt,e.data.image]]),t("div",Na,[t("div",qa,[t("span",Ra,s(a(u)(e.data.name)),1),t("span",Ua,s(q.value),1)]),t("div",za,[t("div",ja,[t("div",Qa,[t("div",Oa,s(a(u)(d[0].text)),1)]),t("div",Va,[t("div",Za,s(e.map[e.data.token_id]&&e.map[e.data.token_id][d[0].mapping]),1),H("",!0)])]),t("div",Ja,[t("div",Ga,[t("div",Ka,s(a(u)(d[1].text)),1),Xa]),t("div",Ya,[t("div",to,s(e.map[e.data.token_id]&&e.map[e.data.token_id][d[1].mapping]),1),t("div",eo,[t("div",ao,[t("img",{src:d[1].icon},null,8,oo)]),t("div",so,s(a(u)("\u5DE5\u4F5C\u65F6\u957F\u533A\u5757\u9AD8\u5EA6"))+"\uFF1A"+s(e.map[e.data.token_id]&&a(h)(e.map[e.data.token_id][d[1].mapping])),1)])])]),t("div",uo,[t("div",lo,[t("div",no,s(a(u)(d[2].text)),1),t("div",io,[t("div",co,[t("img",{src:d[0].icon},null,8,ro)]),t("div",vo,s(a(u)("\u5DE5\u4F5C\u957F\u75B2\u52B3\u9AD8")),1)])]),t("div",_o,[t("div",po,s(e.map[e.data.token_id]&&e.map[e.data.token_id][d[2].mapping]),1),t("div",fo,[t("div",{class:"recovery",onClick:v},s(a(u)("\u6062\u590D")),1)])])]),t("div",ho,[t("div",go,[t("div",yo,s(a(u)(d[3].text)),1),mo]),t("div",ko,[t("div",wo,[Fo,t("div",Eo,s(e.map[e.data.token_id]&&e.map[e.data.token_id][d[3].mapping])+" DTH ",1)]),Co])])]),t("div",Do,[E(bt,{width:A.value,height:D.value,style:{"margin-right":"10px"},onClick:f},{default:g(()=>[Q(s(a(u)("\u63D0\u53D6\u5956\u52B1")),1)]),_:1},8,["width","height"]),E(bt,{width:A.value,height:D.value,type:"warning",onClick:y},{default:g(()=>[Q(s(a(u)("\u9000\u51FA\u5DE5\u4F5C")),1)]),_:1},8,["width","height"])])])]))}});var Bo=X(Ao,[["__scopeId","data-v-4f5170e6"]]);const $o=e=>(lt("data-v-17ff1cd4"),e=e(),nt(),e),bo={class:"content"},xo={class:"hero-info"},So={class:"hero-info-name base-color"},Io=$o(()=>t("span",{class:"hero-info-state-tips"},"\u5F53\u524D\u75B2\u52B3\u5EA6\uFF1A",-1)),Ho={class:"hero-info-state-value"},Wo={class:"recovery-tips"},To={class:"active-tips"},Mo={class:"table"},Po={class:"table-head"},Lo={class:"base-flex base-color"},No={class:"base-flex base-color"},qo={class:"table-content"},Ro={class:"base-flex"},Uo={class:"base-flex"},zo={class:"default-tips"},jo={class:"btn-text"},Qo={class:"btn-text"},Oo=tt({__name:"PickUpDialog",props:{show:{type:Boolean,default:!0},data:{default:()=>({})},map:{default:()=>({})}},emits:["close","payment"],setup(e,{emit:i}){const c=e,{t:u}=Y(),d=st(),h=()=>{i("close")},y=o(!1),v=async()=>{try{y.value=!0;let p=await je(c.data.token_id);p.from?(await p.wait(2),y.value=!1,i("payment",!0)):(y.value=!1,i("payment",!1))}catch(p){i("payment",!1),y.value=!1,console.log("\u672A\u77E5\u9519\u8BEF",p)}},f=o(0);ut(async()=>{if(c.data.token_id){let p=await Ze(c.data.token_id);f.value=Number(pt(p.toString()).toFixed(4)),R()}});const A=o(!1),D=o(!1),b=async()=>{try{D.value=!0;let p=await fe();p.from&&(await p.wait(1),D.value=!1,x())}catch(p){D.value=!1,console.log("\u672A\u77E5\u9519\u8BEF",p)}},x=async()=>{try{if(d.address){let p=await he(d.address);A.value=Number(p.toString())>0}}catch(p){console.log("\u672A\u77E5\u9519\u8BEF",p)}},q=o(0),R=async()=>{try{if(d.loginState){let p=await pe(d.address);q.value=pt(p)||0,console.log(q.value)}}catch(p){console.log("\u83B7\u53D6dth\u4F59\u989D\u5931\u8D25",p)}};return yt(()=>{x()}),(p,O)=>(n(),C(ht,{show:e.show,onClose:h,title:a(u)("\u6062\u590D\u4F53\u529B")},{default:g(()=>[t("div",bo,[t("div",xo,[t("span",So,s(e.data.name),1),Io,t("span",Ho,s(e.map[e.data.token_id]&&e.map[e.data.token_id].fatigue),1)]),t("div",Wo,[t("span",null,s(a(u)("\u6062\u590D\u4F53\u529B\u9700\u8981\u6D88\u8017\u7684\u4EE3\u5E01\u6570\u91CF"))+"\uFF0C"+s(a(u)("\u89C4\u5219")),1),t("span",To,s(a(u)("\u8BF7\u53C2\u8003")),1)]),t("div",Mo,[t("div",Po,[t("div",Lo,s(a(u)("\u75B2\u52B3\u5EA6")),1),t("div",No,s(a(u)("\u6D88\u8017\u4EE3\u5E01")),1)]),t("div",qo,[(n(!0),S(V,null,K(a(ce),(T,I)=>(n(),S("div",{class:"table-content-row",key:I},[t("div",Ro,s(T.fatigue),1),t("div",Uo,s(T.coin),1)]))),128))])]),t("div",zo,"* "+s(a(u)("\u9700\u8981\u5148\u6062\u590D\u82F1\u96C4\u7684\u4F53\u529B\u624D\u80FD\u9000\u51FA\u5DE5\u4F5C")),1),!A.value&&!D.value?(n(),C(M,{key:0,onClick:b},{default:g(()=>[Q(s(a(u)("\u6388\u6743")),1)]),_:1})):H("",!0),!A.value&&D.value?(n(),C(M,{key:1,style:{cursor:"not-allowed"},active:""},{default:g(()=>[E(at),t("div",jo,s(a(u)("\u6388\u6743\u4E2D"))+"...",1)]),_:1})):H("",!0),!y.value&&A.value&&q.value>f.value?(n(),C(M,{key:2,onClick:v},{default:g(()=>[Q(s(a(u)("\u652F\u4ED8"))+" "+s(f.value)+" DHT",1)]),_:1})):H("",!0),y.value&&A.value?(n(),C(M,{key:3,active:""},{default:g(()=>[E(at),t("div",Qo,s(a(u)("\u652F\u4ED8\u4E2D"))+"...",1)]),_:1})):H("",!0),A.value&&!y.value&&q.value<f.value?(n(),C(M,{key:4,active:"",style:{color:"#676c73",cursor:"not-allowed"},"current-type":"disabled"},{default:g(()=>[Q(s(a(u)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})):H("",!0)])]),_:1},8,["show","title"]))}});var Vo=X(Oo,[["__scopeId","data-v-17ff1cd4"]]);const Zo={class:"content"},Jo={class:"tips"},Go={style:{display:"flex","align-items":"center"}},Ko={style:{"margin-left":"5px",color:"#e1c392"}},Xo=tt({__name:"QuitWorkDialog",props:{show:{type:Boolean,default:!1},data:{default:()=>({})}},emits:["close","quitWork"],setup(e,{emit:i}){const c=e,{t:u}=Y(),d=()=>{i("close")};st();const h=o(!1),y=async()=>{try{h.value=!0;let v=await Oe([c.data.token_id.toString()]);v.from?(await v.wait(2),h.value=!1,i("quitWork",!0)):(h.value=!1,i("quitWork",!1))}catch(v){h.value=!1,i("quitWork",!1),console.log("\u672A\u77E5\u9519\u8BEF",v)}};return(v,f)=>(n(),C(ht,{title:a(u)("\u9000\u51FA\u5DE5\u4F5C"),show:e.show,onClose:d},{default:g(()=>[t("div",Zo,[t("div",Jo,s(a(u)("\u786E\u5B9A\u8981\u9000\u51FA\u5F53\u524D\u5DE5\u4F5C\u5417"))+"\uFF1F",1),h.value?H("",!0):(n(),C(M,{key:0,onClick:y},{default:g(()=>[Q(s(a(u)("\u9000\u51FA\u5DE5\u4F5C")),1)]),_:1})),h.value?(n(),C(M,{key:1,style:{cursor:"not-allowed"}},{default:g(()=>[t("div",Go,[E(at),t("div",Ko,s(a(u)("\u9000\u51FA\u4E2D")),1)])]),_:1})):H("",!0)])]),_:1},8,["title","show"]))}});var Yo=X(Xo,[["__scopeId","data-v-4096b03a"]]);const ts={class:"content"},es={class:"tips"},as={style:{display:"flex","align-items":"center"}},os={style:{"margin-left":"5px",color:"#e1c392"}},ss=tt({__name:"ExtractDialog",props:{show:{type:Boolean,default:!1},data:{default:()=>({})}},emits:["close","extract"],setup(e,{emit:i}){const c=e,{t:u}=Y(),d=()=>{i("close")},h=o(!1),y=async()=>{try{h.value=!0;let v=await Ve([c.data.token_id]);v.from?(await v.wait(1),h.value=!1,i("extract",!0)):(h.value=!1,i("extract",!1))}catch(v){h.value=!1,i("extract",!1),console.log("\u672A\u77E5\u9519\u8BEF",v)}};return(v,f)=>(n(),C(ht,{title:a(u)("\u63D0\u53D6\u5956\u52B1"),show:e.show,onClose:d},{default:g(()=>[t("div",ts,[t("div",es,s(a(u)("\u786E\u5B9A\u8981\u63D0\u53D6\u5F53\u524D\u5956\u52B1\u5417\uFF1F")),1),h.value?H("",!0):(n(),C(M,{key:0,onClick:y},{default:g(()=>[Q(s(a(u)("\u63D0\u53D6\u5956\u52B1")),1)]),_:1})),h.value?(n(),C(M,{key:1,style:{cursor:"not-allowed"}},{default:g(()=>[t("div",as,[E(at),t("div",os,s(a(u)("\u63D0\u53D6\u4E2D"))+"...",1)])]),_:1})):H("",!0)])]),_:1},8,["title","show"]))}});var us=X(ss,[["__scopeId","data-v-558c96d7"]]);const At=e=>(lt("data-v-36f7c57b"),e=e(),nt(),e),ls={class:"hero"},ns={class:"hero-card-list"},is={key:1,style:{width:"100%"}},cs={key:0,style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},rs=At(()=>t("div",{class:"card-item"},null,-1)),ds=At(()=>t("div",{class:"card-item"},null,-1)),vs=At(()=>t("div",{class:"card-item"},null,-1)),_s=tt({__name:"MyHero",setup(e){const{t:i}=Y(),c=st(),{loginState:u}=gt(c),d=o({}),h=o(!1),y=o(!1),v=o(""),f=o(""),A=o("success"),D=r=>{r?(v.value="\u9000\u51FA\u5DE5\u4F5C\u6210\u529F",f.value="\u5DF2\u5BF9\u8BE5\u82F1\u96C4\u9000\u51FA\u5DE5\u4F5C",A.value="success"):(v.value="\u9000\u51FA\u5DE5\u4F5C\u5931\u8D25",f.value="\u82F1\u96C4\u9000\u51FA\u5DE5\u4F5C\u5931\u8D25",A.value="error"),y.value=!0,h.value=!1,et()},b=r=>{d.value=r,h.value=!0},x=o(!1),q=r=>{d.value=r,x.value=!0},R=r=>{r?(v.value="\u6E05\u9664\u6210\u529F",f.value="\u5DF2\u6210\u529F\u6E05\u9664\u75B2\u52B3\u503C",A.value="success"):(v.value="\u6E05\u9664\u5931\u8D25",f.value="\u6E05\u9664\u75B2\u52B3\u503C\u5931\u8D25",A.value="error"),y.value=!0,x.value=!1,et()},p=o(!1),O=r=>{d.value=r,p.value=!0},T=r=>{r?(v.value="\u63D0\u53D6\u6210\u529F",f.value="\u5DF2\u6210\u529F\u63D0\u53D6\u5956\u52B1",A.value="success"):(v.value="\u63D0\u53D6\u5931\u8D25",f.value="\u5F53\u524D\u63D0\u53D6\u5956\u52B1\u5931\u8D25",A.value="error"),y.value=!0,p.value=!1,et()};ft(y,r=>{setTimeout(()=>{r&&(y.value=!1)},2e3)});const I=o(!1),L=o([]),et=async()=>{try{if(c.loginState){I.value=!0;const r=[],F=await ze(c.address);if(F.length){F.map($=>{r.push($.toString())});const B=await ve(r);B.length&&(L.value=B,I.value=!1,await m(),await U(),await W())}else I.value=!1}}catch(r){I.value=!1,console.log("\u672A\u77E5\u9519\u8BEF",r)}},J=ue("tabIndex");ut(()=>{J.value=="2"&&u.value?et():L.value=[]});const P=o({}),N=o([]),m=async()=>{try{const r={},F=[];L.value.map($=>{F.push($.token_id)}),N.value=F;let B=await Xe(F);for(let $=0;$<N.value.length;$++){const it={};it.fatigue=Number(B[$].fatigue.toString())/10+"%",it.startBlock=B[$].rewardBlock.toString(),r[N.value[$]]=it}P.value=r}catch(r){console.log("\u672A\u77E5\u9519\u8BEF",r)}},W=async()=>{try{if(u.value){const r=[];L.value.map($=>{r.push($.token_id)});const F=await $t(),B=await Ke(r);for(let $=0;$<N.value.length;$++)P.value[N.value[$]].profit=pt(B[$]),P.value[N.value[$]].revenuePerBlock=(pt(B[$])/(F-P.value[N.value[$]].startBlock)).toFixed(4)}}catch(r){console.log("\u672A\u77E5\u9519\u8BEF",r)}},_=o({}),U=async()=>{try{const r={};for(const F of L.value){let B=await Ue(F.token_id);r[F.token_id]=B.pid.toString()}_.value=r}catch(r){console.log("\u672A\u77E5\u9519\u8BEF",r)}},G=o(0),z=o(0);return Tt(async()=>{try{z.value=setInterval(async()=>{let r=await $t();G.value=r},3e3)}catch(r){console.log(r)}}),le(()=>{clearInterval(z.value)}),ft(G,r=>{if(r)for(let F=0;F<N.value.length;F++){const B=P.value[N.value[F]].startBlock;P.value[N.value[F]].workingTime=r-B}}),(r,F)=>(n(),S(V,null,[t("div",ls,[t("div",ns,[I.value?(n(),C(ie,{key:0})):(n(),S("div",is,[L.value.length?(n(),S("div",cs,[(n(!0),S(V,null,K(L.value,B=>(n(),C(Bo,{class:"card-item",key:B.token_id,data:B,map:P.value,poolMapping:_.value,onPickUp:$=>q(B),onQuitWork:$=>b(B),onExtractReward:$=>O(B),block:G.value,zy:P.value[B.token_id]?P.value[B.token_id].startBlock:0},null,8,["data","map","poolMapping","onPickUp","onQuitWork","onExtractReward","block","zy"]))),128)),rs,ds,vs])):(n(),C(Pt,{key:1},{default:g(()=>[Q(s(a(i)("\u4F60\u8FD8\u6CA1\u6709\u4EFB\u4F55\u82F1\u96C4")),1)]),_:1}))]))])]),E(Vo,{show:x.value,data:d.value,map:P.value,onClose:F[0]||(F[0]=B=>x.value=!1),onPayment:R},null,8,["show","data","map"]),E(Yo,{show:h.value,data:d.value,onClose:F[1]||(F[1]=B=>h.value=!1),onQuitWork:D},null,8,["show","data"]),E(us,{show:p.value,data:d.value,onClose:F[2]||(F[2]=B=>p.value=!1),onExtract:T},null,8,["show","data"]),E(Dt,{show:y.value,title:v.value,desc:f.value,type:A.value,onClose:F[3]||(F[3]=B=>y.value=!1)},null,8,["show","title","desc","type"])],64))}});var ps=X(_s,[["__scopeId","data-v-36f7c57b"]]);const fs={class:"work"},hs={class:"work-tabs"},gs=tt({__name:"index",setup(e){const{t:i}=Y();let c=o(0),u=o(0),d=o("center");const h=()=>{let f=document.documentElement.clientWidth<750;c.value=f?37:50,u.value=f?180:260,d.value=f?"left":"center"};h(),window.addEventListener("resize",h,!1);const y=o("1");ne("tabIndex",y);const v=({key:f})=>{y.value=f};return(f,A)=>(n(),S("div",fs,[E(Qt),E(Ot),t("div",hs,[E(It,{align:a(d),defaultTabIndex:"1",width:a(u),height:a(c),onOnchange:v},{default:g(()=>[E(vt,{tab:a(i)("\u9B54\u57DF"),key:"1"},{default:g(()=>[E(Ma)]),_:1},8,["tab"]),E(vt,{tab:a(i)("\u6211\u7684\u82F1\u96C4"),key:"2"},{default:g(()=>[E(ps)]),_:1},8,["tab"])]),_:1},8,["align","width","height"])]),t("div",null,[E(Vt)])]))}});var Cu=X(gs,[["__scopeId","data-v-3b9a0a94"]]);export{Cu as default};
