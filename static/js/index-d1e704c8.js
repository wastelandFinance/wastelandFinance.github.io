import{g as De,a4 as we,a5 as be}from"./getAssetsFile-cd9e36ca.js";import{N as Be,H as xe,F as Se}from"./Header-e5f98252.js";import{_ as Q,B as f,E as Ce,u as ke,A as I,M as Ee,W as Fe,I as Ne,g as Te,L as j}from"./index-0faa561c.js";import{B as Ie}from"./Border-0b13b5cb.js";import{u as Y}from"./vue-i18n-5b28fcda.js";import{a9 as ee,az as r,Z as g,b1 as d,a0 as e,a7 as _,D as a,a6 as v,K as s,r as o,ap as M,aZ as N,w as Me,h as b,$ as G,J,_ as p,aC as Ae,aA as He}from"./@vue-823c75d3.js";import{b as $e,c as Le,g as We}from"./Erc20-14787c1b.js";import{s as Pe}from"./pinia-d7eeac71.js";import{u as Ve}from"./vue-router-4d4637a0.js";import{e as O,a as U}from"./format-7642b802.js";import{g as Xe,c as q}from"./public-fdb8458e.js";import"./@metamask-0322580d.js";import"./@ethersproject-baa9d35e.js";import"./js-sha3-24137471.js";import"./hash.js-a20011ef.js";import"./minimalistic-assert-c1ce1705.js";import"./inherits-1fe83bc7.js";import"./bech32-9a81277b.js";import"./@walletconnect-6b5bf47d.js";import"./is-typedarray-4f40b03b.js";import"./query-string-2015e57d.js";import"./strict-uri-encode-ecbf5106.js";import"./decode-uri-component-fb3850ff.js";import"./split-on-first-6a113853.js";import"./typedarray-to-buffer-3049f596.js";import"./detect-browser-d6d27bfa.js";import"./qrcode-8475bf43.js";import"./isarray-dd297434.js";import"./buffer-42a74e2f.js";import"./base64-js-f5f6d31b.js";import"./ieee754-b34e253f.js";import"./dijkstrajs-5cebdf0c.js";import"./copy-to-clipboard-792b0d71.js";import"./toggle-selection-eefc0dc5.js";import"./preact-c6b9a0a0.js";import"./process-79043346.js";import"./vue-demi-5b9a0fa5.js";import"./@intlify-22bbbbdc.js";import"./vue-b8cbd5d3.js";import"./dayjs-3b7406d5.js";const ze={class:"content"},Ke={class:"card"},Re={class:"handler"},Ze=ee({__name:"Dialog",props:{show:{type:Boolean,default:!1}},emits:["close","navigateTo"],setup(c,{emit:u}){const{t:i}=Y(),h=()=>{u("close")},y=()=>{u("navigateTo")};return(S,V)=>(r(),g(Ce,{show:c.show,onClose:h,title:a(i)("\u8D2D\u4E70\u6210\u529F")},{default:d(()=>[e("div",ze,[e("div",Ke,[_(Ie,{mark:!1,img:a(De)("global/blindBxo.gif")},null,8,["img"])]),e("div",Re,[_(f,{onClick:y},{default:d(()=>[v(s(a(i)("\u5F00\u542F\u76F2\u76D2")),1)]),_:1}),e("div",{class:"tips",onClick:h},s(a(i)("\u6211\u77E5\u9053\u4E86")),1)])])]),_:1},8,["show","title"]))}});var je=Q(Ze,[["__scopeId","data-v-61a51de1"]]);const W=async()=>await Xe(q.buyMysteryBox.address,q.buyMysteryBox.abi),Ge=async c=>await(await W()).buyMysteryBox(c),Je=async()=>await(await W()).price(),Oe=async()=>await(await W()).startTime();const P=c=>(Ae("data-v-41645353"),c=c(),He(),c),Ue={class:"sale-container"},qe={class:"sale-box"},Qe={class:"title"},Ye={class:"fw-en"},et=P(()=>e("span",{class:"fw-en"},"OpenMeta",-1)),tt={class:"time"},at=P(()=>e("div",{class:"clock"},[e("img",{src:we})],-1)),st=P(()=>e("div",{class:"gift-box"},[e("img",{src:be})],-1)),ot={class:"count"},ut={class:"manghe"},lt={class:"computed"},nt={class:"total"},ct={class:"buying"},rt={class:"buying-text"},it={class:"buying"},vt={class:"buying-text"},dt={class:"footer"},_t=ee({__name:"index",setup(c){const{t:u}=Y(),i=ke(),{address:h,loginState:y,chainId:S,currentLang:V}=Pe(i);let A=o(!1);const te=()=>{A.value=!1};o(!1);const ae=async()=>{await Fe(),console.log("\u8FDE\u63A5bsc")},se=()=>{window.open("https://ht.mdex.co/#/swap?lang=zh-HK&inputCurrency=0x25d2e80cb6b86881fd7e07dd263fb79f4abe033c&outputCurrency=0xa71edc38d189767582c38a3145b5873052c3e47a")},oe=Ve(),ue=()=>{oe.push("/user?tab=blingBox")},n=o(1),le=()=>{n.value--,n.value<=1&&(n.value=1)},ne=()=>{n.value++,n.value>=5&&(n.value=5)},H=o(""),T=o(""),ce=async()=>{if(i.address&&S.value==I){let t=await Oe();if(t){T.value=t.toString();let m=new Date(Number(t.toString())).setHours(new Date(Number(t.toString())).getHours()+8),Z=i.currentLang=="en"?new Date(Number(t.toString())):new Date(m);H.value=O(Z)}}};M(async()=>{ce()}),N(()=>{let t=new Date(Number(T.value)).setHours(new Date(Number(T.value)).getHours()+8),m=i.currentLang=="en"?new Date(Number(T.value)):new Date(t);H.value=O(m)});const C=o(!1),k=o(""),B=o(""),E=o("success"),x=o(!1),re=async()=>{try{x.value=!0;let t=await $e();t.from&&(await t.wait(1),await X(),k.value="\u6388\u6743\u6210\u529F",B.value=t.hash,E.value="success",x.value=!1)}catch{k.value="\u6388\u6743\u5931\u8D25",B.value="\u7528\u6237\u65AD\u5F00\u6216\u53D6\u6D88\u4E86\u6388\u6743",E.value="error",x.value=!1,console.log("\u9500\u552E\u6388\u6743\u5931\u8D25")}},ie=()=>{window.open(`${Ne}${B.value}`)},D=o(!1),X=async()=>{const t=await Le(h.value);Number(t.toString())>0&&(D.value=!0)};M(()=>{l.value&&S.value==I&&X()});const ve=o(!1),de=async()=>{i.setConnectWalletShow(!0)},$=o(0),z=o(0),K=async()=>{try{if(h.value.length){const t=await Je(),m=await We(h.value);$.value=U(t.toString()),z.value=U(m.toString())}}catch(t){console.log("\u672A\u77E5\u9519\u8BEF",t)}};M(async()=>{K()});const l=o(!1);M(()=>{y.value?l.value=!0:l.value=y.value}),N(()=>{y.value?l.value=!0:l.value=y.value}),Me(y,t=>{t&&(l.value=!0)}),N(()=>{h.value.length&&(l.value=!0)});const F=o(!1),L=o(0);N(()=>{L.value=n.value*$.value,z.value>L.value?F.value=!0:F.value=!1});const w=o(!1),_e=async()=>{try{w.value=!0;let t=await Ge(n.value);t.from&&(await t.wait(2),await K(),w.value=!1,n.value=1,k.value="\u8D2D\u4E70\u6210\u529F",B.value=t.hash,E.value="success",A.value=!0)}catch{w.value=!1,k.value="\u8D2D\u4E70\u5931\u8D25",B.value="\u7528\u6237\u53D6\u6D88\u6216\u65AD\u5F00\u4E86\u8D2D\u4E70",E.value="error"}C.value=!0};N(()=>{C.value&&setTimeout(()=>{C.value=!1},2e3)});const me=b(()=>!l.value&&!ve.value),pe=b(()=>l.value&&F.value&&!w.value&&D.value),R=b(()=>l.value&&D.value&&!F.value),fe=b(()=>l.value&&D.value&&F.value&&w.value),ge=b(()=>l.value&&!D.value&&!x.value&&S.value==I),he=b(()=>l.value&&!D.value&&x.value),ye=b(()=>l.value&&!D.value&&!x.value&&S.value!==I);return(t,m)=>(r(),G("div",Ue,[_(Be),_(xe),e("div",qe,[e("header",null,[e("div",Qe,[e("div",null,[e("span",Ye,s(a(Te)),1),v(" "+s(a(u)("\u76F2\u76D2")),1)]),e("div",null,[et,v(" "+s(a(u)("\u9996\u53D1")),1)])]),e("div",tt,[at,e("span",null,s(H.value)+" (UTC+ "+s(a(V)=="en"?0:8)+")",1)])]),e("aside",null,[st,e("div",ot,[v(s($.value)+" MDX",1),e("span",ut,"/ "+s(a(u)("\u76F2\u76D2")),1)]),e("div",lt,[e("div",{class:"reduce base-style",style:J({cursor:n.value<=1||w.value?" not-allowed":""}),onClick:le},null,4),e("div",nt,s(n.value),1),e("div",{class:"plus base-style",style:J({cursor:n.value>=5||w.value?" not-allowed":""}),onClick:ne},null,4)])]),e("footer",null,[a(me)?(r(),g(f,{key:0,onClick:de},{default:d(()=>[v(s(a(u)("\u8FDE\u63A5\u94B1\u5305")),1)]),_:1})):p("",!0),a(ge)?(r(),g(f,{key:1,onClick:re},{default:d(()=>[v(s(a(u)("\u6388\u6743")),1)]),_:1})):p("",!0),a(pe)?(r(),g(f,{key:2,onClick:_e},{default:d(()=>[v(s(L.value)+" "+s(a(u)("MDX \u8D2D\u4E70")),1)]),_:1})):p("",!0),a(ye)?(r(),g(f,{key:3,"current-type":"err",style:{"justify-content":"center",color:"#fff"},onClick:ae},{default:d(()=>[v(s(a(u)("\u5207\u6362\u4E3ABSC\u7F51\u7EDC")),1)]),_:1})):p("",!0),a(R)?(r(),g(f,{key:4,active:"","current-type":"disabled",class:"disabled"},{default:d(()=>[v(s(a(u)("MDX\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})):p("",!0),a(fe)?(r(),g(f,{key:5,active:""},{default:d(()=>[e("div",ct,[_(j),e("div",rt,s(a(u)("\u8D2D\u4E70\u4E2D"))+"...",1)])]),_:1})):p("",!0),a(he)?(r(),g(f,{key:6,active:""},{default:d(()=>[e("div",it,[_(j),e("div",vt,s(a(u)("\u6388\u6743\u4E2D"))+"...",1)])]),_:1})):p("",!0),a(R)?(r(),G("div",{key:7,class:"to-buy",onClick:se},s(a(u)("\u53BB\u8D2D\u4E70MDX")),1)):p("",!0)])]),e("div",dt,[_(Se)]),_(je,{show:a(A),onClose:te,onNavigateTo:ue},null,8,["show"]),_(Ee,{show:C.value,type:E.value,title:k.value,desc:B.value,onClose:m[0]||(m[0]=Z=>C.value=!1),onDescClick:ie},null,8,["show","type","title","desc"])]))}});var ea=Q(_t,[["__scopeId","data-v-41645353"]]);export{ea as default};
