import{i as le}from"./isarray-dd297434.js";import{b as $e}from"./buffer-42a74e2f.js";import{d as Je}from"./dijkstrajs-5cebdf0c.js";var Q={},Oe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ae={},L={},xe=le;function Ve(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}v.TYPED_ARRAY_SUPPORT=Ve();var me=v.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function v(t,e,r){return!v.TYPED_ARRAY_SUPPORT&&!(this instanceof v)?new v(t,e,r):typeof t=="number"?Te(this,t):je(this,t,e,r)}v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&v[Symbol.species]===v&&Object.defineProperty(v,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function he(t){if(t>=me)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+me.toString(16)+" bytes");return t|0}function Ge(t){return t!==t}function F(t,e){var r;return v.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=v.prototype):(r=t,r===null&&(r=new v(e)),r.length=e),r}function Te(t,e){var r=F(t,e<0?0:he(e)|0);if(!v.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function Qe(t,e){var r=Pe(e)|0,n=F(t,r),i=n.write(e);return i!==r&&(n=n.slice(0,i)),n}function ie(t,e){for(var r=e.length<0?0:he(e.length)|0,n=F(t,r),i=0;i<r;i+=1)n[i]=e[i]&255;return n}function We(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;return r===void 0&&n===void 0?i=new Uint8Array(e):n===void 0?i=new Uint8Array(e,r):i=new Uint8Array(e,r,n),v.TYPED_ARRAY_SUPPORT?i.__proto__=v.prototype:i=ie(t,i),i}function qe(t,e){if(v.isBuffer(e)){var r=he(e.length)|0,n=F(t,r);return n.length===0||e.copy(n,0,0,r),n}if(e){if(typeof ArrayBuffer!="undefined"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Ge(e.length)?F(t,0):ie(t,e);if(e.type==="Buffer"&&Array.isArray(e.data))return ie(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Re(t,e){e=e||1/0;for(var r,n=t.length,i=null,a=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function Pe(t){if(v.isBuffer(t))return t.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;return e===0?0:Re(t).length}function Xe(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Ze(t,e,r,n){return Xe(Re(e,t.length-r),t,r,n)}function je(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer?We(t,e,r,n):typeof e=="string"?Qe(t,e):qe(t,e)}v.prototype.write=function(e,r,n){r===void 0?(n=this.length,r=0):n===void 0&&typeof r=="string"?(n=this.length,r=0):isFinite(r)&&(r=r|0,isFinite(n)?n=n|0:n=void 0);var i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");return Ze(this,e,r,n)};v.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(v.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=v.prototype;else{var a=r-e;i=new v(a,void 0);for(var o=0;o<a;++o)i[o]=this[o+e]}return i};v.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var a=i-n,o;if(this===e&&n<r&&r<i)for(o=a-1;o>=0;--o)e[o+r]=this[o+n];else if(a<1e3||!v.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),r);return a};v.prototype.fill=function(e,r,n){if(typeof e=="string"){if(typeof r=="string"?(r=0,n=this.length):typeof n=="string"&&(n=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{var o=v.isBuffer(e)?e:new v(e),f=o.length;for(a=0;a<n-r;++a)this[a+r]=o[a%f]}return this};v.concat=function(e,r){if(!xe(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return F(null,0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=Te(null,r),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!v.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i};v.byteLength=Pe;v.prototype._isBuffer=!0;v.isBuffer=function(e){return!!(e!=null&&e._isBuffer)};L.alloc=function(t){var e=new v(t);return e.fill(0),e};L.from=function(t){return new v(t)};var R={},se,et=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];R.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};R.getSymbolTotalCodewords=function(e){return et[e]};R.getBCHDigit=function(t){for(var e=0;t!==0;)e++,t>>>=1;return e};R.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');se=e};R.isKanjiModeEnabled=function(){return typeof se!="undefined"};R.toSJIS=function(e){return se(e)};var W={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");var n=r.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit!="undefined"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(W);function be(){this.buffer=[],this.length=0}be.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var tt=be,ye=L;function J(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=ye.alloc(t*t),this.reservedBit=ye.alloc(t*t)}J.prototype.set=function(t,e,r,n){var i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};J.prototype.get=function(t,e){return this.data[t*this.size+e]};J.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};J.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var rt=J,Me={};(function(t){var e=R.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];for(var i=Math.floor(n/7)+2,a=e(n),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,f=[a-7],u=1;u<i-1;u++)f[u]=f[u-1]-o;return f.push(6),f.reverse()},t.getPositions=function(n){for(var i=[],a=t.getRowColCoords(n),o=a.length,f=0;f<o;f++)for(var u=0;u<o;u++)f===0&&u===0||f===0&&u===o-1||f===o-1&&u===0||i.push([a[f],a[u]]);return i}})(Me);var Ie={},nt=R.getSymbolSize,we=7;Ie.getPositions=function(e){var r=nt(e);return[[0,0],[r-we,0],[0,r-we]]};var Ne={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){for(var a=i.size,o=0,f=0,u=0,l=null,h=null,p=0;p<a;p++){f=u=0,l=h=null;for(var w=0;w<a;w++){var E=i.get(p,w);E===l?f++:(f>=5&&(o+=e.N1+(f-5)),l=E,f=1),E=i.get(w,p),E===h?u++:(u>=5&&(o+=e.N1+(u-5)),h=E,u=1)}f>=5&&(o+=e.N1+(f-5)),u>=5&&(o+=e.N1+(u-5))}return o},t.getPenaltyN2=function(i){for(var a=i.size,o=0,f=0;f<a-1;f++)for(var u=0;u<a-1;u++){var l=i.get(f,u)+i.get(f,u+1)+i.get(f+1,u)+i.get(f+1,u+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){for(var a=i.size,o=0,f=0,u=0,l=0;l<a;l++){f=u=0;for(var h=0;h<a;h++)f=f<<1&2047|i.get(l,h),h>=10&&(f===1488||f===93)&&o++,u=u<<1&2047|i.get(h,l),h>=10&&(u===1488||u===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){for(var a=0,o=i.data.length,f=0;f<o;f++)a+=i.data[f];var u=Math.abs(Math.ceil(a*100/o/5)-10);return u*e.N4};function r(n,i,a){switch(n){case t.Patterns.PATTERN000:return(i+a)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return a%3===0;case t.Patterns.PATTERN011:return(i+a)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case t.Patterns.PATTERN101:return i*a%2+i*a%3===0;case t.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case t.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,a){for(var o=a.size,f=0;f<o;f++)for(var u=0;u<o;u++)a.isReserved(u,f)||a.xor(u,f,r(i,u,f))},t.getBestMask=function(i,a){for(var o=Object.keys(t.Patterns).length,f=0,u=1/0,l=0;l<o;l++){a(l),t.applyMask(l,i);var h=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),h<u&&(u=h,f=l)}return f}})(Ne);var q={},S=W,O=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],x=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];q.getBlocksCount=function(e,r){switch(r){case S.L:return O[(e-1)*4+0];case S.M:return O[(e-1)*4+1];case S.Q:return O[(e-1)*4+2];case S.H:return O[(e-1)*4+3];default:return}};q.getTotalCodewordsCount=function(e,r){switch(r){case S.L:return x[(e-1)*4+0];case S.M:return x[(e-1)*4+1];case S.Q:return x[(e-1)*4+2];case S.H:return x[(e-1)*4+3];default:return}};var Se={},X={},Le=L,K=Le.alloc(512),V=Le.alloc(256);(function(){for(var e=1,r=0;r<255;r++)K[r]=e,V[e]=r,e<<=1,e&256&&(e^=285);for(r=255;r<512;r++)K[r]=K[r-255]})();X.log=function(e){if(e<1)throw new Error("log("+e+")");return V[e]};X.exp=function(e){return K[e]};X.mul=function(e,r){return e===0||r===0?0:K[V[e]+V[r]]};(function(t){var e=L,r=X;t.mul=function(i,a){for(var o=e.alloc(i.length+a.length-1),f=0;f<i.length;f++)for(var u=0;u<a.length;u++)o[f+u]^=r.mul(i[f],a[u]);return o},t.mod=function(i,a){for(var o=e.from(i);o.length-a.length>=0;){for(var f=o[0],u=0;u<a.length;u++)o[u]^=r.mul(a[u],f);for(var l=0;l<o.length&&o[l]===0;)l++;o=o.slice(l)}return o},t.generateECPolynomial=function(i){for(var a=e.from([1]),o=0;o<i;o++)a=t.mul(a,[1,r.exp(o)]);return a}})(Se);var Ee=L,De=Se,it=$e.Buffer;function ge(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}ge.prototype.initialize=function(e){this.degree=e,this.genPoly=De.generateECPolynomial(this.degree)};ge.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var r=Ee.alloc(this.degree),n=it.concat([e,r],e.length+this.degree),i=De.mod(n,this.genPoly),a=this.degree-i.length;if(a>0){var o=Ee.alloc(this.degree);return i.copy(o,a),o}return i};var at=ge,_e={},D={},de={};de.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var M={},Fe="[0-9]+",ot="[A-Z $%*+\\-./:]+",$="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";$=$.replace(/u/g,"\\u");var ft="(?:(?![A-Z0-9 $%*+\\-./:]|"+$+`)(?:.|[\r
]))+`;M.KANJI=new RegExp($,"g");M.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");M.BYTE=new RegExp(ft,"g");M.NUMERIC=new RegExp(Fe,"g");M.ALPHANUMERIC=new RegExp(ot,"g");var ut=new RegExp("^"+$+"$"),lt=new RegExp("^"+Fe+"$"),ht=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");M.testKanji=function(e){return ut.test(e)};M.testNumeric=function(e){return lt.test(e)};M.testAlphanumeric=function(e){return ht.test(e)};(function(t){var e=de,r=M;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},t.getBestModeForData=function(a){return r.testNumeric(a)?t.NUMERIC:r.testAlphanumeric(a)?t.ALPHANUMERIC:r.testKanji(a)?t.KANJI:t.BYTE},t.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},t.isValid=function(a){return a&&a.bit&&a.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");var a=i.toLowerCase();switch(a){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(a,o){if(t.isValid(a))return a;try{return n(a)}catch{return o}}})(D);(function(t){var e=R,r=q,n=W,i=D,a=de,o=le,f=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,u=e.getBCHDigit(f);function l(E,c,m){for(var B=1;B<=40;B++)if(c<=t.getCapacity(B,m,E))return B}function h(E,c){return i.getCharCountIndicator(E,c)+4}function p(E,c){var m=0;return E.forEach(function(B){var g=h(B.mode,c);m+=g+B.getBitsLength()}),m}function w(E,c){for(var m=1;m<=40;m++){var B=p(E,m);if(B<=t.getCapacity(m,c,i.MIXED))return m}}t.from=function(c,m){return a.isValid(c)?parseInt(c,10):m},t.getCapacity=function(c,m,B){if(!a.isValid(c))throw new Error("Invalid QR Code version");typeof B=="undefined"&&(B=i.BYTE);var g=e.getSymbolTotalCodewords(c),y=r.getTotalCodewordsCount(c,m),d=(g-y)*8;if(B===i.MIXED)return d;var s=d-h(B,c);switch(B){case i.NUMERIC:return Math.floor(s/10*3);case i.ALPHANUMERIC:return Math.floor(s/11*2);case i.KANJI:return Math.floor(s/13);case i.BYTE:default:return Math.floor(s/8)}},t.getBestVersionForData=function(c,m){var B,g=n.from(m,n.M);if(o(c)){if(c.length>1)return w(c,g);if(c.length===0)return 1;B=c[0]}else B=c;return l(B.mode,B.getLength(),g)},t.getEncodedBits=function(c){if(!a.isValid(c)||c<7)throw new Error("Invalid QR Code version");for(var m=c<<12;e.getBCHDigit(m)-u>=0;)m^=f<<e.getBCHDigit(m)-u;return c<<12|m}})(_e);var Ue={},ae=R,Ye=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,st=1<<14|1<<12|1<<10|1<<4|1<<1,Be=ae.getBCHDigit(Ye);Ue.getEncodedBits=function(e,r){for(var n=e.bit<<3|r,i=n<<10;ae.getBCHDigit(i)-Be>=0;)i^=Ye<<ae.getBCHDigit(i)-Be;return(n<<10|i)^st};var ke={},gt=D;function U(t){this.mode=gt.NUMERIC,this.data=t.toString()}U.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};U.prototype.getLength=function(){return this.data.length};U.prototype.getBitsLength=function(){return U.getBitsLength(this.data.length)};U.prototype.write=function(e){var r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);var a=this.data.length-r;a>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,a*3+1))};var dt=U,ct=D,j=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Y(t){this.mode=ct.ALPHANUMERIC,this.data=t}Y.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Y.prototype.getLength=function(){return this.data.length};Y.prototype.getBitsLength=function(){return Y.getBitsLength(this.data.length)};Y.prototype.write=function(e){var r;for(r=0;r+2<=this.data.length;r+=2){var n=j.indexOf(this.data[r])*45;n+=j.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(j.indexOf(this.data[r]),6)};var vt=Y,mt=L,yt=D;function k(t){this.mode=yt.BYTE,this.data=mt.from(t)}k.getBitsLength=function(e){return e*8};k.prototype.getLength=function(){return this.data.length};k.prototype.getBitsLength=function(){return k.getBitsLength(this.data.length)};k.prototype.write=function(t){for(var e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var wt=k,Et=D,Bt=R;function z(t){this.mode=Et.KANJI,this.data=t}z.getBitsLength=function(e){return e*13};z.prototype.getLength=function(){return this.data.length};z.prototype.getBitsLength=function(){return z.getBitsLength(this.data.length)};z.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var r=Bt.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var pt=z;(function(t){var e=D,r=dt,n=vt,i=wt,a=pt,o=M,f=R,u=Je.exports;function l(g){return unescape(encodeURIComponent(g)).length}function h(g,y,d){for(var s=[],A;(A=g.exec(d))!==null;)s.push({data:A[0],index:A.index,mode:y,length:A[0].length});return s}function p(g){var y=h(o.NUMERIC,e.NUMERIC,g),d=h(o.ALPHANUMERIC,e.ALPHANUMERIC,g),s,A;f.isKanjiModeEnabled()?(s=h(o.BYTE,e.BYTE,g),A=h(o.KANJI,e.KANJI,g)):(s=h(o.BYTE_KANJI,e.BYTE,g),A=[]);var P=y.concat(d,s,A);return P.sort(function(C,T){return C.index-T.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function w(g,y){switch(y){case e.NUMERIC:return r.getBitsLength(g);case e.ALPHANUMERIC:return n.getBitsLength(g);case e.KANJI:return a.getBitsLength(g);case e.BYTE:return i.getBitsLength(g)}}function E(g){return g.reduce(function(y,d){var s=y.length-1>=0?y[y.length-1]:null;return s&&s.mode===d.mode?(y[y.length-1].data+=d.data,y):(y.push(d),y)},[])}function c(g){for(var y=[],d=0;d<g.length;d++){var s=g[d];switch(s.mode){case e.NUMERIC:y.push([s,{data:s.data,mode:e.ALPHANUMERIC,length:s.length},{data:s.data,mode:e.BYTE,length:s.length}]);break;case e.ALPHANUMERIC:y.push([s,{data:s.data,mode:e.BYTE,length:s.length}]);break;case e.KANJI:y.push([s,{data:s.data,mode:e.BYTE,length:l(s.data)}]);break;case e.BYTE:y.push([{data:s.data,mode:e.BYTE,length:l(s.data)}])}}return y}function m(g,y){for(var d={},s={start:{}},A=["start"],P=0;P<g.length;P++){for(var C=g[P],T=[],N=0;N<C.length;N++){var b=C[N],H=""+P+N;T.push(H),d[H]={node:b,lastCount:0},s[H]={};for(var _=0;_<A.length;_++){var I=A[_];d[I]&&d[I].node.mode===b.mode?(s[I][H]=w(d[I].lastCount+b.length,b.mode)-w(d[I].lastCount,b.mode),d[I].lastCount+=b.length):(d[I]&&(d[I].lastCount=b.length),s[I][H]=w(b.length,b.mode)+4+e.getCharCountIndicator(b.mode,y))}}A=T}for(_=0;_<A.length;_++)s[A[_]].end=0;return{map:s,table:d}}function B(g,y){var d,s=e.getBestModeForData(g);if(d=e.from(y,s),d!==e.BYTE&&d.bit<s.bit)throw new Error('"'+g+'" cannot be encoded with mode '+e.toString(d)+`.
 Suggested mode is: `+e.toString(s));switch(d===e.KANJI&&!f.isKanjiModeEnabled()&&(d=e.BYTE),d){case e.NUMERIC:return new r(g);case e.ALPHANUMERIC:return new n(g);case e.KANJI:return new a(g);case e.BYTE:return new i(g)}}t.fromArray=function(y){return y.reduce(function(d,s){return typeof s=="string"?d.push(B(s,null)):s.data&&d.push(B(s.data,s.mode)),d},[])},t.fromString=function(y,d){for(var s=p(y,f.isKanjiModeEnabled()),A=c(s),P=m(A,d),C=u.find_path(P.map,"start","end"),T=[],N=1;N<C.length-1;N++)T.push(P.table[C[N]].node);return t.fromArray(E(T))},t.rawSplit=function(y){return t.fromArray(p(y,f.isKanjiModeEnabled()))}})(ke);var pe=L,Z=R,ee=W,Ct=tt,At=rt,Tt=Me,Rt=Ie,oe=Ne,fe=q,Pt=at,G=_e,bt=Ue,Mt=D,te=ke,It=le;function Nt(t,e){for(var r=t.size,n=Rt.getPositions(e),i=0;i<n.length;i++)for(var a=n[i][0],o=n[i][1],f=-1;f<=7;f++)if(!(a+f<=-1||r<=a+f))for(var u=-1;u<=7;u++)o+u<=-1||r<=o+u||(f>=0&&f<=6&&(u===0||u===6)||u>=0&&u<=6&&(f===0||f===6)||f>=2&&f<=4&&u>=2&&u<=4?t.set(a+f,o+u,!0,!0):t.set(a+f,o+u,!1,!0))}function St(t){for(var e=t.size,r=8;r<e-8;r++){var n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function Lt(t,e){for(var r=Tt.getPositions(e),n=0;n<r.length;n++)for(var i=r[n][0],a=r[n][1],o=-2;o<=2;o++)for(var f=-2;f<=2;f++)o===-2||o===2||f===-2||f===2||o===0&&f===0?t.set(i+o,a+f,!0,!0):t.set(i+o,a+f,!1,!0)}function Dt(t,e){for(var r=t.size,n=G.getEncodedBits(e),i,a,o,f=0;f<18;f++)i=Math.floor(f/3),a=f%3+r-8-3,o=(n>>f&1)===1,t.set(i,a,o,!0),t.set(a,i,o,!0)}function re(t,e,r){var n=t.size,i=bt.getEncodedBits(e,r),a,o;for(a=0;a<15;a++)o=(i>>a&1)===1,a<6?t.set(a,8,o,!0):a<8?t.set(a+1,8,o,!0):t.set(n-15+a,8,o,!0),a<8?t.set(8,n-a-1,o,!0):a<9?t.set(8,15-a-1+1,o,!0):t.set(8,15-a-1,o,!0);t.set(n-8,8,1,!0)}function _t(t,e){for(var r=t.size,n=-1,i=r-1,a=7,o=0,f=r-1;f>0;f-=2)for(f===6&&f--;;){for(var u=0;u<2;u++)if(!t.isReserved(i,f-u)){var l=!1;o<e.length&&(l=(e[o]>>>a&1)===1),t.set(i,f-u,l),a--,a===-1&&(o++,a=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function Ft(t,e,r){var n=new Ct;r.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),Mt.getCharCountIndicator(l.mode,t)),l.write(n)});var i=Z.getSymbolTotalCodewords(t),a=fe.getTotalCodewordsCount(t,e),o=(i-a)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);for(var f=(o-n.getLengthInBits())/8,u=0;u<f;u++)n.put(u%2?17:236,8);return Ut(n,t,e)}function Ut(t,e,r){for(var n=Z.getSymbolTotalCodewords(e),i=fe.getTotalCodewordsCount(e,r),a=n-i,o=fe.getBlocksCount(e,r),f=n%o,u=o-f,l=Math.floor(n/o),h=Math.floor(a/o),p=h+1,w=l-h,E=new Pt(w),c=0,m=new Array(o),B=new Array(o),g=0,y=pe.from(t.buffer),d=0;d<o;d++){var s=d<u?h:p;m[d]=y.slice(c,c+s),B[d]=E.encode(m[d]),c+=s,g=Math.max(g,s)}var A=pe.alloc(n),P=0,C,T;for(C=0;C<g;C++)for(T=0;T<o;T++)C<m[T].length&&(A[P++]=m[T][C]);for(C=0;C<w;C++)for(T=0;T<o;T++)A[P++]=B[T][C];return A}function Yt(t,e,r,n){var i;if(It(t))i=te.fromArray(t);else if(typeof t=="string"){var a=e;if(!a){var o=te.rawSplit(t);a=G.getBestVersionForData(o,r)}i=te.fromString(t,a||40)}else throw new Error("Invalid data");var f=G.getBestVersionForData(i,r);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=f;else if(e<f)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+f+`.
`);var u=Ft(e,r,i),l=Z.getSymbolSize(e),h=new At(l);return Nt(h,e),St(h),Lt(h,e),re(h,r,0),e>=7&&Dt(h,e),_t(h,u),isNaN(n)&&(n=oe.getBestMask(h,re.bind(null,h,r))),oe.applyMask(n,h),re(h,r,n),{modules:h,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}Ae.create=function(e,r){if(typeof e=="undefined"||e==="")throw new Error("No input text");var n=ee.M,i,a;return typeof r!="undefined"&&(n=ee.from(r.errorCorrectionLevel,ee.M),i=G.from(r.version),a=oe.from(r.maskPattern),r.toSJISFunc&&Z.setToSJISFunction(r.toSJISFunc)),Yt(e,i,n,a)};var ze={},ce={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");var n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");var i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});var i=typeof n.margin=="undefined"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){var a=t.getScale(n,i);return Math.floor((n+i.margin*2)*a)},t.qrToImageData=function(n,i,a){for(var o=i.modules.size,f=i.modules.data,u=t.getScale(o,a),l=Math.floor((o+a.margin*2)*u),h=a.margin*u,p=[a.color.light,a.color.dark],w=0;w<l;w++)for(var E=0;E<l;E++){var c=(w*l+E)*4,m=a.color.light;if(w>=h&&E>=h&&w<l-h&&E<l-h){var B=Math.floor((w-h)/u),g=Math.floor((E-h)/u);m=p[f[B*o+g]?1:0]}n[c++]=m.r,n[c++]=m.g,n[c++]=m.b,n[c]=m.a}}})(ce);(function(t){var e=ce;function r(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(a,o,f){var u=f,l=o;typeof u=="undefined"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(l=n()),u=e.getOptions(u);var h=e.getImageWidth(a.modules.size,u),p=l.getContext("2d"),w=p.createImageData(h,h);return e.qrToImageData(w.data,a,u),r(p,l,h),p.putImageData(w,0,0),l},t.renderToDataURL=function(a,o,f){var u=f;typeof u=="undefined"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});var l=t.render(a,o,u),h=u.type||"image/png",p=u.rendererOpts||{};return l.toDataURL(h,p.quality)}})(ze);var He={},kt=ce;function Ce(t,e){var r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function ne(t,e,r){var n=t+e;return typeof r!="undefined"&&(n+=" "+r),n}function zt(t,e,r){for(var n="",i=0,a=!1,o=0,f=0;f<t.length;f++){var u=Math.floor(f%e),l=Math.floor(f/e);!u&&!a&&(a=!0),t[f]?(o++,f>0&&u>0&&t[f-1]||(n+=a?ne("M",u+r,.5+l+r):ne("m",i,0),i=0,a=!1),u+1<e&&t[f+1]||(n+=ne("h",o),o=0)):i++}return n}He.render=function(e,r,n){var i=kt.getOptions(r),a=e.modules.size,o=e.modules.data,f=a+i.margin*2,u=i.color.light.a?"<path "+Ce(i.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",l="<path "+Ce(i.color.dark,"stroke")+' d="'+zt(o,a,i.margin)+'"/>',h='viewBox="0 0 '+f+" "+f+'"',p=i.width?'width="'+i.width+'" height="'+i.width+'" ':"",w='<svg xmlns="http://www.w3.org/2000/svg" '+p+h+' shape-rendering="crispEdges">'+u+l+`</svg>
`;return typeof n=="function"&&n(null,w),w};var Ht=Oe,ue=Ae,Ke=ze,Kt=He;function ve(t,e,r,n,i){var a=[].slice.call(arguments,1),o=a.length,f=typeof a[o-1]=="function";if(!f&&!Ht())throw new Error("Callback required as last argument");if(f){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i=="undefined"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(l,h){try{var p=ue.create(r,n);l(t(p,e,n))}catch(w){h(w)}})}try{var u=ue.create(r,n);i(null,t(u,e,n))}catch(l){i(l)}}Q.create=ue.create;Q.toCanvas=ve.bind(null,Ke.render);Q.toDataURL=ve.bind(null,Ke.renderToDataURL);Q.toString=ve.bind(null,function(t,e,r){return Kt.render(t,r)});export{Q as b};
