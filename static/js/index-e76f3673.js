import{g as pt,a3 as mt,a4 as ft}from"./getAssetsFile-12900b89.js";import{N as yt,H as ht,F as gt}from"./Header-5ad78c0d.js";import{_ as J,B as m,D as wt,u as Dt,T as I,M as Bt,g as bt,L}from"./index-21fc6ed5.js";import{B as xt}from"./Border-47a72e5b.js";import{u as O}from"./vue-i18n-5b28fcda.js";import{a9 as U,az as r,Z as f,b1 as v,a0 as t,a7 as d,D as e,a6 as _,K as o,r as s,ap as M,w as St,aZ as $,h as w,$ as R,J as Z,_ as p,aC as Ct,aA as Et}from"./@vue-823c75d3.js";import{b as kt,c as Ft,g as Tt}from"./Erc20-40b6a00a.js";import{s as It}from"./pinia-d7eeac71.js";import{u as Mt}from"./vue-router-4d4637a0.js";import{e as At,a as j}from"./format-7642b802.js";import{g as Nt,c as G}from"./public-d126e26e.js";import"./@metamask-0322580d.js";import"./@ethersproject-baa9d35e.js";import"./js-sha3-24137471.js";import"./hash.js-a20011ef.js";import"./minimalistic-assert-c1ce1705.js";import"./inherits-1fe83bc7.js";import"./bech32-9a81277b.js";import"./@walletconnect-6b5bf47d.js";import"./is-typedarray-4f40b03b.js";import"./query-string-2015e57d.js";import"./strict-uri-encode-ecbf5106.js";import"./decode-uri-component-fb3850ff.js";import"./split-on-first-6a113853.js";import"./typedarray-to-buffer-3049f596.js";import"./detect-browser-d6d27bfa.js";import"./qrcode-8475bf43.js";import"./isarray-dd297434.js";import"./buffer-42a74e2f.js";import"./base64-js-f5f6d31b.js";import"./ieee754-b34e253f.js";import"./dijkstrajs-5cebdf0c.js";import"./copy-to-clipboard-792b0d71.js";import"./toggle-selection-eefc0dc5.js";import"./preact-c6b9a0a0.js";import"./process-79043346.js";import"./vue-demi-5b9a0fa5.js";import"./@intlify-22bbbbdc.js";import"./vue-b8cbd5d3.js";import"./dayjs-3b7406d5.js";const $t={class:"content"},Ht={class:"card"},Wt={class:"handler"},Pt=U({__name:"Dialog",props:{show:{type:Boolean,default:!1}},emits:["close","navigateTo"],setup(n,{emit:u}){const{t:i}=O(),y=()=>{u("close")},B=()=>{u("navigateTo")};return(b,C)=>(r(),f(wt,{show:n.show,onClose:y,title:e(i)("\u8D2D\u4E70\u6210\u529F")},{default:v(()=>[t("div",$t,[t("div",Ht,[d(xt,{mark:!1,img:e(pt)("global/blindBxo.gif")},null,8,["img"])]),t("div",Wt,[d(m,{onClick:B},{default:v(()=>[_(o(e(i)("\u5F00\u542F\u76F2\u76D2")),1)]),_:1}),t("div",{class:"tips",onClick:y},o(e(i)("\u6211\u77E5\u9053\u4E86")),1)])])]),_:1},8,["show","title"]))}});var Vt=J(Pt,[["__scopeId","data-v-61a51de1"]]);const H=async()=>await Nt(G.buyMysteryBox.address,G.buyMysteryBox.abi),Xt=async n=>await(await H()).buyMysteryBox(n),zt=async()=>await(await H()).price(),Kt=async()=>await(await H()).startTime();const W=n=>(Ct("data-v-2477b81f"),n=n(),Et(),n),Lt={class:"sale-container"},Rt={class:"sale-box"},Zt={class:"title"},jt={class:"fw-en"},Gt=W(()=>t("span",{class:"fw-en"},"OpenMeta",-1)),Jt={class:"time"},Ot=W(()=>t("div",{class:"clock"},[t("img",{src:mt})],-1)),Ut=W(()=>t("div",{class:"gift-box"},[t("img",{src:ft})],-1)),qt={class:"count"},Qt={class:"manghe"},Yt={class:"computed"},te={class:"total"},ee=_("MDX\u4F59\u989D\u4E0D\u8DB3"),ae={class:"buying"},se={class:"buying-text"},oe={class:"buying"},ue={class:"buying-text"},le={class:"footer"},ce=U({__name:"index",setup(n){const{t:u}=O(),i=Dt(),{address:y,loginState:B,chainId:b}=It(i);let C=s(!1);const q=()=>{C.value=!1},Q=()=>{i.setBscShowState(!0)},Y=()=>{window.open("https://ht.mdex.co/#/swap?lang=zh-HK&inputCurrency=0x25d2e80cb6b86881fd7e07dd263fb79f4abe033c&outputCurrency=0xa71edc38d189767582c38a3145b5873052c3e47a")},tt=Mt(),et=()=>{tt.push("/user?tab=blingBox")},l=s(1),at=()=>{l.value--,l.value<=1&&(l.value=1)},st=()=>{l.value++,l.value>=5&&(l.value=5)},P=s("");M(async()=>{if(i.address&&b.value==I){let a=await Kt();P.value=At(a.toString())}});const x=s(!1),E=s(""),k=s(""),F=s("success"),D=s(!1),ot=async()=>{try{D.value=!0;let a=await kt();a.from&&(await a.wait(1),await V(),E.value="\u6388\u6743\u6210\u529F",k.value="\u7528\u6237\u6388\u6743\u5408\u7EA6\u6210\u529F",F.value="success",D.value=!1)}catch{E.value="\u6388\u6743\u5931\u8D25",k.value="\u7528\u6237\u65AD\u5F00\u6216\u53D6\u6D88\u4E86\u6388\u6743",F.value="error",D.value=!1,console.log("\u9500\u552E\u6388\u6743\u5931\u8D25")}},h=s(!1),V=async()=>{const a=await Ft(y.value);Number(a.toString())>0&&(h.value=!0)};M(()=>{c.value&&b.value==I&&V()});const ut=s(!1),lt=async()=>{i.setConnectWalletShow(!0)},A=s(0),X=s(0),z=async()=>{try{if(y.value.length){const a=await zt(),T=await Tt(y.value);A.value=j(a.toString()),X.value=j(T.toString())}}catch(a){console.log("\u672A\u77E5\u9519\u8BEF",a)}};M(async()=>{z()});const c=s(!1);M(()=>{B.value?c.value=!0:(i.setConnectWalletShow(!0),c.value=B.value)}),St(B,a=>{a&&(c.value=!0)}),$(()=>{y.value.length&&(c.value=!0)});const S=s(!1),N=s(0);$(()=>{N.value=l.value*A.value,X.value>N.value?S.value=!0:S.value=!1});const g=s(!1),ct=async()=>{try{g.value=!0;let a=await Xt(l.value);a.from&&(await a.wait(2),await z(),g.value=!1,l.value=1,C.value=!0)}catch{g.value=!1,E.value="\u8D2D\u4E70\u5931\u8D25",k.value="\u7528\u6237\u53D6\u6D88\u6216\u65AD\u5F00\u4E86\u8D2D\u4E70",F.value="error",x.value=!0}};$(()=>{x.value&&setTimeout(()=>{x.value=!1},2e3)});const nt=w(()=>!c.value&&!ut.value),rt=w(()=>c.value&&S.value&&!g.value&&h.value),K=w(()=>c.value&&h.value&&!S.value),it=w(()=>c.value&&h.value&&S.value&&g.value),vt=w(()=>c.value&&!h.value&&!D.value&&b.value==I),dt=w(()=>c.value&&!h.value&&D.value),_t=w(()=>c.value&&!h.value&&!D.value&&b.value!==I);return(a,T)=>(r(),R("div",Lt,[d(yt),d(ht),t("div",Rt,[t("header",null,[t("div",Zt,[t("div",null,[t("span",jt,o(e(bt)),1),_(" "+o(e(u)("\u76F2\u76D2")),1)]),t("div",null,[Gt,_(" "+o(e(u)("\u9996\u53D1")),1)])]),t("div",Jt,[Ot,t("span",null,o(P.value)+" (UTC+8)",1)])]),t("aside",null,[Ut,t("div",qt,[_(o(A.value)+" MDX",1),t("span",Qt,"/ "+o(e(u)("\u76F2\u76D2")),1)]),t("div",Yt,[t("div",{class:"reduce base-style",style:Z({cursor:l.value<=1||g.value?" not-allowed":""}),onClick:at},null,4),t("div",te,o(l.value),1),t("div",{class:"plus base-style",style:Z({cursor:l.value>=5||g.value?" not-allowed":""}),onClick:st},null,4)])]),t("footer",null,[e(nt)?(r(),f(m,{key:0,onClick:lt},{default:v(()=>[_(o(e(u)("\u8FDE\u63A5\u94B1\u5305")),1)]),_:1})):p("",!0),e(vt)?(r(),f(m,{key:1,onClick:ot},{default:v(()=>[_(o(e(u)("\u6388\u6743")),1)]),_:1})):p("",!0),e(rt)?(r(),f(m,{key:2,onClick:ct},{default:v(()=>[_(o(N.value)+" MDX \u8D2D\u4E70",1)]),_:1})):p("",!0),e(_t)?(r(),f(m,{key:3,"current-type":"err",style:{"justify-content":"center",color:"#fff"},onClick:Q},{default:v(()=>[_(o(e(u)("\u5207\u6362\u4E3ABSC\u7F51\u7EDC")),1)]),_:1})):p("",!0),e(K)?(r(),f(m,{key:4,active:"","current-type":"disabled",class:"disabled"},{default:v(()=>[ee]),_:1})):p("",!0),e(it)?(r(),f(m,{key:5,active:""},{default:v(()=>[t("div",ae,[d(L),t("div",se,o(e(u)("\u8D2D\u4E70\u4E2D"))+"...",1)])]),_:1})):p("",!0),e(dt)?(r(),f(m,{key:6,active:""},{default:v(()=>[t("div",oe,[d(L),t("div",ue,o(e(u)("\u6388\u6743\u4E2D"))+"...",1)])]),_:1})):p("",!0),e(K)?(r(),R("div",{key:7,class:"to-buy",onClick:Y},"\u53BB\u8D2D\u4E70MDX")):p("",!0)])]),t("div",le,[d(gt)]),d(Vt,{show:e(C),onClose:q,onNavigateTo:et},null,8,["show"]),d(Bt,{show:x.value,type:F.value,title:E.value,desc:k.value,onClose:T[0]||(T[0]=ne=>x.value=!1)},null,8,["show","type","title","desc"])]))}});var Oe=J(ce,[["__scopeId","data-v-2477b81f"]]);export{Oe as default};
