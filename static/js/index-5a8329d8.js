import{N as qt,H as Rt,F as Ut}from"./Header-8d64b71d.js";import{a as rt,T as $t}from"./Tabs-82f9395d.js";import{g as X,a0 as zt,a1 as jt,Q as Qt,a2 as Vt}from"./getAssetsFile-567d3cf0.js";import{u as Y,R as Ot,A as Zt,B as M,V as Gt,_ as Z,L as et,E as ft,M as St,W as At}from"./index-3ca9b6c8.js";import{s as vt}from"./pinia-c5b88873.js";import{u as G}from"./vue-i18n-9e09b457.js";import{af as K,r as o,au as ht,aZ as at,a5 as I,a6 as t,Q as s,K as a,a4 as W,a3 as w,b1 as m,V,aF as O,aA as u,ac as U,aC as st,aB as ot,P as Kt,N as Jt,ad as A,b3 as Xt,bn as Yt,w as Et,aa as te,l as It,f as ee,p as ae,q as se}from"./@vue-e2e59b29.js";import{B as Wt}from"./Border-43cc6893.js";import{E as Ht,L as oe}from"./Loading-02693aaf.js";import{c as pt,g as ue}from"./public-1ae1eec4.js";import{d as le,g as ne,a as ie,p as ce,b as re,c as de,e as ve,w as _e,f as pe,h as fe,i as he,j as ge,k as me}from"./stakingNft-33fcc005.js";import{b as Tt,F as ye}from"./index-23a64008.js";import{i as ke,a as Fe,j as we}from"./index-a83cd729.js";import{a as dt,d as Ee}from"./format-7642b802.js";import{E as Bt}from"./EasyButton-5e9670bc.js";import{g as Ce,c as De,d as Ae}from"./GoldCoin-c35e12d1.js";import"./vue-router-dc311353.js";/* empty css                                                         */import"./@metamask-0322580d.js";import"./@ethersproject-baa9d35e.js";import"./js-sha3-24137471.js";import"./hash.js-a20011ef.js";import"./minimalistic-assert-c1ce1705.js";import"./inherits-1fe83bc7.js";import"./bech32-9a81277b.js";import"./@walletconnect-6b5bf47d.js";import"./is-typedarray-4f40b03b.js";import"./query-string-2015e57d.js";import"./strict-uri-encode-ecbf5106.js";import"./decode-uri-component-fb3850ff.js";import"./split-on-first-6a113853.js";import"./typedarray-to-buffer-3049f596.js";import"./detect-browser-d6d27bfa.js";import"./qrcode-8475bf43.js";import"./isarray-dd297434.js";import"./buffer-42a74e2f.js";import"./base64-js-f5f6d31b.js";import"./ieee754-b34e253f.js";import"./dijkstrajs-5cebdf0c.js";import"./copy-to-clipboard-792b0d71.js";import"./toggle-selection-eefc0dc5.js";import"./preact-c6b9a0a0.js";import"./process-79043346.js";import"./vue-demi-5b9a0fa5.js";import"./@intlify-22bbbbdc.js";import"./vue-81a98a43.js";/* empty css                                                            */import"./lottie-web-96c2a85a.js";import"./axios-f45f83e3.js";import"./qs-899482d5.js";import"./side-channel-c89d4eb5.js";import"./get-intrinsic-13ed3457.js";import"./has-symbols-39607a5b.js";import"./function-bind-f4350d04.js";import"./has-c67be6c1.js";import"./call-bind-60ebbe96.js";import"./object-inspect-cc1301a1.js";import"./dayjs-3b7406d5.js";import"./isMobile-b4d2a8d3.js";/* empty css                                                               */const Mt=e=>(st("data-v-a003d236"),e=e(),ot(),e),Be={class:"field-card-container"},xe={class:"pic-box"},be=["src"],$e={class:"working"},Se=Mt(()=>t("img",{src:zt},null,-1)),Ie={key:0,class:"working-text"},We={class:"scence"},He={class:"attr-list"},Te={class:"attr-item align-left"},Me={class:"title"},Pe={class:"answer"},Le={class:"attr-item"},Ne={class:"title"},qe={class:"answer"},Re={class:"attr-item align-right"},Ue={class:"title"},ze={class:"answer"},je={class:"flex"},Qe={class:"icon"},Ve=Mt(()=>t("img",{src:jt},null,-1)),Oe=[Ve],Ze=K({__name:"FieldCard",props:{path:{default:X("pc/work/sky.png")},config:{default:()=>({})},state:{type:Boolean,default:!1},workIng:{type:Boolean,default:!1}},emits:["working"],setup(e,{emit:_}){const{t:i}=G(),l=()=>{_("working")},c=Y(),{loginState:f}=vt(c),k=()=>{c.setConnectWalletShow(!0)},v=o(!1),E=o(!1);ht(async()=>{c.loginState&&y()});const y=async()=>{await Ot()==Zt?v.value=!0:v.value=!1};at(()=>{E.value=f.value,f.value&&y()});const C=async()=>{await Gt()?v.value=!0:v.value=!1};return(b,$)=>(u(),I("div",Be,[t("div",xe,[t("img",{src:e.path},null,8,be),t("div",$e,[Se,e.workIng?(u(),I("div",Ie,s(a(i)("\u5DE5\u4F5C\u4E2D")),1)):W("",!0)]),t("div",We,s(a(i)(e.config.name)),1)]),E.value&&v.value&&e.state?(u(),w(M,{key:0,style:{"justify-content":"center"},onClick:l},{default:m(()=>[U(s(a(i)("\u5DE5\u4F5C")),1)]),_:1})):W("",!0),E.value?W("",!0):(u(),w(M,{key:1,style:{"justify-content":"center"},onClick:k},{default:m(()=>[U(s(a(i)("\u8FDE\u63A5\u94B1\u5305")),1)]),_:1})),E.value&&!v.value&&!e.state?(u(),w(M,{key:2,"current-type":"err",style:{"justify-content":"center",color:"#fff"},onClick:C},{default:m(()=>[U(s(a(i)("\u5207\u6362\u4E3ABSC\u7F51\u7EDC")),1)]),_:1})):W("",!0),E.value&&v.value&&!e.state?(u(),w(M,{key:3,active:"","current-type":"disabled",style:{"justify-content":"center",color:"#676C73"}},{default:m(()=>[U(s(a(i)("\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684\u82F1\u96C4")),1)]),_:1})):W("",!0),t("div",He,[t("div",Te,[t("div",Me,s(a(i)(e.config.text)),1),t("div",Pe,s(a(i)(e.config.threshold)),1)]),t("div",Le,[t("div",Ne,s(a(i)("\u5EFA\u8BAE")),1),t("div",qe,s(e.config.proposal),1)]),t("div",Re,[t("div",Ue,s(a(i)("\u5956\u52B1")),1),t("div",ze,[t("div",je,[(u(!0),I(V,null,O(e.config.reward,N=>(u(),I("div",Qe,Oe))),256))])])])])]))}});var Ft=Z(Ze,[["__scopeId","data-v-a003d236"]]);const Pt=async()=>await ue(pt.nft.address,pt.nft.abi),Ge=async()=>await(await Pt()).setApprovalForAll(pt.stakingNft.address,!0),Ke=async e=>await(await Pt()).isApprovedForAll(e,pt.stakingNft.address);const Je=e=>(st("data-v-7a70fe06"),e=e(),ot(),e),Xe={class:"content"},Ye={class:"hero-select"},ta={class:"view-win"},ea={class:"scroll-list"},aa=["onClick"],sa={key:0,class:"hero-win"},oa={class:"hero-list"},ua=["onClick"],la={class:"pic-container"},na={class:"item-info"},ia={class:"base-flex"},ca={class:"base-flex"},ra={class:"base-flex"},da={class:"star-icon"},va=Je(()=>t("img",{src:Qt},null,-1)),_a=[va],pa={class:"select-active"},fa={class:"handler"},ha={class:"custom-btn"},ga={class:"btn-text"},ma={class:"custom-btn"},ya={class:"btn-text"},ka=K({__name:"SelectHeroDialog",props:{list:{default:()=>[]},selectHeroDialogShow:{type:Boolean,default:!1},poolId:{default:0},info:{default:()=>({})}},emits:["close","confirmClose","heroTypeSelect","onWork","getWork"],setup(e,{emit:_}){const i=e,{t:l}=G(),c=Y(),{address:f}=vt(c);let k=[{id:0,type:"all",text:"\u5168\u90E8"},{id:1,type:"Warrior",text:"\u6218\u58EB"},{id:2,type:"Assassin",text:"\u523A\u5BA2"},{id:3,type:"Archer",text:"\u5C04\u624B"},{id:4,type:"Mage",text:"\u6CD5\u5E08"},{id:5,type:"Support",text:"\u8F85\u52A9"}];const v=()=>{C.value=[],_("close")},E=o(0),y=r=>{E.value=r.id,_("heroTypeSelect",r.type)},C=o([]),b=r=>{let L=C.value.indexOf(r.token_id);L==-1?C.value.push(r.token_id):C.value.splice(L,1)},$=o(!1),N=async()=>{try{$.value=!0;const r={staking_data:[],pool_id:i.poolId};C.value.map(p=>{let S=0,P={userAddress:"",tokenId:0,attackPower:0,mana:0,agility:0,totalAttributes:0};i.list.map(Q=>{if(p==Q.token_id){for(let j in Q.attributes)S+=Q.attributes[j];P={userAddress:c.address,tokenId:Q.token_id,attackPower:Q.attributes.attack,mana:Q.attributes.magic,agility:Q.attributes.agile,totalAttributes:S}}}),r.staking_data.push(P)});const L=await ke(r);if(L.data){let p=await le(r.staking_data,i.poolId,L.data);p.from?(await p.wait(2),$.value=!1,_("onWork",!0)):($.value=!1,_("onWork",!1))}}catch{$.value=!1,_("onWork",!1)}},R=o(!1),h=async()=>{try{R.value=!0;let r=await Ge();r.from&&(await r.wait(1),R.value=!1,H())}catch(r){R.value=!1,console.log("\u6388\u6743\u5931\u8D25",r)}},z=o(!1),H=async()=>{if(f.value.length){const r=await Ke(f.value);z.value=r}};ht(()=>{H()});const T=o({});return at(()=>{const r={},L=i.list;i.info.poolId==0||i.info.poolId==4?L.map(p=>{if(!r[p.token_id]){let S=0;for(let P in p.attributes)S+=p.attributes[P];r[p.token_id]={text:"\u603B\u5C5E\u6027",value:S}}}):L.map(p=>{r[p.token_id]||(r[p.token_id]={text:i.info.attr,value:p.attributes[i.info.attr]})}),T.value=r}),(r,L)=>(u(),w(ft,{show:"",title:a(l)("\u9009\u62E9\u82F1\u96C4"),onClose:v},{default:m(()=>[t("div",Xe,[t("div",Ye,[t("div",ta,[t("div",ea,[(u(!0),I(V,null,O(a(k),p=>(u(),I("span",{class:"item-type",key:p.id,style:Kt({color:E.value==p.id?"#E1C392":""}),onClick:S=>y(p)},s(a(l)(p.text)),13,aa))),128))])]),W("",!0)]),e.list.length?(u(),I("div",sa,[t("div",oa,[(u(!0),I(V,null,O(e.list,p=>(u(),I("div",{class:Jt(["hero-item",C.value.indexOf(p.token_id)!=-1?"select-hero":""]),key:p.token_id,onClick:S=>b(p)},[t("div",la,[A(Wt,{img:p.image,"rarity-img":a(Tt)[p.rarity]},null,8,["img","rarity-img"])]),t("div",na,[t("div",ia,[t("span",null,s(p.name),1),t("span",null,s(T.value[p.token_id].text),1)]),t("div",ca,[t("div",ra,[(u(!0),I(V,null,O(p.starRate,S=>(u(),I("div",da,_a))),256))]),t("span",null,s(T.value[p.token_id].value),1)])]),Xt(t("div",pa,null,512),[[Yt,C.value.indexOf(p.token_id)!=-1]])],10,ua))),128))])])):(u(),w(Ht,{key:1},{default:m(()=>[U(s(a(l)("\u60A8\u8FD8\u6CA1\u6709\u53EF\u5DE5\u4F5C\u7684\u82F1\u96C4"))+"\uFF01",1)]),_:1}))]),t("div",fa,[!z.value&&!R.value?(u(),w(M,{key:0,onClick:h},{default:m(()=>[t("div",null,s(a(l)("\u6388\u6743")),1)]),_:1})):W("",!0),R.value?(u(),w(M,{key:1,active:""},{default:m(()=>[t("div",ha,[A(et),t("div",ga,s(a(l)("\u6388\u6743\u4E2D"))+"...",1)])]),_:1})):W("",!0),!$.value&&z.value&&C.value.length?(u(),w(M,{key:2,onClick:N},{default:m(()=>[t("div",null,s(a(l)("\u5F00\u59CB\u5DE5\u4F5C")),1)]),_:1})):W("",!0),z.value&&!C.value.length&&!$.value?(u(),w(M,{key:3,active:"","current-type":"disabled",class:"disabled-btn"},{default:m(()=>[t("div",null,s(a(l)("\u5F00\u59CB\u5DE5\u4F5C")),1)]),_:1})):W("",!0),$.value?(u(),w(M,{key:4,active:""},{default:m(()=>[t("div",ma,[A(et),t("div",ya,s(a(l)("\u786E\u8BA4\u4E2D"))+"...",1)])]),_:1})):W("",!0)])]),_:1},8,["title"]))}});var Fa=Z(ka,[["__scopeId","data-v-7a70fe06"]]);const wt=[{name:"\u6697\u5F71\u79D8\u5883",text:"\u95E8\u69DB",pic:"src/assets/img/pc/work/sky.png",poolId:0,threshold:"\u65E0\u95E8\u69DB",proposal:"\u6240\u6709\u82F1\u96C4",reward:1,type:1}],xt=[{name:"\u68A6\u5E7B\u79D8\u5883",text:"\u653B\u51FB",classes:"Archer",attr:"attack",pic:"src/assets/img/pc/work/menghuan.png",poolId:1,threshold:"60\u4EE5\u4E0A",value:60,proposal:"\u5C04\u624B",reward:2,type:1},{name:"\u68A6\u5E7B\u79D8\u5883",text:"\u9B54\u6CD5",attr:"magic",classes:"Mage",pic:"src/assets/img/pc/work/menghuan.png",poolId:2,threshold:"100\u4EE5\u4E0A",value:100,proposal:"\u6CD5\u5E08",reward:2,type:2},{name:"\u68A6\u5E7B\u79D8\u5883",text:"\u654F\u6377",attr:"agile",classes:"Assassin",pic:"src/assets/img/pc/work/menghuan.png",poolId:3,threshold:"80\u4EE5\u4E0A",value:80,proposal:"c\u523A\u5BA2",reward:2,type:3}],bt=[{name:"\u52C7\u8005\u79D8\u5883",text:"\u603B\u5C5E\u6027",pic:"src/assets/img/pc/work/yongzhe.png",poolId:4,threshold:"258\u4EE5\u4E0A",proposal:"\u6240\u6709\u82F1\u96C4",reward:3,type:1}];const gt=e=>(st("data-v-56ac1cf8"),e=e(),ot(),e),wa={class:"moyu"},Ea={class:"moyu-desc"},Ca={class:"produce"},Da=gt(()=>t("div",{class:"cloud"},null,-1)),Aa={style:{color:"#fff"}},Ba={class:"field-card-list base-list"},xa=gt(()=>t("span",null,null,-1)),ba={class:"field-card-list base-list"},$a=gt(()=>t("span",null,null,-1)),Sa={class:"field-card-list base-list"},Ia=gt(()=>t("span",null,null,-1)),Wa=K({__name:"Moyu",setup(e){const{t:_}=G(),i=Y(),l=o(50),c=o(37),f=o("center"),k=()=>{const n=document.documentElement.clientWidth<750;l.value=n?37:50,c.value=n?232:260,f.value=n?"letf":"center"};k(),window.addEventListener("resize",k,!1);const v=async n=>{H(n)},E=n=>{H(n)},y=n=>{H(n)},C=o(!1),b=o([]),$=o([]),N=o(0),R=o({}),h={1:60,2:100,3:80},z={1:1,2:2,3:3},H=n=>{N.value=n.poolId,R.value=n,n.poolId==0?b.value=j.value:n.poolId==z[n.poolId]?(b.value=[],j.value.map(g=>{g.classes==n.classes&&g.attributes[n.attr]>h[n.poolId]&&b.value.push(g)})):(b.value=[],j.value.map(g=>{let F=0;for(let q in g.attributes)F+=g.attributes[q];F>258&&b.value.push(g)})),b.value.length&&($.value=[...b.value]),C.value=!0},T=o(""),r=o(""),L=o(!1),p=o(!1),S=o("success"),P=n=>{L.value=n,C.value=!1,n?(S.value="success",T.value="\u8D28\u62BC\u6210\u529F",r.value="\u4F60\u7684\u82F1\u96C4\u5DF2\u7ECF\u5F00\u59CB\u4E3A\u60A8\u8D5A\u53D6\u6536\u76CA",setTimeout(()=>{kt(),ut(),Dt()})):(S.value="error",T.value="\u8D28\u62BC\u5931\u8D25",r.value="\u4F60\u7684\u82F1\u96C4\u8D28\u62BC\u5931\u8D25"),p.value=!0};Et(p,n=>{setTimeout(()=>{n&&(p.value=!1)},2e3)});const Q=n=>{$.value.length&&(b.value=[],n=="all"?b.value=[...$.value]:$.value.map(g=>{g.classes==n&&b.value.push(g)}))},j=o([]),ut=async()=>{if(i.loginState){const n=await Fe({account:i.address}),g=[],F=await ne(i.address);F.length&&(F.map(q=>{let J=q.toString();n.map(_t=>{J==_t.token_id&&g.push(_t)})}),j.value=g)}},lt=o([]),nt=()=>{const n=[];wt.map(g=>{let F=!1;g.type==1&&j.value.length&&(F=!0,n.push(F))}),lt.value=n},tt=o([]),d=()=>{const n=[];xt.map(g=>{let F=!1;g.poolId==z[g.poolId]&&j.value.map(q=>{q.classes==g.classes&&q.attributes[g.attr]>h[g.poolId]&&(F=!0)}),n.push(F)}),tt.value=n},D=o([]),B=()=>{const n=[];bt.map(g=>{if(g.type==1){let F=!1;j.value.map(q=>{let J=0;for(let _t in q.attributes)J+=q.attributes[_t];J>h[3]&&(F=!0,n.push(F))})}}),D.value=n},x=o(wt),it=async()=>{if(i.loginState){const n={addition:"",perBlock:0,threshold:"",level:""},g=await ce(wt[0].poolId);g.addition&&(n.addition=g.addition.toString(),n.perBlock=dt(g.perBlock.toString()),n.threshold=g.threshold.toString(),n.level=g.level.toString(),n.threshold=="0"&&(x.value[0].threshold="\u65E0\u95E8\u69DB",x.value[0].proposal="\u6240\u6709\u82F1\u96C4"))}},yt=o(0),Lt=async()=>{if(i.loginState){const n=await re();yt.value=n.toString()/100}},ct=o({}),Dt=async()=>{try{if(i.loginState){const n={};(await ie(i.address)).map(F=>{n[F.pid.toString()]=F.state}),ct.value=n}}catch(n){console.log("\u62A5\u9519\u4E86",n)}},kt=async()=>{await ut(),nt(),d(),B(),Lt(),Dt(),it()},{loginState:Nt}=vt(i);return at(()=>{Nt.value?kt():(ct.value={},yt.value=0,D.value=[],tt.value=[],lt.value=[],j.value=[],$.value=[],b.value=[])}),ht(()=>{kt()}),(n,g)=>(u(),I(V,null,[t("div",wa,[t("div",Ea,[t("div",Ca,[Da,t("span",null,s(a(_)("\u4EA7\u51FA\u7387"))+"\uFF1A",1),t("span",Aa,s(yt.value)+" %",1)]),W("",!0)]),A($t,{class:"tab-change",defaultTabIndex:"1",align:"between",border:!1,width:c.value},te({default:m(()=>[A(rt,{tab:a(_)("\u521D\u7EA7"),key:"1"},{default:m(()=>[t("div",Ba,[(u(!0),I(V,null,O(x.value,(F,q)=>(u(),w(Ft,{state:lt.value[q],workIng:ct.value[F.poolId],config:F,onWorking:J=>v(F)},null,8,["state","workIng","config","onWorking"]))),256)),xa])]),_:1},8,["tab"]),A(rt,{tab:a(_)("\u8FDB\u9636"),key:"2"},{default:m(()=>[t("div",ba,[(u(!0),I(V,null,O(a(xt),(F,q)=>(u(),w(Ft,{path:a(X)("pc/work/yongzhe.png"),config:F,workIng:ct.value[F.poolId],state:tt.value[q],onWorking:J=>E(F)},null,8,["path","config","workIng","state","onWorking"]))),256)),$a])]),_:1},8,["tab"]),A(rt,{tab:a(_)("\u5C01\u795E"),key:"3"},{default:m(()=>[t("div",Sa,[(u(!0),I(V,null,O(a(bt),(F,q)=>(u(),w(Ft,{path:a(X)("pc/work/menghuan.png"),config:F,workIng:ct.value[F.poolId],state:D.value[q],onWorking:J=>y(F)},null,8,["path","config","workIng","state","onWorking"]))),256)),Ia])]),_:1},8,["tab"])]),_:2},[void 0]),1032,["width"])]),C.value?(u(),w(Fa,{key:0,list:b.value,poolId:N.value,info:R.value,onClose:g[0]||(g[0]=F=>C.value=!1),onHeroTypeSelect:Q,onOnWork:P},null,8,["list","poolId","info"])):W("",!0),A(St,{show:p.value,title:T.value,desc:r.value,type:S.value},null,8,["show","title","desc","type"])],64))}});var Ha=Z(Wa,[["__scopeId","data-v-56ac1cf8"]]);const mt=e=>(st("data-v-0913b338"),e=e(),ot(),e),Ta={class:"hero-card-container"},Ma={class:"pic-container"},Pa={class:"hero-info-container"},La={class:"block-top"},Na={class:"hero-name"},qa={class:"base-place-style"},Ra={class:"block-center"},Ua={class:"info-item one"},za={class:"info-item-left"},ja={style:{"padding-right":"4px"}},Qa={class:"info-item-right"},Va={class:"value"},Oa={class:"info-item two"},Za={class:"info-item-left"},Ga={style:{"padding-right":"4px"}},Ka=mt(()=>t("div",null,null,-1)),Ja={class:"info-item-right"},Xa={class:"value"},Ya={class:"center-icon two-hover"},ts={class:"base-icon"},es=["src"],as={class:"item-two-hover bubble"},ss={class:"info-item thr"},os={class:"info-item-left"},us={style:{"padding-right":"4px"}},ls={class:"center-icon thr-hover"},ns={class:"base-icon"},is=["src"],cs={class:"item-thr-hover bubble"},rs={class:"info-item-right"},ds={class:"value"},vs={class:"info-item four"},_s={class:"info-item-left"},ps={style:{"padding-right":"4px"}},fs=mt(()=>t("div",null,null,-1)),hs={class:"info-item-right",style:{display:"block"}},gs={class:"mdx-flex"},ms=mt(()=>t("div",{class:"mdx"},[t("img",{src:Vt})],-1)),ys={class:"value fw-en",style:{color:"#E1C392"}},ks=mt(()=>t("div",{class:"equal"}," $12.5 ",-1)),Fs={class:"block-bottom"},ws=K({__name:"HeroCard",props:{data:{default:()=>({})},map:{default:()=>({})},poolMapping:{default:()=>({})},block:null,zy:{default:0}},emits:["quitWork","pickUp","extractReward"],setup(e,{emit:_}){const i=e,{t:l}=G(),c=[{id:1,text:"\u5E73\u5747\u6BCF\u533A\u5757\u6536\u76CA(DHT)",mapping:"revenuePerBlock",icon:X("pc/work/question-circle.png")},{id:2,text:"\u5DE5\u4F5C\u65F6\u957F(\u533A\u5757)",mapping:"workingTime",icon:X("pc/work/question-circle.png")},{id:3,text:"\u75B2\u52B3\u5EA6",mapping:"fatigue",icon:X("pc/work/refresh.png")},{id:4,text:"\u6536\u76CA",mapping:"profit",icon:X("pc/work/logo.png")}];let f=H=>{if(H){let T=Ee(H*3);return`${T.days} d ${T.hours} h ${T.minutes} m `}};const k=()=>{_("quitWork")},v=H=>{_("pickUp")},E=()=>{_("extractReward")},y=o(120),C=o(44),b=()=>{const H=document.documentElement.clientWidth<750;y.value=H?120:90,C.value=H?44:32};It(()=>{b(),window.addEventListener("resize",b,!1)});const $={0:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A0.05   * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",1:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.05+(\u7279\u5F81\u5C5E\u6027-\u5C5E\u6027\u95E8\u69DB)*0.025 ] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",2:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.05+(\u7279\u5F81\u5C5E\u6027-\u5C5E\u6027\u95E8\u69DB)*0.025 ] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",3:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.05+(\u7279\u5F81\u5C5E\u6027-\u5C5E\u6027\u95E8\u69DB)*0.025 ] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387",4:"\u5F53\u524D\u6BCF\u533A\u5757\u6536\u76CA\u4E3A\uFF1A[0.02+\uFF08\u82F1\u96C4\u603B\u5C5E\u6027-258\uFF09x 0.002] * \uFF081- \u75B2\u52B3\u5EA6\uFF09* \u901A\u80C0\u4EA7\u51FA\u7387"},N=o("\u68A6\u5E7B\u79D8\u5883"),R=o(""),h={0:"\u6697\u5F71\u79D8\u5883",1:"\u68A6\u5E7B\u79D8\u5883",2:"\u68A6\u5E7B\u79D8\u5883",3:"\u68A6\u5E7B\u79D8\u5883",4:"\u52C7\u8005\u79D8\u5883"},z=()=>{const H=i.data,r=i.poolMapping[H.token_id];N.value=h[r],R.value=$[r]};return at(()=>{i.poolMapping&&z()}),(H,T)=>(u(),I("div",Ta,[t("div",Ma,[A(Wt,{border:!1,img:e.data.image,"rarity-img":a(Tt)[e.data.rarity]},null,8,["img","rarity-img"])]),t("div",Pa,[t("div",La,[t("span",Na,s(a(l)(e.data.name)),1),t("span",qa,s(N.value),1)]),t("div",Ra,[t("div",Ua,[t("div",za,[t("div",ja,s(a(l)(c[0].text)),1)]),t("div",Qa,[t("div",Va,s(e.map[e.data.token_id]&&e.map[e.data.token_id][c[0].mapping]),1),W("",!0)])]),t("div",Oa,[t("div",Za,[t("div",Ga,s(a(l)(c[1].text)),1),Ka]),t("div",Ja,[t("div",Xa,s(e.map[e.data.token_id]&&e.map[e.data.token_id][c[1].mapping]),1),t("div",Ya,[t("div",ts,[t("img",{src:c[1].icon},null,8,es)]),t("div",as,s(a(l)("\u5DE5\u4F5C\u65F6\u957F\u533A\u5757\u9AD8\u5EA6"))+"\uFF1A"+s(e.map[e.data.token_id]&&a(f)(e.map[e.data.token_id][c[1].mapping])),1)])])]),t("div",ss,[t("div",os,[t("div",us,s(a(l)(c[2].text)),1),t("div",ls,[t("div",ns,[t("img",{src:c[0].icon},null,8,is)]),t("div",cs,s(a(l)("\u5DE5\u4F5C\u957F\u75B2\u52B3\u9AD8")),1)])]),t("div",rs,[t("div",ds,s(e.map[e.data.token_id]&&e.map[e.data.token_id][c[2].mapping]),1),t("div",{class:"center-icon"},[t("div",{class:"recovery",onClick:v},"\u6062\u590D")])])]),t("div",vs,[t("div",_s,[t("div",ps,s(a(l)(c[3].text)),1),fs]),t("div",hs,[t("div",gs,[ms,t("div",ys,s(e.map[e.data.token_id]&&e.map[e.data.token_id][c[3].mapping])+" DTH ",1)]),ks])])]),t("div",Fs,[A(Bt,{width:y.value,height:C.value,style:{"margin-right":"10px"},onClick:E},{default:m(()=>[U(s(a(l)("\u63D0\u53D6\u5956\u52B1")),1)]),_:1},8,["width","height"]),A(Bt,{width:y.value,height:C.value,type:"warning",onClick:k},{default:m(()=>[U(s(a(l)("\u9000\u51FA\u5DE5\u4F5C")),1)]),_:1},8,["width","height"])])])]))}});var Es=Z(ws,[["__scopeId","data-v-0913b338"]]);const Cs=e=>(st("data-v-17ff1cd4"),e=e(),ot(),e),Ds={class:"content"},As={class:"hero-info"},Bs={class:"hero-info-name base-color"},xs=Cs(()=>t("span",{class:"hero-info-state-tips"},"\u5F53\u524D\u75B2\u52B3\u5EA6\uFF1A",-1)),bs={class:"hero-info-state-value"},$s={class:"recovery-tips"},Ss={class:"active-tips"},Is={class:"table"},Ws={class:"table-head"},Hs={class:"base-flex base-color"},Ts={class:"base-flex base-color"},Ms={class:"table-content"},Ps={class:"base-flex"},Ls={class:"base-flex"},Ns={class:"default-tips"},qs={class:"btn-text"},Rs={class:"btn-text"},Us=K({__name:"PickUpDialog",props:{show:{type:Boolean,default:!0},data:{default:()=>({})},map:{default:()=>({})}},emits:["close","payment"],setup(e,{emit:_}){const i=e,{t:l}=G(),c=Y(),f=()=>{_("close")},k=o(!1),v=async()=>{try{k.value=!0;let h=await ve(i.data.token_id);h.from?(await h.wait(2),k.value=!1,_("payment",!0)):(k.value=!1,_("payment",!1))}catch(h){_("payment",!1),k.value=!1,console.log("\u672A\u77E5\u9519\u8BEF",h)}},E=o(0);at(async()=>{if(i.data.token_id){let h=await de(i.data.token_id);E.value=Number(dt(h.toString()).toFixed(4)),R()}});const y=o(!1),C=o(!1),b=async()=>{try{C.value=!0;let h=await De();h.from&&(await h.wait(1),C.value=!1,$())}catch(h){C.value=!1,console.log("\u672A\u77E5\u9519\u8BEF",h)}},$=async()=>{try{if(c.address){let h=await Ae(c.address);y.value=Number(h.toString())>0}}catch(h){console.log("\u672A\u77E5\u9519\u8BEF",h)}},N=o(0),R=async()=>{try{if(c.loginState){let h=await Ce(c.address);N.value=dt(h)||0,console.log(N.value)}}catch(h){console.log("\u83B7\u53D6dth\u4F59\u989D\u5931\u8D25",h)}};return ht(()=>{$()}),(h,z)=>(u(),w(ft,{show:e.show,onClose:f,title:a(l)("\u6062\u590D\u4F53\u529B")},{default:m(()=>[t("div",Ds,[t("div",As,[t("span",Bs,s(e.data.name),1),xs,t("span",bs,s(e.map[e.data.token_id]&&e.map[e.data.token_id].fatigue),1)]),t("div",$s,[t("span",null,s(a(l)("\u6062\u590D\u4F53\u529B\u9700\u8981\u6D88\u8017\u7684\u4EE3\u5E01\u6570\u91CF"))+"\uFF0C"+s(a(l)("\u89C4\u5219")),1),t("span",Ss,s(a(l)("\u8BF7\u53C2\u8003")),1)]),t("div",Is,[t("div",Ws,[t("div",Hs,s(a(l)("\u75B2\u52B3\u5EA6")),1),t("div",Ts,s(a(l)("\u6D88\u8017\u4EE3\u5E01")),1)]),t("div",Ms,[(u(!0),I(V,null,O(a(ye),(H,T)=>(u(),I("div",{class:"table-content-row",key:T},[t("div",Ps,s(H.fatigue),1),t("div",Ls,s(H.coin),1)]))),128))])]),t("div",Ns,"* "+s(a(l)("\u9700\u8981\u5148\u6062\u590D\u82F1\u96C4\u7684\u4F53\u529B\u624D\u80FD\u9000\u51FA\u5DE5\u4F5C")),1),!y.value&&!C.value?(u(),w(M,{key:0,onClick:b},{default:m(()=>[U(s(a(l)("\u6388\u6743")),1)]),_:1})):W("",!0),!y.value&&C.value?(u(),w(M,{key:1,style:{cursor:"not-allowed"},active:""},{default:m(()=>[A(et),t("div",qs,s(a(l)("\u6388\u6743\u4E2D"))+"...",1)]),_:1})):W("",!0),!k.value&&y.value&&N.value>E.value?(u(),w(M,{key:2,onClick:v},{default:m(()=>[U(s(a(l)("\u652F\u4ED8"))+" "+s(E.value)+" DHT",1)]),_:1})):W("",!0),k.value&&y.value?(u(),w(M,{key:3,active:""},{default:m(()=>[A(et),t("div",Rs,s(a(l)("\u652F\u4ED8\u4E2D"))+"...",1)]),_:1})):W("",!0),y.value&&!k.value&&N.value<E.value?(u(),w(M,{key:4,active:"",style:{color:"#676c73",cursor:"not-allowed"},"current-type":"disabled"},{default:m(()=>[U(s(a(l)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})):W("",!0)])]),_:1},8,["show","title"]))}});var zs=Z(Us,[["__scopeId","data-v-17ff1cd4"]]);const js={class:"content"},Qs={class:"tips"},Vs={style:{display:"flex","align-items":"center"}},Os={style:{"margin-left":"5px",color:"#e1c392"}},Zs=K({__name:"QuitWorkDialog",props:{show:{type:Boolean,default:!1},data:{default:()=>({})}},emits:["close","quitWork"],setup(e,{emit:_}){const i=e,{t:l}=G(),c=()=>{_("close")};Y();const f=o(!1),k=async()=>{try{f.value=!0;let v=await _e([i.data.token_id.toString()]);v.from?(await v.wait(2),f.value=!1,_("quitWork",!0)):(f.value=!1,_("quitWork",!1))}catch(v){f.value=!1,_("quitWork",!1),console.log("\u672A\u77E5\u9519\u8BEF",v)}};return(v,E)=>(u(),w(ft,{title:a(l)("\u9000\u51FA\u5DE5\u4F5C"),show:e.show,onClose:c},{default:m(()=>[t("div",js,[t("div",Qs,s(a(l)("\u786E\u5B9A\u8981\u9000\u51FA\u5F53\u524D\u5DE5\u4F5C\u5417"))+"\uFF1F",1),f.value?W("",!0):(u(),w(M,{key:0,onClick:k},{default:m(()=>[U(s(a(l)("\u9000\u51FA\u5DE5\u4F5C")),1)]),_:1})),f.value?(u(),w(M,{key:1,style:{cursor:"not-allowed"}},{default:m(()=>[t("div",Vs,[A(et),t("div",Os,s(a(l)("\u9000\u51FA\u4E2D")),1)])]),_:1})):W("",!0)])]),_:1},8,["title","show"]))}});var Gs=Z(Zs,[["__scopeId","data-v-4096b03a"]]);const Ks={class:"content"},Js={class:"tips"},Xs={style:{display:"flex","align-items":"center"}},Ys={style:{"margin-left":"5px",color:"#e1c392"}},to=K({__name:"ExtractDialog",props:{show:{type:Boolean,default:!1},data:{default:()=>({})}},emits:["close","extract"],setup(e,{emit:_}){const i=e,{t:l}=G(),c=()=>{_("close")},f=o(!1),k=async()=>{try{f.value=!0;let v=await pe([i.data.token_id]);v.from?(await v.wait(1),f.value=!1,_("extract",!0)):(f.value=!1,_("extract",!1))}catch(v){f.value=!1,_("extract",!1),console.log("\u672A\u77E5\u9519\u8BEF",v)}};return(v,E)=>(u(),w(ft,{title:a(l)("\u63D0\u53D6\u5956\u52B1"),show:e.show,onClose:c},{default:m(()=>[t("div",Ks,[t("div",Js,s(a(l)("\u786E\u5B9A\u8981\u63D0\u53D6\u5F53\u524D\u5956\u52B1\u5417\uFF1F")),1),f.value?W("",!0):(u(),w(M,{key:0,onClick:k},{default:m(()=>[U(s(a(l)("\u63D0\u53D6\u5956\u52B1")),1)]),_:1})),f.value?(u(),w(M,{key:1,style:{cursor:"not-allowed"}},{default:m(()=>[t("div",Xs,[A(et),t("div",Ys,s(a(l)("\u63D0\u53D6\u4E2D"))+"...",1)])]),_:1})):W("",!0)])]),_:1},8,["title","show"]))}});var eo=Z(to,[["__scopeId","data-v-558c96d7"]]);const Ct=e=>(st("data-v-4d80aa00"),e=e(),ot(),e),ao={class:"hero"},so={class:"hero-card-list"},oo={key:1,style:{width:"100%"}},uo={key:0,style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},lo=Ct(()=>t("div",{class:"card-item"},null,-1)),no=Ct(()=>t("div",{class:"card-item"},null,-1)),io=Ct(()=>t("div",{class:"card-item"},null,-1)),co=K({__name:"MyHero",setup(e){const{t:_}=G(),i=Y(),{loginState:l}=vt(i),c=o({}),f=o(!1),k=o(!1),v=o(""),E=o(""),y=o("success"),C=d=>{d?(v.value="\u9000\u51FA\u5DE5\u4F5C\u6210\u529F",E.value="\u5DF2\u5BF9\u8BE5\u82F1\u96C4\u9000\u51FA\u5DE5\u4F5C",y.value="success"):(v.value="\u9000\u51FA\u5DE5\u4F5C\u5931\u8D25",E.value="\u82F1\u96C4\u9000\u51FA\u5DE5\u4F5C\u5931\u8D25",y.value="error"),k.value=!0,f.value=!1,L()},b=d=>{c.value=d,f.value=!0},$=o(!1),N=d=>{c.value=d,$.value=!0},R=d=>{d?(v.value="\u6E05\u9664\u6210\u529F",E.value="\u5DF2\u6210\u529F\u6E05\u9664\u75B2\u52B3\u503C",y.value="success"):(v.value="\u6E05\u9664\u5931\u8D25",E.value="\u6E05\u9664\u75B2\u52B3\u503C\u5931\u8D25",y.value="error"),k.value=!0,$.value=!1,L()},h=o(!1),z=d=>{c.value=d,h.value=!0},H=d=>{d?(v.value="\u63D0\u53D6\u6210\u529F",E.value="\u5DF2\u6210\u529F\u63D0\u53D6\u5956\u52B1",y.value="success"):(v.value="\u63D0\u53D6\u6210\u529F",E.value="\u5F53\u524D\u63D0\u53D6\u5956\u52B1\u5931\u8D25",y.value="error"),k.value=!0,h.value=!1,L()};Et(k,d=>{setTimeout(()=>{d&&(k.value=!1)},2e3)});const T=o(!1),r=o([]),L=async()=>{try{if(i.loginState){T.value=!0;const d=[],D=await fe(i.address);if(D.length){D.map(x=>{d.push(x.toString())});const B=await we(d);B.length&&(r.value=B,T.value=!1,await Q(),await lt(),await j())}else T.value=!1}}catch(d){T.value=!1,console.log("\u672A\u77E5\u9519\u8BEF",d)}},p=ee("tabIndex");at(()=>{p.value=="2"&&l.value?L():r.value=[]});const S=o({}),P=o([]),Q=async()=>{try{const d={},D=[];r.value.map(x=>{D.push(x.token_id)}),P.value=D;let B=await he(D);for(let x=0;x<P.value.length;x++){const it={};it.fatigue=Number(B[x].fatigue.toString())/10+"%",it.startBlock=B[x].rewardBlock.toString(),d[P.value[x]]=it}S.value=d}catch(d){console.log("\u672A\u77E5\u9519\u8BEF",d)}},j=async()=>{try{if(l.value){const d=[];r.value.map(x=>{d.push(x.token_id)});const D=await At(),B=await ge(d);for(let x=0;x<P.value.length;x++)S.value[P.value[x]].profit=dt(B[x]),S.value[P.value[x]].revenuePerBlock=(dt(B[x])/(D-S.value[P.value[x]].startBlock)).toFixed(4)}}catch(d){console.log("\u672A\u77E5\u9519\u8BEF",d)}},ut=o({}),lt=async()=>{const d={};for(const D of r.value){let B=await me(D.token_id);d[D.token_id]=B.pid.toString()}ut.value=d},nt=o(0),tt=o(0);return It(async()=>{tt.value=setInterval(async()=>{let d=await At();nt.value=d},3e3)}),ae(()=>{clearInterval(tt.value)}),Et(nt,d=>{if(d)for(let D=0;D<P.value.length;D++){const B=S.value[P.value[D]].startBlock;S.value[P.value[D]].workingTime=d-B}}),(d,D)=>(u(),I(V,null,[t("div",ao,[t("div",so,[T.value?(u(),w(oe,{key:0})):(u(),I("div",oo,[r.value.length?(u(),I("div",uo,[(u(!0),I(V,null,O(r.value,B=>(u(),w(Es,{class:"card-item",key:B.token_id,data:B,map:S.value,poolMapping:ut.value,onPickUp:x=>N(B),onQuitWork:x=>b(B),onExtractReward:x=>z(B),block:nt.value,zy:S.value[B.token_id]?S.value[B.token_id].startBlock:0},null,8,["data","map","poolMapping","onPickUp","onQuitWork","onExtractReward","block","zy"]))),128)),lo,no,io])):(u(),w(Ht,{key:1},{default:m(()=>[U(s(a(_)("\u4F60\u8FD8\u6CA1\u6709\u4EFB\u4F55\u82F1\u96C4")),1)]),_:1}))]))])]),A(zs,{show:$.value,data:c.value,map:S.value,onClose:D[0]||(D[0]=B=>$.value=!1),onPayment:R},null,8,["show","data","map"]),A(Gs,{show:f.value,data:c.value,onClose:D[1]||(D[1]=B=>f.value=!1),onQuitWork:C},null,8,["show","data"]),A(eo,{show:h.value,data:c.value,onClose:D[2]||(D[2]=B=>h.value=!1),onExtract:H},null,8,["show","data"]),A(St,{show:k.value,title:v.value,desc:E.value,type:y.value,onClose:D[3]||(D[3]=B=>k.value=!1)},null,8,["show","title","desc","type"])],64))}});var ro=Z(co,[["__scopeId","data-v-4d80aa00"]]);const vo={class:"work"},_o={class:"work-tabs"},po=K({__name:"index",setup(e){const{t:_}=G();let i=o(0),l=o(0),c=o("center");const f=()=>{let y=document.documentElement.clientWidth<750;i.value=y?37:50,l.value=y?180:260,c.value=y?"left":"center"};f(),window.addEventListener("resize",f,!1);const k=Y();vt(k);const v=o("1");se("tabIndex",v);const E=({key:y})=>{v.value=y};return(y,C)=>(u(),I("div",vo,[A(qt),A(Rt),t("div",_o,[A($t,{align:a(c),defaultTabIndex:"1",width:a(l),height:a(i),onOnchange:E},{default:m(()=>[A(rt,{tab:a(_)("\u9B54\u57DF"),key:"1"},{default:m(()=>[A(Ha)]),_:1},8,["tab"]),A(rt,{tab:a(_)("\u6211\u7684\u82F1\u96C4"),key:"2"},{default:m(()=>[A(ro)]),_:1},8,["tab"])]),_:1},8,["align","width","height"])]),t("div",null,[A(Ut)])]))}});var Fu=Z(po,[["__scopeId","data-v-0ff819dc"]]);export{Fu as default};
