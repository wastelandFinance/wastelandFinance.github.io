import{a9 as Z,r as c,aZ as rt,az as a,$ as n,a0 as t,a7 as F,D as o,K as s,O as H,aF as N,aG as Lt,aC as at,aA as ot,ap as P,h as T,Z as g,b1 as f,H as st,a6 as p,_ as C,b3 as it,bn as ct,au as ee,aB as $t,w as se}from"./@vue-823c75d3.js";import{W as ae,Q as Ct,X as Pt,g as nt,T as oe,V as le,Y as ue}from"./getAssetsFile-9b850af2.js";import{_ as j,u as kt,B as x,L as _t,D as mt,M as ne,P as ie,Q as ce,R as re,S as de}from"./index-b9ad76d0.js";import{B as Dt}from"./Border-1e11a03d.js";import{b as Ut,h as tt,t as ht}from"./index-7033071c.js";import{u as K}from"./vue-i18n-5b28fcda.js";/* empty css                                                          */import{a as Q,c as Nt}from"./format-7642b802.js";import{a as xt,f as ve,b as _e}from"./Fragment-410a7d63.js";import{g as St,a as he,b as me}from"./GoldCoin-d680c8c7.js";import{g as wt,e as fe,a as ge}from"./Erc20-01ff807f.js";import{T as pe,u as ye}from"./UpgradeNft-3ceb47c4.js";import{u as Fe}from"./vue-router-4d4637a0.js";import{E as Vt,L as be}from"./Loading-ec0f30bb.js";import{M as $e}from"./MaskLoading-6a206720.js";import{a as Ce,e as ke,l as De,f as xe}from"./index-f0698c8b.js";import"./pinia-d7eeac71.js";import"./vue-demi-5b9a0fa5.js";import"./@metamask-0322580d.js";import"./@ethersproject-baa9d35e.js";import"./js-sha3-24137471.js";import"./hash.js-a20011ef.js";import"./minimalistic-assert-c1ce1705.js";import"./inherits-1fe83bc7.js";import"./bech32-9a81277b.js";import"./@walletconnect-6b5bf47d.js";import"./is-typedarray-4f40b03b.js";import"./query-string-2015e57d.js";import"./strict-uri-encode-ecbf5106.js";import"./decode-uri-component-fb3850ff.js";import"./split-on-first-6a113853.js";import"./typedarray-to-buffer-3049f596.js";import"./detect-browser-d6d27bfa.js";import"./qrcode-8475bf43.js";import"./isarray-dd297434.js";import"./buffer-42a74e2f.js";import"./base64-js-f5f6d31b.js";import"./ieee754-b34e253f.js";import"./dijkstrajs-5cebdf0c.js";import"./copy-to-clipboard-792b0d71.js";import"./toggle-selection-eefc0dc5.js";import"./preact-c6b9a0a0.js";import"./process-79043346.js";import"./@intlify-22bbbbdc.js";import"./vue-b8cbd5d3.js";import"./axios-f45f83e3.js";import"./dayjs-3b7406d5.js";import"./public-5eb57368.js";/* empty css                                                         *//* empty css                                                            */import"./lottie-web-96c2a85a.js";/* empty css                                                                */import"./qs-899482d5.js";import"./side-channel-c89d4eb5.js";import"./get-intrinsic-13ed3457.js";import"./has-symbols-39607a5b.js";import"./function-bind-f4350d04.js";import"./has-c67be6c1.js";import"./call-bind-60ebbe96.js";import"./object-inspect-cc1301a1.js";const Xt=e=>(at("data-v-0c4130dc"),e=e(),ot(),e),Se={class:"hero-card-container"},we={class:"hero-info"},Ee={class:"base-flex base-height"},Ae={class:"hero-name"},Be={class:"hero-type"},Ie={class:"base-flex base-height"},Te={class:"base-flex"},He={class:"star"},Re={class:"grade"},Ne=Xt(()=>t("div",{class:"dot"},null,-1)),Me={class:"base-flex base-height"},Le={class:"base-font"},Pe={class:"base-flex"},Ue={class:"ques-icon"},Ve={class:"attr-hide"},Xe={class:"active-title attr-item"},ze=Xt(()=>t("div",{class:"triangle"},null,-1)),Oe={class:"base-flex base-height"},We={class:"base-font"},qe=Z({__name:"HeroCard",props:{data:{default:()=>({})}},setup(e){const d=e,{t:u}=K(),i=c(0);return rt(()=>{if(i.value=0,d.data.attributes)for(let y in d.data.attributes)i.value+=d.data.attributes[y]}),(y,b)=>(a(),n("div",Se,[t("div",null,[F(Dt,{border:!1,img:e.data.image,"rarity-img":o(Ut)[e.data.rarity]},null,8,["img","rarity-img"])]),t("div",we,[t("div",Ee,[t("span",Ae,s(e.data.name),1),t("span",Be,s(e.data.classes),1)]),t("div",Ie,[t("div",Te,[(a(!0),n(H,null,N(e.data.starRate,v=>(a(),n("div",He))),256))]),t("span",Re,[Ne,t("div",null,"LV"+s(e.data.level),1)])]),t("div",Me,[t("div",Le,s(o(u)("\u603B\u5C5E\u6027")),1),t("div",Pe,[t("div",null,s(i.value),1),t("div",Ue,[t("div",Ve,[t("div",Xe,[t("span",null,s(o(u)("\u603B\u5C5E\u6027")),1),t("span",null,s(i.value),1)]),(a(!0),n(H,null,N(o(tt),v=>(a(),n("div",{class:"attr-item",key:v},[t("span",null,s(o(u)(v)),1),t("span",null,s(e.data.attributes&&e.data.attributes[v]),1)]))),128)),ze])])])]),t("div",Oe,[t("span",We,s(e.data.classes&&o(u)(o(tt)[e.data.classes])),1),t("span",null,s(e.data.attributes&&e.data.attributes[o(tt)[e.data.classes]]),1)])]),Lt(y.$slots,"default",{},void 0,!0)]))}});var et=j(qe,[["__scopeId","data-v-0c4130dc"]]);const zt=e=>(at("data-v-4f4eaf38"),e=e(),ot(),e),Ge={class:"hero-card-container"},Qe={class:"mark"},Ze={class:"position"},je={class:"star"},Ke={class:"hero-info"},Ye={class:"base-flex base-height"},Je={class:"hero-name"},ts={class:"base-flex base-height"},es={class:"hero-type"},ss={class:"base-flex"},as=zt(()=>t("div",{class:"block"},null,-1)),os={class:"grade"},ls={class:"base-flex base-height"},us={class:"base-font"},ns={class:"base-flex"},is={class:"ques-icon"},cs={class:"attr-hide"},rs={class:"active-title attr-item"},ds=zt(()=>t("div",{class:"triangle"},null,-1)),vs={class:"base-flex base-height"},_s={class:"base-font"},hs=Z({__name:"HeroCardForPhone",props:{data:{default:()=>({})}},setup(e){const d=e,{t:u}=K(),i=c(0);return rt(()=>{if(i.value=0,d.data.attributes)for(let y in d.data.attributes)i.value+=d.data.attributes[y]}),(y,b)=>(a(),n("div",Ge,[t("div",Qe,[F(Dt,{border:!1,img:e.data.image,"rarity-img":o(Ut)[e.data.rarity]},null,8,["img","rarity-img"]),t("div",Ze,[(a(!0),n(H,null,N(e.data.starRate,v=>(a(),n("div",je))),256))])]),t("div",Ke,[t("div",Ye,[t("span",Je,s(e.data.name),1)]),t("div",ts,[t("span",es,s(e.data.classes),1),t("div",ss,[as,t("span",os," LV"+s(e.data.level),1)])]),t("div",ls,[t("div",us,s(o(u)("\u603B\u5C5E\u6027")),1),t("div",ns,[t("div",null,s(i.value),1),t("div",is,[t("div",cs,[t("div",rs,[t("span",null,s(o(u)("\u603B\u5C5E\u6027")),1),t("span",null,s(i.value),1)]),(a(!0),n(H,null,N(o(tt),v=>(a(),n("div",{class:"attr-item",key:v},[t("span",null,s(o(u)(v)),1),t("span",null,s(e.data.attributes&&e.data.attributes[v]),1)]))),128)),ds])])])]),t("div",vs,[t("span",_s,s(o(u)(o(tt)[e.data.classes]||"\u5168\u90E8")),1),t("span",null,s(e.data.attributes&&e.data.attributes[o(tt)[e.data.classes]]),1)])]),Lt(y.$slots,"default",{},void 0,!0)]))}});var Mt=j(hs,[["__scopeId","data-v-4f4eaf38"]]);const ft=e=>(at("data-v-08da6eb8"),e=e(),ot(),e),ms={class:"content"},fs={class:"content-top"},gs={class:"content-left"},ps={class:"card-item"},ys={class:"content-right"},Fs={class:"base-flex base-margin"},bs={class:"base-text"},$s={class:"base-flex"},Cs={class:"base-active",style:{"margin-right":"10px"}},ks=ft(()=>t("div",{class:"fragment-icon"},[t("img",{src:ae})],-1)),Ds={class:"base-flex base-margin"},xs={class:"base-text"},Ss={class:"base-flex"},ws={class:"base-margin"},Es={class:"base-flex"},As={class:"base-text"},Bs={class:"price"},Is=ft(()=>t("div",{class:"border"},null,-1)),Ts={class:"custom-text base-flex"},Hs={style:{display:"flex"}},Rs=ft(()=>t("div",{class:"custom-text"}," \u5DF2\u9009\u5347\u661F\u7C7B\u578B\uFF0C\u5C06\u5176\u5347\u661F\u81F3 ",-1)),Ns={style:{display:"flex"}},Ms=ft(()=>t("img",{src:Ct},null,-1)),Ls=[Ms],Ps={class:"handler"},Us={class:"base-flex"},Vs={class:"margin-left"},Xs={class:"base-flex"},zs={class:"margin-left"},Os=Z({__name:"paymentDialog",props:{config:{default:()=>({})},data:{default:()=>({})}},emits:["close","updateStar"],setup(e,{emit:d}){const u=e,{t:i}=K(),y=()=>{d("close")},b=kt(),v=c(0);P(async()=>{const m=await xt(b.address);v.value=m.toString()});const S=c(0);P(async()=>{const m=await St(b.address);S.value=Q(m)});const w=c(0);P(async()=>{const m=await wt(b.address);w.value=Q(m)});const h=c(1),$=m=>{(!_.value||!B.value)&&(h.value=m)},X=c(0);X.value=T(()=>{let m=0;for(let V in u.data.attributes)m+=u.data.attributes[V];return m}).value;const _=c(!1),z=async()=>{try{_.value=!0,(await he()).from&&k(),_.value=!1}catch(m){_.value=!1,console.log("\u6388\u6743\u5931\u8D25",m)}},R=c(!1),k=async()=>{const m=await me(b.address);Number(m.toString())>0?R.value=!0:R.value=!1};P(()=>{k()});const B=c(!1),A=async()=>{try{B.value=!0;let m=await fe();m.from&&(await m.wait(1),await r(),B.value=!1)}catch(m){B.value=!1,console.log("mdx\u6388\u6743\u5931\u8D25",m)}},O=c(!1),r=async()=>{let m=await ge(b.address);Number(m.toString())>0&&(O.value=!0)};P(()=>{k(),r()});const U=c(!1);rt(()=>{u.config.id&&(h.value==1?(k(),Number(v.value)>Number(u.config.fragment_amount)&&Number(S.value)>Number(u.config.diamond_amount)?U.value=!0:U.value=!1):(r(),Number(v)>Number(u.config.fragment_amount)&&Number(w.value)>Number(u.config.coin_amount)?U.value=!0:U.value=!1))});const dt=()=>{d("updateStar",{tokenType:h.value==1?ht.token_diamond:ht.token_coin})},I=T(()=>!R.value&&!_.value&&h.value==1),vt=T(()=>!R.value&&_.value&&h.value==1),W=T(()=>!O.value&&!B.value&&h.value==2),lt=T(()=>!O.value&&B.value&&h.value==2),ut=T(()=>U.value&&R.value&&h.value==1),gt=T(()=>U.value&&O.value&&h.value==2),pt=T(()=>R.value&&!U.value&&h.value==1),q=T(()=>O.value&&!U.value&&h.value==2);return(m,V)=>(a(),g(mt,{show:"",title:o(i)("\u652F\u4ED8\u539F\u6599"),onClose:y},{default:f(()=>[t("div",ms,[t("div",fs,[t("div",gs,[t("div",ps,[F(et,{data:e.data,style:{"margin-bottom":"unset"},width:"213"},null,8,["data"])])]),t("div",ys,[t("div",Fs,[t("span",bs,s(o(i)("\u5347\u661F\u788E\u7247")),1),t("span",$s,[t("span",Cs,s(e.config.fragment_amount),1),ks])]),t("div",Ds,[t("span",xs,s(o(i)("\u9009\u62E9\u652F\u4ED8\u5E01\u79CD")),1),t("span",Ss,[t("div",{class:st(["currency",h.value==1?"select-active":""]),onClick:V[0]||(V[0]=Y=>$(1))}," DTH ",2),t("div",{class:st(["currency",h.value==2?"select-active":""]),onClick:V[1]||(V[1]=Y=>$(2))}," MDX ",2)])]),t("div",ws,[t("div",Es,[t("span",As,s(o(i)("\u652F\u4ED8\u91D1\u989D")),1),t("span",Bs,s(h.value==1?e.config.diamond_amount+" DTH":e.config.coin_amount+" MDX"),1)]),Is,t("div",Ts,[t("span",null,s(o(i)("\u4F59\u989D")),1),t("span",null,s(h.value==1?S.value:w.value),1)])]),t("div",Hs,[Rs,t("div",Ns,[(a(!0),n(H,null,N(e.data.starRate&&e.data.starRate+1,Y=>(a(),n("div",{class:"star-icon",key:Y},Ls))),128))])])])]),t("div",Ps,[F(x,{style:{"margin-right":"40px"},currentType:"disabled",onClick:y},{default:f(()=>[p(s(o(i)("\u53D6\u6D88")),1)]),_:1}),o(I)?(a(),g(x,{key:0,onClick:z},{default:f(()=>[p(s(o(i)("DTH \u6388\u6743")),1)]),_:1})):C("",!0),o(vt)?(a(),g(x,{key:1,style:{cursor:"not-allowed"}},{default:f(()=>[t("div",Us,[F(_t),t("div",Vs,s(o(i)("DTH \u6388\u6743\u4E2D"))+"...",1)])]),_:1})):C("",!0),o(W)?(a(),g(x,{key:2,onClick:A},{default:f(()=>[p(s(o(i)("MDX \u6388\u6743")),1)]),_:1})):C("",!0),o(lt)?(a(),g(x,{key:3,style:{cursor:"not-allowed"}},{default:f(()=>[t("div",Xs,[F(_t),t("div",zs,s(o(i)("MDX \u6388\u6743\u4E2D"))+"...",1)])]),_:1})):C("",!0),o(ut)?(a(),g(x,{key:4,currentType:"default",onClick:dt},{default:f(()=>[p(s(o(i)("\u5347\u661F")),1)]),_:1})):C("",!0),o(gt)?(a(),g(x,{key:5,currentType:"default",onClick:dt},{default:f(()=>[p(s(o(i)("\u5347\u661F")),1)]),_:1})):C("",!0),o(pt)?(a(),g(x,{key:6,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(o(i)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})):C("",!0),o(q)?(a(),g(x,{key:7,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(o(i)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})):C("",!0)])])]),_:1},8,["title"]))}});var Ws=j(Os,[["__scopeId","data-v-08da6eb8"]]);const qs={class:"content"},Gs={class:"card"},Qs={class:"handler"},Zs=Z({__name:"SuccessDialog",props:{show:{type:Boolean,default:!1},data:{default:()=>({})}},emits:["close"],setup(e,{emit:d}){const u=e,{t:i}=K(),y=()=>{d("close")},b=Fe(),v=()=>{b.push(`/user/wallet?token_id=${u.data.token_id}`)};return(S,w)=>(a(),g(mt,{show:e.show,onClose:y,title:o(i)("\u606D\u559C\u4F60\u5347\u661F\u6210\u529F")},{default:f(()=>[t("div",qs,[t("div",Gs,[F(et,{data:e.data},null,8,["data"])]),t("div",Qs,[F(x,{onClick:y},{default:f(()=>[p(s(o(i)("\u6211\u77E5\u9053\u4E86")),1)]),_:1}),t("div",{class:"tips",onClick:v},s(o(i)("\u67E5\u770B\u82F1\u96C4\u8BE6\u60C5")),1)])])]),_:1},8,["show","title"]))}});var js=j(Zs,[["__scopeId","data-v-c9b0547a"]]);const Ot=e=>(at("data-v-5f6e80a3"),e=e(),ot(),e),Ks={class:"content"},Ys={class:"top"},Js={class:"star-list"},ta=["onClick"],ea=Ot(()=>t("img",{src:Ct},null,-1)),sa=[ea],aa=["onClick"],oa=Ot(()=>t("img",{src:Pt},null,-1)),la=[oa],ua={key:0,class:"hero-scroll"},na={class:"hero-list"},ia={class:"select-icon-mark"},ca={key:2,class:"btn-blcok"},ra=Z({__name:"SelectHeroDialogForPhone",props:{list:{default:()=>[]}},emits:["close","starClick","selectAll","confirm"],setup(e,{emit:d}){const{t:u}=K(),i=()=>{d("close")},y=()=>{d("selectAll")},b=c({}),v=$=>{b.value=$},S=c(0),w=$=>{S.value=$,d("starClick",$)},h=()=>{d("confirm",b.value)};return($,X)=>(a(),g(mt,{show:"",title:o(u)("\u9009\u62E9\u82F1\u96C4"),onClose:i},{default:f(()=>[t("div",Ks,[t("div",Ys,[t("div",{class:"desc",onClick:y},s(o(u)("\u5168\u90E8")),1),t("div",Js,[(a(!0),n(H,null,N(S.value,_=>(a(),n("div",{class:"star-icon",key:_,onClick:z=>w(_)},sa,8,ta))),128)),(a(!0),n(H,null,N(5-S.value,_=>(a(),n("div",{class:"star-icon un-active",key:_,onClick:z=>w(_+S.value)},la,8,aa))),128))])]),e.list.length?(a(),n("div",ua,[t("div",na,[(a(!0),n(H,null,N(e.list,_=>(a(),g(et,{class:st([_.token_id==b.value.token_id?"active-class":"","card-item"]),data:_,onClick:z=>v(_)},{default:f(()=>[it(t("div",ia,null,512),[[ct,_.token_id==b.value.token_id]])]),_:2},1032,["class","data","onClick"]))),256))])])):C("",!0),e.list.length?C("",!0):(a(),g(Vt,{key:1},{default:f(()=>[p(s(o(u)("\u4F60\u8FD8\u6CA1\u6709\u4EFB\u4F55\u82F1\u96C4\uFF01")),1)]),_:1})),e.list.length?(a(),n("div",ca,[F(x,{onClick:h},{default:f(()=>[p(s(o(u)("\u786E\u5B9A")),1)]),_:1})])):C("",!0)])]),_:1},8,["title"]))}});var da=j(ra,[["__scopeId","data-v-5f6e80a3"]]);const Et=e=>(at("data-v-3cc1a936"),e=e(),ot(),e),va={class:"content-phone"},_a={class:"hero-info"},ha={class:"hero-name"},ma={class:"hero-type"},fa={class:"hero-grade"},ga=Et(()=>t("div",{class:"base-flex"},null,-1)),pa={class:"hero-block"},ya={class:"hero-card"},Fa={class:"hero-attr"},ba={class:"attr-title"},$a={class:"title"},Ca={class:"count"},ka={class:"attr-list-block"},Da={class:"attr-left"},xa={class:"attr-icon"},Sa=["src"],wa={class:"attr-name"},Ea={class:"attr-right-value"},Aa={class:"payment-info"},Ba={class:"up-star base-flex"},Ia={class:"base-title"},Ta={class:"base-flex"},Ha={class:"star-count"},Ra=Et(()=>t("div",{class:"fargment-icon"},null,-1)),Na={class:"select-type base-flex"},Ma={class:"base-title"},La={class:"base-flex"},Pa={class:"payment-count base-flex"},Ua={class:"base-title"},Va={class:"payment-value"},Xa={class:"price-block base-flex"},za={class:"price-desc"},Oa={class:"price-value"},Wa={class:"handler"},qa={class:"base-flex up-star-tips"},Ga=Et(()=>t("div",{class:"upStart-text"},"\u5DF2\u9009\u5347\u661F\u82F1\u96C4\uFF0C\u5C06\u5176\u5347\u661F\u81F3",-1)),Qa={key:0,class:"base-flex"},Za=Z({__name:"PaymentDialogForPhone",props:{config:{default:()=>({})},data:{default:()=>({})}},emits:["close","updateStar"],setup(e,{emit:d}){const u=e,{t:i}=K(),y=[{icon:nt("pc/user/Strength.png"),text:"\u9B54\u6CD5",attr:"magic"},{icon:nt("pc/user/Vitality.png"),text:"\u653B\u51FB",attr:"attack"},{icon:nt("pc/user/Agility.png"),text:"\u654F\u6377",attr:"agile"},{icon:nt("pc/user/Stamina.png"),text:"\u751F\u547D",attr:"life"},{icon:nt("pc/user/Defense.png"),text:"\u9632\u5FA1",attr:"defense"}],b=kt(),v=c(0);P(async()=>{const k=await xt(b.address);v.value=k.toString()});const S=c(0);P(async()=>{const k=await St(b.address);S.value=Q(k)});const w=c(0);P(async()=>{const k=await wt(b.address);w.value=Q(k)});const h=c(1),$=k=>{h.value=k},X=c(0);rt(()=>{let k=0;if(u.data.attributes)for(let B in u.data.attributes)k+=u.data.attributes[B];X.value=k});const _=c(!1);rt(()=>{u.config.id&&(h.value==1?v.value>u.config.fragment_amount&&S.value>u.config.diamond_amount?_.value=!0:_.value=!1:v>u.config.fragment_amount&&w.value>u.config.coin_amount?_.value=!0:_.value=!1)});const z=()=>{d("updateStar",{tokenType:h.value==1?ht.token_diamond:ht.token_coin})},R=()=>{d("close")};return(k,B)=>(a(),g(mt,{show:"",title:o(i)("\u652F\u4ED8\u539F\u6599"),onClose:R},{default:f(()=>[t("div",va,[t("div",_a,[t("div",ha,s(e.data.name),1),t("div",ma,s(e.data.classes),1),t("div",fa,"LV"+s(e.data.level),1),ga]),t("div",pa,[t("div",ya,[F(Dt,{img:e.data.image,border:!1},null,8,["img"])]),t("div",Fa,[t("div",ba,[t("div",$a,s(o(i)("\u603B\u5C5E\u6027")),1),t("div",Ca,s(X.value),1)]),t("div",ka,[(a(),n(H,null,N(y,A=>t("div",{class:"attr-item",key:A.attr},[t("div",Da,[t("div",xa,[t("img",{src:A.icon},null,8,Sa)]),t("div",wa,s(A.text),1)]),t("div",Ea,s(e.data.attributes&&e.data.attributes[A.attr]),1)])),64))])])]),t("div",Aa,[t("div",Ba,[t("div",Ia,s(o(i)("\u5347\u661F\u788E\u7247")),1),t("div",Ta,[t("div",Ha,s(e.config.fragment_amount),1),Ra])]),t("div",Na,[t("div",Ma,s(o(i)("\u9009\u62E9\u652F\u4ED8\u5E01\u79CD")),1),t("div",La,[t("div",{class:st(["base-box-style",h.value==1?"select-active":""]),onClick:B[0]||(B[0]=A=>$(1))}," DTH ",2),t("div",{class:st(["base-box-style","money-ml",h.value==2?"select-active":""]),onClick:B[1]||(B[1]=A=>$(2))}," MDX ",2)])]),t("div",Pa,[t("div",Ua,s(o(i)("\u652F\u4ED8\u91D1\u989D")),1),t("div",Va,s(h.value==1?e.config.diamond_amount+"DTH":e.config.coin_amount+"MDX"),1)]),t("div",Xa,[t("div",za,s(o(i)("\u4F59\u989D")),1),t("div",Oa,s(h.value==1?S.value:w.value),1)])]),t("div",Wa,[_.value?(a(),g(x,{key:0,currentType:"default",onClick:z},{default:f(()=>[p(s(o(i)("\u5347\u661F")),1)]),_:1})):(a(),g(x,{key:1,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(o(i)("\u4F59\u989D\u4E0D\u8DB3")),1)]),_:1})),t("div",qa,[Ga,e.data.starRate?(a(),n("div",Qa,[(a(!0),n(H,null,N(e.data.starRate+1,A=>(a(),n("div",{class:"star-icon",key:A}))),128))])):C("",!0)])])])]),_:1},8,["title"]))}});var ja=j(Za,[["__scopeId","data-v-3cc1a936"]]);const L=e=>(at("data-v-7bbbaf49"),e=e(),ot(),e),Ka=L(()=>t("span",null,"\u661F\u7EA7\u662F\u82F1\u96C4\u7684\u91CD\u8981\u5C5E\u6027\uFF0C\u6700\u9AD8\u4E3A5\u661F\uFF1B\u661F\u7EA7\u8D8A\u9AD8\uFF0C\u82F1\u96C4\u5C5E\u6027\u6210\u957F\u7387\u8D8A\u9AD8\uFF0C\u4E86\u89E3\u66F4\u591A\u5173\u4E8E\u661F\u7EA7\u8BF4\u660E",-1)),Ya={class:"base-layout"},Ja={class:"rising-star-box"},to={class:"rising-star-top"},eo={key:0,class:"pic-container"},so=["src"],ao={key:1,class:"select-icon",src:oe},oo={class:"center-block"},lo=L(()=>t("div",{class:"arrow"},[t("img",{src:le})],-1)),uo={class:"bad pc-show"},no={class:"need"},io=p(" \u5347\u661F\u5230"),co={style:{color:"#E1C392",margin:"0 5px"}},ro=p("\u661F\uFF0C\u9700\u8981\u539F\u6599 "),vo={class:"text-style-1"},_o=L(()=>t("div",{class:"dth"},null,-1)),ho={style:{color:"#E1C392",margin:"0 5px"}},mo={class:"text-style-2"},fo={key:0,class:"text-style-3"},go={key:1,class:"text-style-3"},po=p(" \u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u5C5E\u6027"),yo={style:{color:"#E1C392",margin:"0 5px"}},Fo=p("\u7684\u6210\u957F\u500D\u7387 "),bo={key:0,class:"pc-show"},$o={key:2,class:"base-border"},Co=L(()=>t("div",{class:"select-icon"},[t("img",{src:ue})],-1)),ko=[Co],Do={key:3,class:"base-card-box"},xo={class:"rising-star-bootom"},So={class:"bad phone-show"},wo={class:"need base-margin"},Eo=p(" \u5347\u661F\u5230"),Ao={style:{color:"#E1C392",margin:"0 5px"}},Bo=p("\u661F\uFF0C\u9700\u8981\u539F\u6599 "),Io={class:"base-margin"},To=L(()=>t("div",{class:"dth"},null,-1)),Ho={style:{color:"#E1C392",margin:"0 5px"}},Ro={class:"base-margin"},No={style:{color:"#E1C392",margin:"0 5px"}},Mo=p(" \u6216 "),Lo={style:{color:"#E1C392",margin:"0 5px"}},Po={key:0,class:"base-margin base-text-color"},Uo={key:1,class:"base-margin base-text-color"},Vo=p(" \u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u5C5E\u6027"),Xo=L(()=>t("span",{style:{color:"#E1C392",margin:"0 5px"}},"x1.2",-1)),zo=p("\u7684\u6210\u957F\u500D\u7387 "),Oo=[Vo,Xo,zo],Wo={key:0,class:"phone-show"},qo={class:"btn-width"},Go={style:{display:"flex","align-items":"center"}},Qo={style:{"margin-left":"5px",color:"#e1c392"}},Zo={style:{display:"flex","align-items":"center"}},jo={style:{"margin-left":"5px",color:"#e1c392"}},Ko={class:"type-select-container",style:{position:"relative"}},Yo={style:{display:"flex","align-items":"center"}},Jo={class:"star-list"},tl=["onClick"],el=L(()=>t("img",{src:Ct},null,-1)),sl=[el],al=["onClick"],ol=L(()=>t("img",{src:Pt},null,-1)),ll=[ol],ul={key:1},nl={key:0,class:"hero-list"},il={class:"select"},cl=L(()=>t("div",{class:"card"},null,-1)),rl=L(()=>t("div",{class:"card"},null,-1)),dl=L(()=>t("div",{class:"card"},null,-1)),vl=L(()=>t("div",{class:"card"},null,-1)),_l=Z({__name:"Index",setup(e){const{t:d}=K(),u=kt(),i={1:1,2:1.3,3:1.69,4:2.2,5:2.85},y=c(!1),b=()=>{y.value=document.documentElement.clientWidth<750};ee(()=>{b(),window.addEventListener("resize",b,!1)});const v=c([]),S=c([]),w=c(!1),h=async()=>{try{if(u.address.length){w.value=!0;const l=await Ce({account:u.address});l.length&&(v.value=l,S.value=l),w.value=!1}}catch(l){w.value=!1,console.log("\u53D1\u751F\u4E86\u672A\u77E5\u9519\u8BEF",l)}},$=c(!1),X=async()=>{const l=await ve(u.address);$.value=l},_=c(!1),z=async()=>{try{_.value=!0,(await _e()).from&&X(),_.value=!1}catch(l){_.value=!1,console.log("\u6388\u6743\u76F2\u76D2\u5931\u8D25",l)}};P(async()=>{h(),X()});const R=c(!1),k=()=>{y.value&&!G.value&&(R.value=!0)},B=()=>{R.value=!1},A=c({}),O=async l=>{try{if(l.starRate<5){const D={heroId:l.heroid,level:l.level,star:l.starRate+1,extraAttr:l.extra_attr};let E=await xe(D);if(E.agile){const M={...l};M.starRate=l.starRate+1,M.attributes=E,A.value=M}}else A.value={...l}}catch(D){console.log("\u8BF7\u6C42\u9519\u8BEF",D)}},r=c({}),U=async l=>{r.value=l;const D={rarity:l.rarity,star_rate:l.starRate};O(l),vt(D)},dt=async l=>{r.value=l;const D={rarity:l.rarity,star_rate:l.starRate};vt(D),O(l),R.value=!1},I=c({}),vt=async l=>{let D=await ke(l);D.id&&(I.value=D)},W=c(!1),lt=()=>{W.value=!W.value},ut=c(!1),gt=async()=>{r.value={},ut.value=!1,setTimeout(()=>{h()},1e3)},pt=()=>{window.open("https://www.bilibili.com/")},q=c(0),m=l=>{q.value=l,v.value=[],S.value.map(D=>{D.starRate==l&&v.value.push(D)})},V=()=>{q.value=0,v.value=S.value},Y=c(0),Wt=async()=>{if(u.address){const l=await xt(u.address);Y.value=Q(l)}},At=c(0),qt=async()=>{if(u.address){const l=await St(u.address);At.value=Q(l)}};P(async()=>{qt(),Wt()});const Bt=c(0);P(async()=>{const l=await wt(u.address);Bt.value=Q(l)}),$t("starFragmentCount",Y.value),$t("dthBalance",At.value),$t("mdxBalance",Bt.value);const J=c(!1),yt=c(""),Ft=c(""),bt=c("success"),G=c(!1),It=async({tokenType:l})=>{var D,E;try{W.value=!1,G.value=!0;const M={tokenId:r.value.token_id,userAddress:u.address,orderType:1,coinAmount:l==1?(D=Nt(I.value.coin_amount))==null?void 0:D.toString():"0",goldCoinAmount:l==2?(E=Nt(I.value.diamond_amount))==null?void 0:E.toString():"0",boxFragment:I.value.blindbox_amount,starFragment:I.value.fragment_amount,targetLevel:0,targetStarRate:r.value.starRate,tokenType:l,userSign:""},Yt=await ie(),Jt=ce(Number(Yt)),te=re(),Tt=await de(Jt,te,M);if(Tt){M.userSign=Tt;const Ht=await De(M);if(Ht.data.signature){let Rt=await ye(Ht.data);Rt.from&&(await Rt.wait(2)).from&&(ut.value=!0,G.value=!1,yt.value="\u5347\u661F\u6210\u529F",Ft.value=" \u4F60\u9009\u62E9\u7684\u82F1\u96C4\u5DF2\u5347\u661F\u6210\u529F",bt.value="success",J.value=!0)}}}catch(M){yt.value="\u5347\u661F\u5931\u8D25",Ft.value=" \u4F60\u9009\u62E9\u7684\u82F1\u96C4\u5347\u661F\u5931\u8D25",bt.value="error",J.value=!0,G.value=!1,console.log("\u53D1\u751F\u4E86\u672A\u77E5\u9519\u8BEF",M)}};se(J,l=>{l&&setTimeout(()=>{J.value=!1},2e3)});const Gt=T(()=>!$.value&&!_.value),Qt=T(()=>!$.value&&_.value),Zt=T(()=>!r.value.heroid&&$.value&&$.value),jt=T(()=>G.value&&$.value&&$.value),Kt=T(()=>r.value.heroid&&r.value.starRate<5&&$.value&&!G.value);return(l,D)=>(a(),n(H,null,[F(pe,null,{default:f(()=>[Ka,t("span",{style:{color:"#E1C392"},onClick:pt}," \u8BF7\u70B9\u51FB ")]),_:1}),t("div",Ya,[t("div",null,[t("div",Ja,[t("div",to,[r.value.image?(a(),n("div",{key:1,class:"base-card-box",onClick:k},[F(et,{class:"pc-active",data:r.value},null,8,["data"]),F(Mt,{class:"phone-active",style:{width:"100%"},data:r.value},null,8,["data"])])):(a(),n("div",{key:0,class:"base-border left-box",onClick:k},[r.value.image?(a(),n("div",eo,[t("img",{src:r.value.image},null,8,so)])):(a(),n("img",ao))])),t("div",oo,[lo,t("div",uo,[t("div",no,[io,t("span",co,s(r.value.starRate+1||"??"),1),ro]),t("div",vo,[_o,t("span",ho,s(I.value.fragment_amount||"??")+" "+s(o(d)("\u5347\u661F\u788E\u7247")),1)]),t("div",mo,s(I.value.diamond_amount||"??")+" DTH \u6216 "+s(I.value.coin_amount||"??")+" MDX ",1),r.value.image?(a(),n("div",go,[po,t("span",yo,"x"+s(r.value.starRate&&i[r.value.starRate+1]),1),Fo])):(a(),n("div",fo," \u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u66F4\u9AD8\u7684\u5C5E\u6027\u6210\u957F\u500D\u7387 "))]),r.value.starRate==5?(a(),n("div",bo,s(o(d)("\u6B64\u82F1\u96C4\u5DF2\u662F\u6EE1\u661F\u82F1\u96C4")),1)):C("",!0)]),r.value.image?(a(),n("div",Do,[F(et,{class:"pc-active",data:A.value},null,8,["data"]),F(Mt,{class:"phone-active",style:{width:"100%"},data:A.value},null,8,["data"])])):(a(),n("div",$o,ko))]),t("div",xo,[t("div",So,[t("div",wo,[Eo,t("span",Ao,s(r.value.starRate+1||"??"),1),Bo]),t("div",Io,[To,t("span",Ho,s(I.value.fragment_amount||"??")+" \u5347\u661F\u788E\u7247",1)]),t("div",Ro,[t("span",No,s(I.value.diamond_amount||"??")+" DTH ",1),Mo,t("span",Lo,s(I.value.coin_amount||"??")+" MDX ",1)]),r.value.image?(a(),n("div",Uo,Oo)):(a(),n("div",Po," \u5347\u661F\u6210\u529F\u540E\uFF0C\u5C06\u83B7\u5F97\u66F4\u9AD8\u7684\u5C5E\u6027\u6210\u957F\u500D\u7387 "))]),r.value.starRate==5?(a(),n("div",Wo," \u6B64\u82F1\u96C4\u5DF2\u662F\u6EE1\u661F\u82F1\u96C4 ")):C("",!0),t("div",qo,[o(Gt)?(a(),g(x,{key:0,onClick:z},{default:f(()=>[p(s(o(d)("\u6388\u6743")),1)]),_:1})):C("",!0),o(Kt)?(a(),g(x,{key:1,onClick:lt},{default:f(()=>[p(s(o(d)("\u5347\u661F")),1)]),_:1})):C("",!0),o(Zt)?(a(),g(x,{key:2,active:"",currentType:"disabled",class:"disabled-btn"},{default:f(()=>[p(s(o(d)("\u5347\u661F")),1)]),_:1})):C("",!0),o(Qt)?(a(),g(x,{key:3},{default:f(()=>[t("div",Go,[F(_t),t("div",Qo,s(o(d)("\u6388\u6743\u4E2D"))+"...",1)])]),_:1})):C("",!0),o(jt)?(a(),g(x,{key:4,style:{cursor:"not-allowed"}},{default:f(()=>[t("div",Zo,[F(_t),t("div",jo,s(o(d)("\u5347\u661F\u4E2D"))+"...",1)])]),_:1})):C("",!0)])])]),t("div",Ko,[t("div",Yo,[t("div",{style:{cursor:"pointer"},onClick:V},"\u5168\u90E8"),t("div",Jo,[(a(!0),n(H,null,N(q.value,E=>(a(),n("div",{class:"star-icon",key:E,onClick:M=>m(E)},sl,8,tl))),128)),(a(!0),n(H,null,N(5-q.value,E=>(a(),n("div",{class:"star-icon un-active",key:E,onClick:M=>m(E+q.value)},ll,8,al))),128))])]),w.value?(a(),g(be,{key:0})):(a(),n("div",ul,[v.value.length?(a(),n("div",nl,[(a(!0),n(H,null,N(v.value,E=>(a(),g(et,{class:st([E.token_id==r.value.token_id?"active-class":"","card"]),data:E,onClick:M=>U(E)},{default:f(()=>[it(t("div",il,null,512),[[ct,E.token_id==r.value.token_id]])]),_:2},1032,["class","data","onClick"]))),256)),cl,rl,dl,vl])):(a(),g(Vt,{key:1},{default:f(()=>[p(s(o(d)("\u4F60\u8FD8\u6CA1\u6709\u4EFB\u4F55\u82F1\u96C4\uFF01")),1)]),_:1}))])),G.value&&$.value?(a(),g($e,{key:2})):C("",!0)]),it(t("div",null,[F(da,{list:v.value,onStarClick:m,onSelectAll:V,onClose:B,onConfirm:dt},null,8,["list"])],512),[[ct,y.value&&R.value]]),it(t("div",null,[F(Ws,{data:r.value,config:I.value,onClose:lt,onUpdateStar:It},null,8,["data","config"])],512),[[ct,!y.value&&W.value]]),it(t("div",null,[F(ja,{data:r.value,config:I.value,onClose:lt,onUpdateStar:It},null,8,["data","config"])],512),[[ct,y.value&&W.value]]),F(js,{data:A.value,show:ut.value,onClose:gt},null,8,["data","show"])]),F(ne,{show:J.value,title:yt.value,desc:Ft.value,type:bt.value,onClose:D[0]||(D[0]=E=>J.value=!1)},null,8,["show","title","desc","type"])])],64))}});var bu=j(_l,[["__scopeId","data-v-7bbbaf49"]]);export{bu as default};
